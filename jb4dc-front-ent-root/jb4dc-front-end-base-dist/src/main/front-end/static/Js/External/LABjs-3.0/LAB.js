/*! LABjs
	v3.0.0-pre1 (c) 2021 Kyle Simpson
	MIT License: http://getify.mit-license.org
*/

!function UMD(e,t,r){"function"==typeof define&&define.amd?define(r):t[e]=r(e,t)}("$LAB",this,function DEF(e,t){"use strict";function preloadResource(e){var t=document.createElement("link");return t.setAttribute("href",e.src),"script"!=e.type&&"module"!=e.type||t.setAttribute("as","script"),t.setAttribute("rel","preload"),t.setAttribute("data-requested-with","LABjs"),document.head.appendChild(t),e.preloadRequested=!0,t}function loadResource(e){if("script"==e.type||"module"==e.type){var t=document.createElement("script");t.setAttribute("src",e.src),t.setAttribute("data-requested-with","LABjs"),t.async=!1,"module"==e.type&&t.setAttribute("type","module")}return e.opts,document.head.appendChild(t),e.loadRequested=!0,t}function throwGlobalError(e){setTimeout(function globalError(){throw e},0)}function assign(e,t){for(var r in t)e[r]=t[r];return e}function canonicalURL(e,t){var r=/^[\w\-]+:\/\/\/?/;return/^\/\/\/?/.test(e)?e=location.protocol+e:r.test(e)||"/"==e[0]||(e=(t||"")+e),r.test(e)||(e="/"==e[0]?d+e:l+e),e}function createSandbox(){function noConflict(){return t.$LAB=r,l}function setGlobalDefaults(e){return n=assign(n,e),l}function setOptions(){return createChainInstance().setOptions.apply(null,arguments)}function script(){return createChainInstance().script.apply(null,arguments)}function wait(){return createChainInstance().wait.apply(null,arguments)}function createGroupEntry(e){this.isGroup=!0,this.resources=[],this.ready=!1,this.complete=!1,this.check=e||function(){}}function createRegistryEntry(e,t){this.type=e,this.src=t,this.listeners=[],this.preloadRequested=!1,this.preloaded=!1,this.loadRequested=!1,this.complete=!1,this.opts=null}function registerResource(t){t.src in e||(e[t.src]=new createRegistryEntry(t.type,t.src));var r=e[t.src];return r.type||(r.type=t.type),r.opts||(r.opts=t.opts),~r.listeners.indexOf(t)||r.listeners.push(t),r}function notifyRegistryListeners(e){for(var t=[],r=0;r<e.listeners.length;r++)~t.indexOf(e.listeners[r].group)||t.push(e.listeners[r].group);for(var r=0;r<t.length;r++)t[r].check()}function createChainInstance(){function setOptions(e){return r=assign(r,e),a}function script(){for(var e=0;e<arguments.length;e++)addChainResource("script",arguments[e]);return scheduleChainCheck(),a}function wait(){if(arguments.length>0)for(var e=0;e<arguments.length;e++)addChainWait(arguments[e]);else addChainWait(!0);return scheduleChainCheck(),a}function addChainResource(e,t){if(0==s.length||!s[s.length-1].isGroup||s[s.length-1].complete||!p&&!f||r[i]&&!f){var n=new createGroupEntry(scheduleChainCheck);s.push(n)}var o=s[s.length-1];o.complete=!1,t="string"==typeof t?{type:e,src:canonicalURL(t,r[u]),group:o}:{type:e,src:canonicalURL(t.src,r[u]),opts:t,group:o},o.resources.push(t);var a=registerResource(t);if(p&&!a.preloadRequested){var c=preloadResource(a);c.addEventListener("load",function resourcePreloaded(){c.removeEventListener("load",resourcePreloaded),c.parentNode.removeChild(c),a.preloaded=!0,notifyRegistryListeners(a)})}}function addChainWait(e){if(0==s.length){var t=new createGroupEntry;t.ready=t.complete=!0,s.push(t)}s.push({wait:e})}function scheduleChainCheck(){null==t&&(t=setTimeout(advanceChain,0))}function advanceChain(){t=null;for(var e=0;e<s.length;e++)if(!s[e].complete)if(s[e].isGroup){if(checkGroupStatus(s[e]),!s[e].complete)break}else if("function"==typeof s[e].wait)try{s[e].wait(),s[e].complete=!0}catch(e){r[c]?throwGlobalError(e):o(e);break}else s[e].complete=!0}function checkGroupStatus(t){if(!t.ready&&!t.complete)if(p){for(var r=!0,n=0;n<t.resources.length;n++)if(!e[t.resources[n].src].preloaded){r=!1;break}t.ready=r}else t.ready=!0;if(!t.complete&&t.ready){for(var o=!0,n=0;n<t.resources.length;n++)!function loopScope(t){var r=e[t.src];if(r.loadRequested){if(r.complete)return;o=!1,~r.listeners.indexOf(t)||r.listeners.push(t)}else{var n=loadResource(r);n.addEventListener("load",function resourceLoaded(){n.removeEventListener("load",resourceLoaded),r.complete=!0,notifyRegistryListeners(r)}),o=!1}}(t.resources[n]);o&&(t.complete=!0)}}var t,r=assign({},n),s=[],a={setOptions:setOptions,script:script,wait:wait};return a}var e={},n={};n[i]=!1,n[a]=!1,n[c]=!1,n[u]="",h&&function registerMarkupLinks(){for(var r=0;r<s.length;r++)!function loopScope(r){if(r&&/\bpreload\b/i.test(r.getAttribute("rel"))){if(!r.getAttribute("as"))return;var n=r.getAttribute("href");n=canonicalURL(n,document.baseURI);var o=t.performance.getEntriesByName(n);if(n in e)return;var s=new createRegistryEntry(null,n);s.preloadRequested=!0,e[n]=s,o.length>0?s.preloaded=!0:r.addEventListener("load",function resourcePreloaded(){r.removeEventListener("load",resourcePreloaded),s.preloaded=!0,notifyRegistryListeners(s)})}}(s[r])}();var l={setGlobalDefaults:setGlobalDefaults,setOptions:setOptions,script:script,wait:wait,sandbox:createSandbox,noConflict:noConflict};return l}var r=t.$LAB,n=function NOOP(){},o=n;t.console&&t.console.log&&(t.console.error||(t.console.error=t.console.log),n=function logMsg(e){t.console.log(e)},o=function logError(e,r){t.console.error(e,r)});var s=document.getElementsByTagName("link"),i="AlwaysPreserveOrder",a="CacheBust",c="Debug",u="BasePath",l=/^[^?#]*\//.exec(location.href)[0],d=/^[\w\-]+\:\/\/\/?[^\/]+/.exec(l)[0],p=(document.head,function featureTest(){var e=document.createElement("link").relList;try{if(e&&e.supports)return e.supports("preload")}catch(e){}return!1}()),f=!0===document.createElement("script").async,h=t.performance&&t.performance.getEntriesByName;return createSandbox()});