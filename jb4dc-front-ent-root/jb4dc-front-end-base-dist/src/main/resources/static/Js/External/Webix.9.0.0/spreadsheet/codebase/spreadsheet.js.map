{"version":3,"file":"spreadsheet.js","sources":["../sources/locale.js","../sources/locales/en.js","../sources/views/align.js","../sources/views/border.js","../sources/views/color.js","../node_modules/@xbs/muon/dist/muon.js","../sources/mathematics/methods.js","../sources/views/date.js","../sources/views/dialog.js","../sources/views/form.js","../sources/views/formlate.js","../sources/views/icons.js","../sources/views/list_suggest.js","../sources/operations/undo_group.js","../sources/operations/save.js","../sources/helpers/column_names.js","../sources/toolbar/defaults.js","../sources/operations/styles.js","../sources/operations/formats.js","../sources/mathematics/parser.js","../sources/operations/types.js","../sources/views/suggest_formula.js","../sources/views/button.js","../sources/views/live_editor.js","../sources/views/separator.js","../sources/views/sheets.js","../sources/views/toggle.js","../sources/views/toolbar_title.js","../sources/views/multicheckbox.js","../sources/views/formlist.js","../sources/views/ui.js","../sources/views/series.js","../sources/editors/date.js","../sources/editors/richselect.js","../sources/toolbar/actions.js","../sources/toolbar/buttons.js","../sources/toolbar/all_elements.js","../sources/toolbar.js","../sources/toolbar/helpers.js","../sources/operations/column_operations.js","../sources/operations/lock_cell.js","../sources/operations/spans.js","../sources/helpers/conditional.js","../sources/operations/conditional_formats.js","../sources/table.js","../sources/hotkeys.js","../sources/editor.js","../sources/helpers/array.js","../sources/operations/data.js","../sources/sheets.js","../sources/dialogs/common.js","../sources/mathematics/writer.js","../sources/dialogs/imagecell.js","../sources/dialogs/imagetop.js","../sources/dialogs/sparkline.js","../sources/dialogs/ranges.js","../sources/dialogs/dropdown.js","../sources/mathematics/ranges.js","../sources/operations/filter.js","../sources/dialogs/filter.js","../sources/dialogs/format.js","../sources/dialogs/conditional.js","../sources/dialogs/export.js","../sources/dialogs/link.js","../sources/dialogs/print.js","../sources/dialogs/comments.js","../sources/dialogs/sizing.js","../sources/dialogs/index.js","../sources/operations/undo.js","../sources/operations/views.js","../sources/chart.js","../sources/operations/add_row_col.js","../sources/operations/dropdown.js","../sources/operations/clipboard.js","../sources/operations/hide_row_col.js","../sources/operations/resize.js","../sources/operations/selection.js","../sources/helpers/expand_selection.js","../sources/operations/sorting.js","../sources/mathematics/sheets.js","../sources/operations/hide_gridlines.js","../sources/operations/hide_headers.js","../sources/operations/comments.js","../sources/operations/states.js","../sources/operations/import.js","../sources/operations/print.js","../sources/operations/export.js","../sources/operations/load.js","../sources/operations/clear_styles.js","../sources/api/row_col_operations.js","../sources/api/lock_cell.js","../sources/api/freeze.js","../sources/api/hide_gridlines.js","../sources/api/hide_headers.js","../sources/api/hide_rows.js","../sources/api/math.js","../sources/api/operations.js","../sources/api/core.js","../sources/api/save.js","../sources/api/dropdown.js","../sources/api/filter.js","../sources/api/confirm.js","../sources/api/undo.js","../sources/api/number_formats.js","../sources/menu.js","../sources/spreadsheet.js","../sources/context.js","../sources/operations/index.js","../sources/api/index.js"],"sourcesContent":["import en from \"./locales/en\";\nwebix.i18n.spreadsheet = en;","export default {\n\tlabels:{\n\t\t// formats\n\t\t\"common\": \"Common\",\n\t\t\"currency\": \"Currency\",\n\t\t\"number\": \"Number\",\n\t\t\"percent\": \"Percent\",\n\t\t\"date\": \"Date\",\n\t\t\"string\": \"Text\",\n\t\t\"custom-format\": \"Custom\",\n\t\t\"decimal-places\":\"Decimal places\",\n\t\t\"separator\":\"Group separator\",\n\t\t\"negative\":\"Negative number\",\n\t\t\"currency-symbol\":\"Сurrency\",\n\t\t\"date-format\":\"Date format\",\n\t\t\"format-docs\":\"How to create a format\",\n\t\t// titles\n\t\t\"undo-redo\": \"Undo/Redo\",\n\t\t\"font\": \"Font\",\n\t\t\"text\": \"Text\",\n\t\t\"cell\": \"Cell\",\n\t\t\"align\": \"Align\",\n\t\t\"format\": \"Number\",\n\t\t\"column\": \"Column\",\n\t\t\"borders\": \"Borders\",\n\t\t\"px\": \"px\",\n\t\t\"apply\": \"Apply\",\n\t\t// popups and dialogs\n\t\t\"cancel\": \"Cancel\",\n\t\t\"save\": \"Save\",\n\t\t// multisheets\n\t\t\"sheet\": \"Sheet\",\n\t\t// conditions\n\t\t\"conditional-format\": \"Conditional Format\",\n\t\t\"condition\": \"Condition\",\n\t\t\"conditional-style\": \"Style\",\n\t\t\"conditional-operator\": \"Operator\",\n\t\t\"conditional-between\":\"between\",\n\t\t\"conditional-not-equal\":\"not equal\",\n\t\t// ranges\n\t\t\"range\": \"Range\",\n\t\t\"range-title\": \"Named ranges\",\n\t\t\"range-name\": \"Name\",\n\t\t\"range-cells\": \"Range\",\n\t\t\"range-scope\": \"Scope\",\n\t\t\"range-global\": \"Book\",\n\t\t// images\n\t\t\"image-or\": \"or\",\n\t\t\"image-title\": \"Add image\",\n\t\t\"image-upload\": \"Select file for upload\",\n\t\t\"image-url\": \"URL (e.g. http://*)\",\n\t\t// sparklines\n\t\t\"sparkline-title\": \"Add sparkline\",\n\t\t\"sparkline-type\": \"Type\",\n\t\t\"sparkline-range\": \"Range\",\n\t\t\"sparkline-color\": \"Color\",\n\t\t\"sparkline-positive\": \"Positive\",\n\t\t\"sparkline-negative\": \"Negative\",\n\t\t// custom format\n\t\t\"format-title\": \"Set format\",\n\t\t\"format-pattern\": \"Format pattern\",\n\t\t//dropdown\n\t\t\"dropdown-empty\": \"Empty cells\",\n\t\t\"dropdown-title\": \"Add dropdown\",\n\t\t\"dropdown-range\": \"Range\",\n\t\t// confirm\n\t\t\"ok\": \"OK\",\n\t\t// import/export\n\t\t\"import-title\": \"Import\",\n\t\t\"import-not-support\": \"Sorry, your browser does not support import\",\n\t\t\"export-title\": \"Export\",\n\t\t\"export-name\": \"Name of xslx file\",\n\t\t\"export-all-sheets\":\"Export all sheets\",\n\t\t// add link\n\t\t\"link-title\": \"Add Link\",\n\t\t\"link-name\": \"Text\",\n\t\t\"link-url\": \"URL\",\n\t\t//images\n\t\t\"image\": \"Image\",\n\t\t\"add-image-cell\":\"Add to cell\",\n\t\t\"add-image-top\":\"Add above cells\",\n\t\t//charts\n\t\t\"graph\": \"Graph\",\n\t\t\"add-sparkline\":\"Add to cell\",\n\t\t\"add-chart\":\"Add above cells\",\n\t\t//conditional format labels\n\t\t\"display\" : \"Display\",\n\t\t\"value\" : \"Value\",\n\t\t// confirm messages\n\t\t\"range-remove-confirm\": \"Are you sure you want to remove the range permanently?\",\n\t\t\"sheet-remove-confirm\": \"Are you sure you want to remove the sheet permanently?\",\n\t\t\"merge-cell-confirm\":\"Only the left top value will remain after merging. Continue?\",\n\t\t\"error-range\": \"The range is incorrect!\",\n\t\t//print\n\t\t\"print\":\"Print\",\n\t\t\"print-title\":\"Before you print..\",\n\t\t\"print-settings\":\"General settings\",\n\t\t\"print-paper\":\"Paper size\",\n\t\t\"print-layout\":\"Layout\",\n\t\t\"current-sheet\":\"Current sheet\",\n\t\t\"all-sheets\":\"All sheets\",\n\t\t\"selection\":\"Selected cells\",\n\t\t\"borderless\":\"Hide gridlines\",\n\t\t\"sheet-names\":\"Show sheet names\",\n\t\t\"skip-rows\":\"Skip empty rows\",\n\t\t\"margin\":\"Hide margins\",\n\t\t\"page-letter\":\"Letter\",\n\t\t\"page-a4\":\"A4 (210x297mm)\",\n\t\t\"page-a3\":\"A3 (297x420mm)\",\n\t\t\"page-width\":\"Page width\",\n\t\t\"page-actual\":\"Actual Size\",\n\t\t\"page-portrait\":\"Portrait\",\n\t\t\"page-landscape\":\"Landscape\",\n\t\t//comment\n\t\t\"comment\":\"Comment\",\n\t\t//resize\n\t\t\"width\":\"Width\",\n\t\t\"height\":\"Height\",\n\t\t\"fit-content\": \"Fit to content\",\n\t\t\"default-size\":\"Reset to default\",\n\t\t//views\n\t\t\"edit-view\":\"Edit\",\n\t\t\"remove-view\":\"Remove\",\n\t\t\"chart-edit\":\"Edit chart\",\n\n\t\t\"chart-common\":\"Common\",\n\t\t\"chart-series\":\"Series\",\n\t\t\"chart-extras\":\"Extras\",\n\n\t\t\"export-view\":\"Download\",\n\t\t\"export-view-pdf\":\"PDF document\",\n\t\t\"export-view-png\":\"PNG image\",\n\t\t\"export-view-excel\":\"Excel file\",\n\n\t\t\"line-chart\":\"Line\",\n\t\t\"area-chart\":\"Area\",\n\t\t\"bar-chart\":\"Bar\",\n\t\t\"donut-chart\":\"Donut\",\n\t\t\"pie-chart\":\"Pie\",\n\t\t\"radar-chart\":\"Radar\",\n\t\t\"spline-chart\":\"Spline\",\n\t\t\"splinearea-chart\":\"Spline Area\",\n\n\t\t\"chart-scale\":\"Scale\",\n\t\t\"chart-x-axis\":\"X axis\",\n\t\t\"chart-y-axis\":\"Y axis\",\n\t\t\"chart-lines\":\"Lines\",\n\t\t\"chart-scale-color\":\"Scale color\",\n\t\t\"chart-xAxis-title\":\"Title\",\n\t\t\"chart-yAxis-title\":\"Title\",\n\t\t\"chart-col-xAxis\":\"Use left column as xAxis\",\n\t\t\"chart-row-xAxis\":\"Use top row as xAxis\",\n\t\t\"chart-xAxis-range\":\"Range\",\n\t\t\"chart-yAxis-origin\":\"Origin\",\n\t\t\"chart-yAxis-start\":\"Start\",\n\t\t\"chart-yAxis-end\":\"End\",\n\t\t\"chart-yAxis-step\":\"Step\",\n\t\t\"chart-yAxis-note\":\"* Set all the following parameters to see the effect\",\n\n\t\t\"chart-legend\":\"Legend\",\n\t\t\"chart-row-legend\":\"Use top row as legend\",\n\t\t\"chart-col-legend\":\"Use left column as legend\",\n\t\t\"chart-legend-range\":\"Legend range\",\n\t\t\"chart-legend-align\":\"Align\",\n\t\t\"chart-legend-left\":\"Left\",\n\t\t\"chart-legend-right\":\"Right\",\n\t\t\"chart-legend-center\":\"Center\",\n\t\t\"chart-legend-valign\":\"Vertical align\",\n\t\t\"chart-legend-top\":\"Top\",\n\t\t\"chart-legend-middle\":\"Middle\",\n\t\t\"chart-legend-bottom\":\"Bottom\",\n\n\t\t\"chart-item\":\"Data\",\n\t\t\"stacked-chart\":\"Stacked\",\n\t\t\"chart-range\":\"Range\",\n\t\t\"chart-series-color\":\"Color\",\n\t\t\"add-line\":\"Add line\",\n\t\t\"chart-type\":\"Type\",\n\t\t\"chart-tooltip\":\"Tooltips\",\n\t\t\"chart-label\":\"Labels\",\n\n\t\t\"chart-data-from\":\"Data series from\",\n\t\t\"chart-columns\":\"columns\",\n\t\t\"chart-rows\":\"rows\",\n\n\t\t\"chart-markers\":\"Markers\",\n\t\t\"chart-markers-square\":\"Square\",\n\t\t\"chart-markers-triangle\":\"Triangle\",\n\t\t\"chart-markers-diamond\":\"Diamond\",\n\t\t\"chart-markers-round\":\"Round\",\n\n\t\t\"chart-pie-text\":\"Show values inside\",\n\t\t\"chart-pie-3d\":\"3D\",\n\n\t\t\"chart-radar-circle\":\"Circled lines\"\n\t},\n\ttooltips: {\n\t\t\"color\": \"Font color\",\n\t\t\"background\": \"Background color\",\n\t\t\"font-family\": \"Font family\",\n\t\t\"font-size\": \"Font size\",\n\t\t\"text-align\": \"Horizontal align\",\n\t\t\"vertical-align\": \"Vertical align\",\n\t\t\"borders\": \"Borders\",\n\t\t\"borders-no\": \"Clear borders\",\n\t\t\"borders-left\": \"Left border\",\n\t\t\"borders-top\": \"Top border\",\n\t\t\"borders-right\": \"Right border\",\n\t\t\"borders-bottom\": \"Bottom border\",\n\t\t\"borders-all\": \"All borders\",\n\t\t\"borders-outer\": \"Outer borders\",\n\t\t\"borders-top-bottom\": \"Top and bottom borders\",\n\t\t\"borders-color\": \"Border color\",\n\t\t\"align-left\": \"Left align\",\n\t\t\"align-center\": \"Center align\",\n\t\t\"align-right\": \"Right align\",\n\t\t\"align-top\": \"Top align\",\n\t\t\"align-middle\": \"Middle align\",\n\t\t\"align-bottom\": \"Bottom align\",\n\t\t\"span\": \"Merge\",\n\t\t\"wrap\": \"Text wrap\",\n\t\t\"undo\": \"Undo\",\n\t\t\"redo\": \"Redo\",\n\t\t\"format\": \"Number format\",\n\t\t\"increase-decimals\":\"Increase decimal places\",\n\t\t\"decrease-decimals\":\"Decrease decimal places\",\n\t\t\"font-weight\": \"Bold\",\n\t\t\"font-style\": \"Italic\",\n\t\t\"text-decoration\": \"Underline\",\n\t\t\"hide-gridlines\": \"Hide/show gridlines\",\n\t\t\"hide-headers\": \"Hide/show headers\",\n\t\t\"create-filter\": \"Create/remove filters\",\n\t\t\"freeze-columns\" : \"Freeze/unfreeze columns\",\n\t\t\"add-range\": \"Set name for the selected range\",\n\t\t\"conditional\": \"Conditional formatting\",\n\t\t\"add-sheet\": \"Add Sheet\",\n\t\t\"lock-cell\": \"Lock/unlock cell\",\n\t\t\"clear\": \"Clear\",\n\t\t\"add-link\": \"Add link\",\n\t\t\"row\": \"Rows\",\n\t\t\"column\": \"Columns\",\n\t\t\"sheet\": \"Sheet\",\n\t\t\"add-image\": \"Image\",\n\t\t\"add-sparkline\": \"Graph\",\n\t\t\"add-comment\": \"Comment\"\n\t},\n\tmenus:{\n\t\t\"remove-sheet\": \"Remove sheet\",\n\t\t\"rename-sheet\": \"Rename sheet\",\n\t\t\"file\": \"File\",\n\t\t\"new\": \"New\",\n\t\t\"new-sheet\": \"New sheet\",\n\t\t\"excel-import\": \"Import from Excel\",\n\t\t\"excel-export\": \"Export to Excel\",\n\t\t\"sheet\": \"Sheets\",\n\t\t\"copy-sheet\": \"Copy to new sheet\",\n\t\t\"edit\": \"Edit\",\n\t\t\"undo\": \"Undo\",\n\t\t\"redo\": \"Redo\",\n\t\t\"columns\": \"Columns\",\n\t\t\"insert-column\": \"Insert column\",\n\t\t\"delete-column\": \"Delete column\",\n\t\t\"show-column\": \"Show column\",\n\t\t\"hide-column\": \"Hide column\",\n\t\t\"resize-column\": \"Resize column\",\n\t\t\"rows\": \"Rows\",\n\t\t\"insert-row\": \"Insert row\",\n\t\t\"delete-row\": \"Delete row\",\n\t\t\"show-row\": \"Show row\",\n\t\t\"hide-row\": \"Hide row\",\n\t\t\"resize-row\": \"Resize row\",\n\t\t\"insert\": \"Insert\",\n\t\t\"conditional-format\": \"Conditional format\",\n\t\t\"common\": \"common\",\n\t\t\"text\": \"text\",\n\t\t\"clear\": \"Clear\",\n\t\t\"clear-value\":\"Values\",\n\t\t\"clear-style\":\"Styles\",\n\t\t\"clear-conditional-formats\":\"Conditional formats\",\n\t\t\"clear-dropdown-editors\":\"Dropdowns and filters\",\n\t\t\"clear-comments\":\"Comments\",\n\t\t\"clear-all\":\"All\",\n\t\t\"image\": \"Image\",\n\t\t\"add-image-cell\":\"Add to cell\",\n\t\t\"add-image-top\":\"Add above cells\",\n\t\t\"graph\": \"Graph\",\n\t\t\"add-sparkline\":\"Add to cell\",\n\t\t\"add-chart\":\"Add above cells\",\n\t\t\"data\": \"Data\",\n\t\t\"add-link\": \"Add link\",\n\t\t\"add-range\": \"Named ranges\",\n\t\t\"sort\": \"Sort\",\n\t\t\"sort-asc\": \"Sort A to Z\",\n\t\t\"sort-desc\": \"Sort Z to A\",\n\t\t\"view\": \"View\",\n\t\t\"freeze-columns\": \"Freeze/unfreeze columns\",\n\t\t\"freeze-rows\": \"Freeze/unfreeze rows\",\n\t\t\"hide-gridlines\": \"Hide/show gridlines\",\n\t\t\"hide-headers\": \"Hide/show headers\",\n\t\t\"create-filter\": \"Create/remove filters\",\n\t\t\"add-dropdown\": \"Add dropdown\",\n\t\t\"lock-cell\": \"Lock/unlock cell\",\n\t\t\"print\": \"Print\",\n\t\t\"add-comment\":\"Comment\"\n\t},\n\ttable:{\n\t\t\"math-error\":\"#ERROR!\",\n\t\t\"math-ref-error\":\"#REF!\",\n\t\t\"format-error\":\"INCORRECT FORMAT\"\n\t},\n\tliveEditor:{\n\t\t\"edit\":\"Edit:\"\n\t},\n\tformats:{\n\t\t\"dateFormat\": \"mm/dd/yyyy\",\n\t\t\"timeFormat\": \"hh:mm AM/PM\",\n\t\t\"longDateFormat\": \"dd mmmm yyyy\",\n\t\t\"fullDateFormat\": \"mm/dd/yyyy hh:mm AM/PM\",\n\t\t\"parseDateTime\": \"%m/%d/%Y %G:%i:%s\",\n\t\t\"parseDate\": \"%m/%d/%Y\",\n\t\t\"currencies\": [\n\t\t\t\"{obj} €\",\n\t\t\t\"¥{obj}\",\n\t\t\t\"R$ {obj}\",\n\t\t\t\"{obj} rub.\"\n\t\t]\n\t}\n};\n","webix.protoUI({\n\tname: \"ssheet-align\",\n\t$cssName:\"richselect\",\n\t$init: function(config){\n\t\tconfig.options =  {\n\t\t\tview:\"datasuggest\",\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-icons\",\n\t\t\t\ttooltip: {\n\t\t\t\t\ttemplate:\"#tooltip#\"\n\t\t\t\t},\n\t\t\t\txCount:3, yCount:1\n\t\t\t},\n\t\t\tdata: config.data\n\t\t};\n\t}\n},webix.ui.richselect);","webix.protoUI({\n\tname: \"ssheet-borders-suggest\",\n\tdefaults:{\n\t\twidth: 300\n\t},\n\t$init: function(config){\n\t\tconfig.body = {\n\t\t\tmargin: 6,\n\t\t\tcols:[\n\t\t\t\t{ view: \"ssheet-icons\", scroll: false, select: true,\n\t\t\t\t\txCount: 4,\n\t\t\t\t\tyCount: 2,\n\t\t\t\t\ttooltip: {\n\t\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\t\treturn webix.i18n.spreadsheet.tooltips[\"borders-\"+obj.id];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonAfterSelect: function(){\n\t\t\t\t\t\t\tvar suggest = this.getParentView().getParentView();\n\t\t\t\t\t\t\tsuggest.updateMasterValue(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\tvar css = \"webix_ssheet_button_icon webix_ssheet_icon ssi-borders-\"+obj.value;\n\t\t\t\t\t\treturn \"<span class='\"+css+\"'></span>\";\n\t\t\t\t\t},\n\t\t\t\t\tdata: config.data\n\t\t\t\t},\n\t\t\t\t{ view: \"ssheet-separator\"},\n\t\t\t\t{\n\t\t\t\t\trows:[\n\t\t\t\t\t\t{ view: \"ssheet-color\", css: config.css, name: config.name, width: 68,\n\t\t\t\t\t\t\tvalue: webix.skin.$name == \"contrast\" ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"borders-color\"],\n\t\t\t\t\t\t\ttitle: \"<span class='webix_icon wxi-pencil'></span>\",\n\t\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\t\tonChange: function(){\n\t\t\t\t\t\t\t\t\tvar suggest = this.getParentView().getParentView().getParentView();\n\t\t\t\t\t\t\t\t\tsuggest.updateMasterValue(false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"richselect\", css:\"webix_ssheet_border_type\", value:\"thin\", suggest:{\n\t\t\t\t\t\t\t\tfitMaster:false,\n\t\t\t\t\t\t\t\twidth:130,\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_suggest\",\n\t\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\t\ttemplate:\"<div class='webix_ssheet_border webix_ssheet_border_#id#'></div>\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdata:[\n\t\t\t\t\t\t\t\t\t{ id:\"thin\" },\n\t\t\t\t\t\t\t\t\t{ id:\"medium\" },\n\t\t\t\t\t\t\t\t\t{ id:\"thick\" },\n\t\t\t\t\t\t\t\t\t{ id:\"dashed\" }, \n\t\t\t\t\t\t\t\t\t{ id:\"dotted\" },\n\t\t\t\t\t\t\t\t\t{ id:\"double\" }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ }\n\t\t\t\t\t]\n\t\t\t\t}\n\n\t\t\t]\n\t\t};\n\t},\n\tupdateMasterValue: function(hide){\n\t\tvar value = this.getValue();\n\t\tvar master = webix.$$(this.config.master);\n\t\tmaster.setValue(value);\n\t\tif(hide)\n\t\t\tthis.hide();\n\t},\n\tsetValue: function(value){\n\t\tif(value[0])\n\t\t\tthis.getList().select(value[0]);\n\t\tif(value[1])\n\t\t\tthis.getColorView().setValue(value[1]);\n\t\tif(value[2])\n\t\t\tthis.getTypeView().setValue(value[2]);\n\t},\n\tgetValue: function(){\n\t\treturn [this.getList().getSelectedId(), this.getColorView().getValue()||\"\", this.getTypeView().getValue()||\"\"];\n\t},\n\tgetList: function(){\n\t\treturn this.getBody().getChildViews()[0];\n\t},\n\tgetColorView: function(){\n\t\treturn this.getBody().getChildViews()[2].getChildViews()[0];\n\t},\n\tgetTypeView: function(){\n\t\treturn this.getBody().getChildViews()[2].getChildViews()[1];\n\t},\n\tgetItemText:function(){\n\t\treturn \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-borders-all'>\";\n\t}\n},webix.ui.suggest);\n\nwebix.protoUI({\n\tname: \"ssheet-borders\",\n\t$cssName: \"richselect\",\n\t$init: function(config){\n\t\tconfig.options = {\n\t\t\tview: \"ssheet-borders-suggest\",\n\t\t\tfitMaster: false,\n\t\t\tdata: config.data\n\t\t};\n\n\t\tthis.$ready.push(webix.bind(function(){\n\t\t\tthis.getPopup().config.master = this.config.id;\n\t\t},this));\n\n\t},\n\tsetValue: function(value){\n\t\tif(webix.isArray(value)){\n\t\t\tif(!this.config.value || value[0] !=  this.config.value[0] || value[1] !=  this.config.value[1]){\n\t\t\t\tthis.getPopup().setValue(value);\n\t\t\t}\n\t\t\tthis.config.value = value;\n\t\t\tif (value[0])\n\t\t\t\tthis.callEvent(\"onChange\");\n\t\t}\n\t\treturn value;\n\t},\n\tgetValue: function(){\n\t\treturn  this.getPopup().getValue().join(\",\");\n\t},\n\tgetList: function(){\n\t\treturn this.getPopup().getBody().getChildViews()[0];\n\t},\n\tgetColorView: function(){\n\t\treturn this.getPopup().getBody().getChildViews()[1].getChildViews()[0];\n\t}\n},webix.ui.richselect);","// toolbar: color selector\nwebix.protoUI({\n\t$cssName: \"colorboard\",\n\tname: \"ssheet-colorboard\",\n\tdefaults:{\n\t\theight:202,\n\t\twidth:220,\n\t\tcss: \"webix_ssheet_colorboard\",\n\t\ttype:\"classic\",\n\t\tpalette: [\n\t\t\t[\"#000000\", \"#434343\", \"#666666\", \"#999999\", \"#b7b7b7\", \"#cccccc\", \"#d9d9d9\", \"#efefef\", \"#f3f3f3\", \"#ffffff\"],\n\t\t\t[\"#980000\", \"#ff0000\", \"#ff9900\", \"#ffff00\", \"#00ff00\", \"#00ffff\", \"#4a86e8\", \"#0000ff\", \"#9900ff\", \"#ff00ff\"],\n\t\t\t[\"#e6b8af\", \"#f4cccc\", \"#fce5cd\", \"#fff2cc\", \"#d9ead3\", \"#d0e0e3\", \"#c9daf8\", \"#cfe2f3\", \"#d9d2e9\", \"#ead1dc\"],\n\t\t\t[\"#dd7e6b\", \"#ea9999\", \"#f9cb9c\", \"#ffe599\", \"#b6d7a8\", \"#a2c4c9\", \"#a4c2f4\", \"#9fc5e8\", \"#b4a7d6\", \"#d5a6bd\"],\n\t\t\t[\"#cc4125\", \"#e06666\", \"#f6b26b\", \"#ffd966\", \"#93c47d\", \"#76a5af\", \"#6d9eeb\", \"#6fa8dc\", \"#8e7cc3\", \"#c27ba0\"],\n\t\t\t[\"#a61c00\", \"#cc0000\", \"#e69138\", \"#f1c232\", \"#6aa84f\", \"#45818e\", \"#3c78d8\", \"#3d85c6\", \"#674ea7\", \"#a64d79\"],\n\t\t\t[\"#85200c\", \"#990000\", \"#b45f06\", \"#bf9000\", \"#38761d\", \"#134f5c\", \"#1155cc\", \"#0b5394\", \"#351c75\", \"#741b47\"],\n\t\t\t[\"#5b0f00\", \"#660000\", \"#783f04\", \"#7f6000\", \"#274e13\", \"#0c343d\", \"#1c4587\", \"#073763\", \"#20124d\", \"#4c1130\"]\n\t\t]\n\t},\n\t$init:function(){\n\t\tthis.attachEvent(\"onSelect\", function(value){\n\t\t\tthis.getParentView().setMasterValue({ value:value });\n\t\t});\n\t}\n}, webix.ui.colorboard);\n\nwebix.protoUI({\n\t$cssName: \"richselect\",\n\tname: \"ssheet-color\",\n\tdefaults:{\n\t\tcss: \"webix_ssheet_color\",\n\t\ticon: \"wxi-menu-down\",\n\t\tsuggest:{\n\t\t\tborderless: true,\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-colorboard\"\n\t\t\t}\n\t\t}\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_color\";\n\t},\n\t$renderInput: function(config, divStart, id){\n\t\tvar color  = this.renderColor.call(this);\n\t\tdivStart = divStart.replace(/([^>]>)(.*)(<\\/div)/, function(match, p1, p2, p3){\n\t\t\treturn p1+config.title +color+p3;\n\t\t});\n\n\t\treturn webix.ui.colorpicker.prototype.$renderInput.call(this,config, divStart, id);\n\t},\n\t$setValue: function(value){\n\t\tvar popup =  webix.$$(this.config.popup.toString());\n\t\tvar colorboard = popup.getBody();\n\t\tvalue = value || \"\";\n\t\tcolorboard.setValue(value);\n\t\tthis.config.value = value;\n\t\tthis.getColorNode().style.backgroundColor = value;\n\t},\n\trenderColor: function(){\n\t\treturn \"<div class='webix_ssheet_cp_color' style='background-color:\"+this.config.value+\";'> </div>\";\n\t},\n\tgetColorNode: function(){\n\t\treturn this.$view.firstChild.firstChild.childNodes[1];\n\t},\n\t$renderIcon:function(){\n\t\treturn webix.ui.text.prototype.$renderIcon.apply(this,arguments);\n\t}\n},webix.ui.colorpicker);","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var t,e={1:\"#ERROR\",2:\"#ERROR\",3:\"#REF!\"},r=function(){return(r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function n(t,e,r){return r+64*e+64*t*4096}function o(t){return[t<2147483648?t>>18:t/262144&16777215,t>>6&4095,63&t]}function a(t){return t<2147483648?t>>18:t/262144&16777215}function i(t){return 63&t}function u(t,e,r){for(var n=o(t),a=n[0],i=n[1],u=o(e),f=u[0]-a,s=u[1]-i,h=0;h<=f;h++)for(var c=0;c<=s;c++)r(t+64*c+4096*h*64)}function f(t,e){for(var r,n,a,u,f,h,c,p,g=t.code,v=t.source,l=\"\",d=g.length,_=0;_<d;_+=3){switch(g[_]){case 5:var b=void 0;9===g[_+6]&&(b=e.pageName(i(g[_+7]))),l+=(-1!==(p=b||t.source.substr(g[_+1],g[_+2])).indexOf(\" \")?\"'\"+p+\"'\":p)+\"!\";break;case 7:l+=s(u=(r=o(g[_+4]))[0],h=r[1],g[_+5]);break;case 4:l+=v.substr(g[_+1],g[_+2]).toUpperCase();break;case 8:u=(n=o(g[_+4]))[0],h=n[1],f=(a=o(g[_+7]))[0],c=a[1],l+=s(u,h,g[_+5]),l+=\":\",l+=s(f,c,g[_+8]);break;case 9:break;case 2:l+=\"{{\"+v.substr(g[_+1],g[_+2])+\"}}\";break;case 3:l+=\"#REF!\";break;case 1:l+='\"'+v.substr(g[_+1],g[_+2])+'\"';break;default:l+=v.substr(g[_+1],g[_+2])}}return l}function s(t,e,r){var n=\"\";2&r&&(n+=\"$\");var o=\"\";for(e+=1;e>0;){var a=e%26;0===a&&(a=26),o=String.fromCharCode(64+a)+o,e=(e-a)/26}return n+=o,1&r&&(n+=\"$\"),n+=t+1}function h(t){return t<=122}function c(t){return t<=122?t>=65||35===t||36===t:t>191}function p(t){return t>=97}function g(t){var e=t.charCodeAt(0);return e>=48&&e<=57}function v(t,e){var r;do{e++,r=t.charCodeAt(e)}while(r>=48&&r<=57);return e}function l(t){return\" \"===t||\"\\t\"===t||\"\\n\"===t||\"\\r\"===t}function d(t,e){var r;do{r=t[++e]}while(l(r));return e}function _(t,e){if(\"<\"===t[e]){var r=t[e+1];\">\"!==r&&\"=\"!==r||e++}else\">\"===t[e]&&\"=\"===t[e+1]&&e++;return e+1}function b(e,r,n){for(var o=e.length,a=!0,i=r,u=!1,f=!1,s=!1,v=0;i<o;i++){var l=e[i];if(\"'\"!==l){if(!u){s=!0;var d=l.charCodeAt(0);if(c(d)){h(d)?p(d)&&(f=!0):a=!1,1==v&&v++;continue}if(g(l)){0==v&&v++;continue}break}}else{if(s)break;if(u){i++;break}u=!0}}var _=e[i],b=r,y=i-r;return u&&((y-=1+(\"'\"===e[i-1]?1:0))<0&&(y=0),b++,n=5),0===n&&(\":\"===_&&a?(n=8,f&&(t=!0)):\"!\"===_?n=\"#\"===e[b]?3:5:\"(\"===_?(function(t,e,r){var n=t.substr(e,r);return n.toUpperCase()!==n}(e,b,y)&&(t=!0),n=4):\"}\"===_?n=2:1===v&&a?(n=7,f&&(t=!0)):n=6),[b,y,i,n]}function y(t,e,r){for(var o=0,a=0,i=1,u=1,f=0,s=!1,h=e.length-1;h>=0;h--){var c=e[h].charCodeAt(0);36!==c?c<58?(a+=(c-48)*i,i*=10):(s||(i=1,o=a,a=0,s=!0,u+=1),a+=(c-(c>96?96:64))*i,i*=26):f+=u}t.push(9,n(o-1,a-1,r),f)}function m(e,r){var n,o,i=[];t=!1;for(var u,s=-1,h=0;h<e.length;h++){var p=e[h];if('\"'!=p){if(!(s>-1))if(\"{\"!=p||\"{\"!=e[h+1])if(\"'\"==p||c(p.charCodeAt(0))){var m=b(e,h,0),M=(P=m[0],F=m[1],m[2]),D=m[3],T=i.length;if(7!==D&&8!==D||5!==i[i.length-3])u=r.z,i.push(D,P,F);else{var C=\"'\"===e[P-2]?1:0,E=i[T-2],A=i[T-1];void 0===(u=r.page(e.substr(E,A)))&&(i.push(3,0,0),u=0),i.push(D,P-A-2*C-1,F+A+2*C+1)}if(h=M-1,6===D)r.name(i,e,r);else if(8===D){var x=i.length;if(y(i,e.substr(P,F),u),P=(n=b(e,h+2,0))[0],F=n[1],M=n[2],5===(D=n[3])&&(P=(o=b(e,M+1,0))[0],F=o[1],M=o[2],D=o[3]),7!==D){i[x-3]=7;continue}y(i,e.substr(P,F),u);var w=i[x+1],O=i[x+4];(w>O||a(w)>a(O))&&(i[x+1]=O,i[x+4]=w),i[x-1]+=F+1,h=M-1}else 7===D?y(i,e.substr(P,F),u):3!==D&&5!==D||h++}else if(l(p)){var I=d(e,h);i.push(12,h,I-h),h=I-1}else if(g(p)){var N=v(e,h);i.push(11,h,N-h),h=N-1}else{var S=_(e,h);i.push(10,h,S-h),h=S-1}else{var R=b(e,h+2,2),P=R[0],F=R[1],L=R[2];i.push(2,P,F),h=L+2-1}}else s>-1?(i.push(1,s+1,h-s-1),s=-1):s=h}var k={code:i,source:e,exec:null,broken:0,triggers:null};return t&&(k.source=f(k,r)),k}function M(t){return\"              \".substr(0,10-t.length)}var D=[\">\",\"<\",\"=\",\"+\"];function T(t){var e=function(t){for(var e=t.code,r=t.source,n=\"\",o=e.length,a=0;a<o;a+=3){switch(e[a]){case 4:n+=\"ctx.m.\"+r.substr(e[a+1],e[a+2]).toUpperCase();break;case 1:n+='\"'+r.substr(e[a+1],e[a+2])+'\"';break;case 2:n+='ctx.p(\"'+r.substr(e[a+1],e[a+2])+'\")';break;case 6:case 7:var i=void 0,u=void 0;if(10===e[a-3]?i=a-3:12===e[a-3]&&10===e[a-6]&&(i=a-6),10===e[a+6]?u=a+6:12===e[a+6]&&10===e[a+9]&&(u=a+9),i||u){var f=i?r[e[i+1]]:null,s=u?r[e[u+1]]:null;if(\"&\"==f||\"&\"==s){n+=\"(ctx.v(\"+e[a+4]+') === null ? \"\" : ctx.v('+e[a+4]+\"))\";break}if(-1!=D.indexOf(f)||-1!=D.indexOf(s)){n+=\"(ctx.v(\"+e[a+4]+\") === null ? 0 : ctx.v(\"+e[a+4]+\"))\";break}}n+=\"ctx.v(\"+e[a+4]+\")\";break;case 8:n+=\"ctx.r(\"+e[a+4]+\", \"+e[a+7]+\")\";break;case 10:if(1===e[a+2]){var h=r[e[a+1]];n+=\"&\"===h?'+\"\"+':\"=\"===h?\"==\":\";\"===h?\",\":h}else if(2===e[a+2]){h=r.substr(e[a+1],e[a+2]);n+=\"<>\"===h?\"!=\":h}else n+=r.substr(e[a+1],e[a+2]);break;case 11:n+=r.substr(e[a+1],e[a+2]);break;case 3:return\"\"}}return n}(t);if(!e)return t.broken=3,void(t.exec=null);try{t.exec=new Function(\"ctx\",\"return \"+e)}catch(e){t.broken=1,t.exec=null}}function C(t){var e=new Date(t.getFullYear(),0,0),r=t.valueOf()-e.valueOf()+60*(e.getTimezoneOffset()-t.getTimezoneOffset())*1e3;return Math.floor(r/864e5)}function E(t){var e=new Date(Math.round(86400*(t-25569)*1e3));return new Date(e.getTime()+6e4*e.getTimezoneOffset())}function A(t){return 25569+(t.getTime()-6e4*t.getTimezoneOffset())/864e5}function x(t){return!(!t&&0!==t||(t*=1,isNaN(t)))&&t}function w(t){for(var e=[],r=0;r<t.length;r++)e=e.concat(t[r]);return e}function O(t){return!t&&0!==t}function I(t){return\"string\"==typeof t?\"TRUE\"===t:!!t}function N(t){var e=\"string\"==typeof t?new Date(t):E(t);if(e.getTime())return e;throw t+\" is invalid date\"}function S(t){var e=x(t);if(\"number\"!=typeof e)throw t+\" is not a number\";return e}function R(t){return t>0?Math.floor(t):Math.ceil(t)}function P(t){return t<0?Math.floor(t):Math.ceil(t)}function F(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,n=0,o=w(t),a=0;a<o.length;a++){var i=x(o[a]);\"number\"==typeof i&&(r+=i,n++)}return n?r/n:0}function L(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=w(t),n=0,o=0,a=0;a<r.length;a++){var i=r[a],u=x(r[a]);\"number\"==typeof u?(n+=u,o++):(!0===i&&n++,(i||!1===i)&&o++)}return o?n/o:0}function k(t,e,r){for(var n=w(t),o=e?0:-1,a=r?L.apply(void 0,t):F.apply(void 0,t),i=0,u=0;u<n.length;u++){var f=n[u],s=x(n[u]);if(\"number\"!=typeof s){if(!r||\"boolean\"!=typeof f&&!f)continue;s=!0===f?1:0}o++,i+=Math.pow(s-a,2)}return o?i/o:0}var U={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};var V=[];var Y=[\"\",\"C\",\"CC\",\"CCC\",\"CD\",\"D\",\"DC\",\"DCC\",\"DCCC\",\"CM\",\"\",\"X\",\"XX\",\"XXX\",\"XL\",\"L\",\"LX\",\"LXX\",\"LXXX\",\"XC\",\"\",\"I\",\"II\",\"III\",\"IV\",\"V\",\"VI\",\"VII\",\"VIII\",\"IX\"];var X=Object.freeze({__proto__:null,SUM:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,n=w(t),o=0;o<n.length;o++){var a=x(n[o]);\"number\"==typeof a&&(r+=a)}return r},AVERAGE:F,AVERAGEA:L,COUNT:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,n=w(t),o=0;o<n.length;o++){var a=x(n[o]);\"number\"==typeof a&&r++}return r},COUNTA:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,n=w(t),o=0;o<n.length;o++)n[o]&&1*n[o]!=0&&r++;return r},COUNTBLANK:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,n=w(t),o=0;o<n.length;o++)0===n[o]||n[o]||r++;return r},MAX:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=-1/0,n=w(t),o=0;o<n.length;o++){var a=x(n[o]);\"number\"==typeof a&&a>r&&(r=a)}return r===-1/0?0:r},MIN:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=1/0,n=w(t),o=0;o<n.length;o++){var a=x(n[o]);\"number\"==typeof a&&a<r&&(r=a)}return r===1/0?0:r},PRODUCT:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=!1,n=1,o=w(t),a=0;a<o.length;a++){var i=x(o[a]);\"number\"==typeof i&&(r=!0,n*=i)}return r?n:null},SUMPRODUCT:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0].length;for(var n in t)if(t[n].length!==r)return;var o=0;for(n=0;n<t[0].length;n++){var a=!1,i=1;for(var u in t){var f=x(t[u][n]);\"number\"==typeof f&&(i*=f,a=!0)}a&&(o+=i)}return o},SUMSQ:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0,n=w(t),o=0;o<n.length;o++){var a=x(n[o]);\"number\"==typeof a&&(r+=Math.pow(a,2))}return r},VAR:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return k(t,!1,!1)},VARA:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return k(t,!1,!0)},VARP:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return k(t,!0,!1)},VARPA:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return k(t,!0,!0)},STDEV:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.sqrt(this.VARP.apply(this,t))},STDEVP:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.sqrt(this.VARP.apply(this,t))},STDEVA:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.sqrt(this.VARA.apply(this,t))},STDEVPA:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Math.sqrt(this.VARPA.apply(this,t))},POWER:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return Math.pow(r,n)},QUOTIENT:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return R(r/n)},SQRT:function(t){var e=x(t);if(\"number\"==typeof e&&e>=0)return Math.sqrt(e)},ABS:function(t){var e=x(t);if(\"number\"==typeof e)return Math.abs(e)},RAND:function(){return Math.random()},PI:function(){return Math.PI},INT:function(t){var e=x(t);if(\"number\"==typeof e)return Math.floor(e)},ROUND:function(t,e){var r=x(t),n=x(e)||0;if(\"number\"==typeof r&&\"number\"==typeof n)return parseFloat(r.toFixed(n))},ROUNDDOWN:function(t,e){var r=x(t),n=x(e)||0;if(\"number\"==typeof r&&\"number\"==typeof n)return Math.floor(r*Math.pow(10,n))/Math.pow(10,n)},ROUNDUP:function(t,e){var r=x(t),n=x(e)||0;if(\"number\"==typeof r&&\"number\"==typeof n)return Math.ceil(r*Math.pow(10,n))/Math.pow(10,n)},TRUNC:function(t){var e=x(t);if(\"number\"==typeof e)return R(e)},EVEN:function(t){var e=x(t);if(\"number\"==typeof e){var r=P(e);return r%2?r+Math.sign(e):r}},ODD:function(t){var e=x(t);if(\"number\"==typeof e){var r=P(e);return r%2?r:r+Math.sign(e)}},ACOS:function(t){var e=x(t);if(\"number\"==typeof e)return Math.acos(e)},ACOSH:function(t){var e=x(t);if(\"number\"==typeof e)return Math.acosh(e)},ACOT:function(t){var e=x(t);if(\"number\"==typeof e)return Math.atan(1/e)},ACOTH:function(t){var e=x(t);if(\"number\"==typeof e)return.5*Math.log((e+1)/(e-1))},ARABIC:function(t){if(!x(t)&&/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(\"\"+t)){var e=0;return(\"\"+t).replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,(function(t){return e+=U[t],t})),+e}},ASIN:function(t){var e=x(t);if(\"number\"==typeof e)return Math.asin(e)},ASINH:function(t){var e=x(t);if(\"number\"==typeof e)return Math.asinh(e)},ATAN:function(t){var e=x(t);if(\"number\"==typeof e)return Math.atan(e)},ATAN2:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return Math.atan2(n,r)},ATANH:function(t){var e=x(t);if(\"number\"==typeof e)return Math.log((1+e)/(1-e))/2},BASE:function(t,e,r){void 0===r&&(r=0);var n=x(t),o=x(e),a=x(r);if(\"number\"==typeof n&&\"number\"==typeof o&&\"number\"==typeof a){var i=n.toString(o);return new Array(Math.max(a+1-i.length,0)).join(\"0\")+i.toUpperCase()}},CEILING:function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=0);var n=x(t),o=x(e),a=x(r);if(\"number\"==typeof n&&\"number\"==typeof o&&\"number\"==typeof a)return 0===o?0:(o=Math.abs(o),n>=0?Math.ceil(n/o)*o:0===r?-1*Math.floor(Math.abs(n)/o)*o:-1*Math.ceil(Math.abs(n)/o)*o)},COS:function(t){var e=x(t);if(\"number\"==typeof e)return Math.cos(e)},COSH:function(t){var e=x(t);if(\"number\"==typeof e)return Math.cosh(e)},COT:function(t){var e=x(t);if(\"number\"==typeof e)return 1/Math.tan(e)},COTH:function(t){var e=x(t);if(\"number\"==typeof e){var r=Math.exp(2*e);return(r+1)/(r-1)}},CSC:function(t){var e=x(t);if(\"number\"==typeof e)return 1/Math.sin(e)},CSCH:function(t){var e=x(t);if(\"number\"==typeof e)return 2/(Math.exp(e)-Math.exp(-e))},DEGREES:function(t){var e=x(t);if(\"number\"==typeof e)return 180*e/Math.PI},DECIMAL:function(t,e){var r=x(t),n=x(e);if(!(\"\"+r).match(\"/[2-9]/\")&&\"number\"==typeof r&&\"number\"==typeof n&&n>1&&n<37)return parseInt(\"\"+r,n)},FACT:function(t){var e=x(t);if(\"number\"==typeof e&&e>-1){var r=Math.floor(e);return 0===r||1===r?1:V[r]>0?V[r]:(V[r]=this.FACT(r-1)*r,V[r])}},FACTDOUBLE:function(t){var e=x(t);if(\"number\"==typeof e){var r=Math.floor(e);return r<=0?1:r*this.FACTDOUBLE(r-2)}},COMBIN:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return this.FACT(r)/(this.FACT(n)*this.FACT(r-n))},COMBINA:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return 0===r&&0===n?1:this.COMBIN(r+n-1,r-1)},FLOOR:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n){var o=Math.abs(n);return r>=0?Math.floor(r/o)*o:-1*Math.ceil(Math.abs(r)/o)*o}},GCD:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=w(t),n=r.length,o=r[0],a=1;\"number\"!=typeof o;)o=r[a],a++;for(var i=o<0?-o:o;a<n;a++){var u=x(r[a]);if(\"number\"==typeof u){for(var f=u<0?-u:u;i&&f;)i>f?i%=f:f%=i;i+=f}}return i},LN:function(t){var e=x(t);if(\"number\"==typeof e)return Math.log(e)},LOG:function(t,e){void 0===e&&(e=10);var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return Math.log(r)/Math.log(n)},LOG10:function(t){var e=x(t);if(\"number\"==typeof e)return Math.log(e)/Math.log(10)},MOD:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n&&0!==n){var o=Math.abs(r%n);return e>0?o:-o}},MROUND:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n&&r*n>-1)return Math.round(r/n)*n},MULTINOMIAL:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=w(t),n=0,o=1,a=0;a<r.length;a++){var i=x(r[a]);\"number\"==typeof i&&(n+=i,o*=this.FACT(r[a]))}return this.FACT(n)/o},RADIANS:function(t){var e=x(t);if(\"number\"==typeof e)return e*Math.PI/180},RANDBETWEEN:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return r+Math.ceil((n-r+1)*Math.random())-1},ROMAN:function(t){var e=x(t);if(\"number\"==typeof e){for(var r=String(e).split(\"\"),n=\"\",o=3;o--;)n=(Y[+r.pop()+10*o]||\"\")+n;return new Array(+r.join(\"\")+1).join(\"M\")+n}},SEC:function(t){var e=x(t);if(\"number\"==typeof e)return 1/Math.cos(e)},SECH:function(t){var e=x(t);if(\"number\"==typeof e)return 2/(Math.exp(e)+Math.exp(-e))},SIN:function(t){var e=x(t);if(\"number\"==typeof e)return Math.sin(e)},SINH:function(t){var e=x(t);if(\"number\"==typeof e)return Math.sinh(e)},SQRTPI:function(t){var e=x(t);if(\"number\"==typeof e&&e>-1)return Math.sqrt(e*Math.PI)},SUBTOTAL:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=x(t),o=w(e);if(\"number\"==typeof n)switch(n){case 1:case 101:return this.AVERAGE(o);case 102:case 2:return this.COUNT(o);case 103:case 3:return this.COUNTA(o);case 104:case 4:return this.MAX(o);case 105:case 5:return this.MIN(o);case 106:case 6:return this.PRODUCT(o);case 107:case 7:return;case 108:case 8:return this.STDEVP(o);case 109:case 9:return this.SUM(o);case 110:case 10:return;case 111:case 11:return this.VARP(o)}},ADD:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return r+n},MINUS:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return r-n},DIVIDE:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n&&0!==n)return r/n},MULTIPLY:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return r*n},GT:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return r>n},GTE:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return r>=n},LT:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return r<n},LTE:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return r<=n},EQ:function(t,e){return typeof t==typeof e&&t==e},NE:function(t,e){return typeof t!=typeof e||t!=e},POW:function(t,e){var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return this.POWER(t,e)},SUMX2MY2:function(t,e){if(!t.find((function(t){return\"number\"!=typeof x(t)}))&&!e.find((function(t){return\"number\"!=typeof x(t)}))){for(var r=0,n=0;n<t.length;n++)r+=t[n]*t[n]-e[n]*e[n];return r}},SUMX2PY2:function(t,e){if(!t.find((function(t){return\"number\"!=typeof x(t)}))&&!e.find((function(t){return\"number\"!=typeof x(t)}))){for(var r=0,n=0;n<t.length;n++)r+=t[n]*t[n]+e[n]*e[n];return r}},SUMXMY2:function(t,e){if(!t.find((function(t){return\"number\"!=typeof x(t)}))&&!e.find((function(t){return\"number\"!=typeof x(t)}))){for(var r=0,n=0;n<t.length;n++)r+=Math.pow(t[n]-e[n],2);return r}},TAN:function(t){var e=x(t);if(\"number\"==typeof e)return Math.tan(e)},TANH:function(t){var e=x(t);if(\"number\"==typeof e)return Math.tanh(e)}});var z=/[\\0-\\x1F]/g;var H=Object.freeze({__proto__:null,CONCATENATE:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return w(t).join(\"\")},LEFT:function(t,e){return O(t)?\"\":t.toString().substring(0,e)},MID:function(t,e,r){return O(t)?\"\":t.toString().substring(e,e+r)},RIGHT:function(t,e){return O(t)?\"\":t.toString().substring(t.length-e)},LOWER:function(t){return O(t)?\"\":t.toString().toLowerCase()},UPPER:function(t){return O(t)?\"\":t.toString().toUpperCase()},PROPER:function(t){if(O(t))return\"\";var e=t.toString().toLowerCase().split(\" \");for(var r in t=\"\",e)t+=(t?\" \":\"\")+e[r].substring(0,1).toUpperCase()+e[r].substring(1);return t},TRIM:function(t){return O(t)?\"\":t.toString().trim()},LEN:function(t){return O(t)?0:t.toString().length},CHAR:function(t){var e=x(t);if(\"number\"==typeof e)return String.fromCharCode(e)},CLEAN:function(t){return void 0===t&&(t=\"\"),(\"\"+t).replace(z,\"\")},CODE:function(t){return void 0===t&&(t=\"\"),(\"\"+t).charCodeAt(0)},DOLLAR:function(t,e){void 0===e&&(e=2);var r=x(t),n=x(e);if(\"number\"==typeof r&&\"number\"==typeof n)return\"$\"+r.toFixed(n)},EXCAT:function(t,e){return t===e},FIND:function(t,e,r){void 0===r&&(r=0);var n=x(r);if(\"number\"==typeof n&&e)return(\"\"+e).indexOf(\"\"+t,n-1)+1;throw\"index cannot be string\"},FIXED:function(t,e,r){void 0===e&&(e=2),void 0===r&&(r=!1);var n=x(t),o=x(e);if(\"number\"==typeof n&&\"number\"==typeof o){var a=n.toFixed(o);return I(r)?\"\"+a:a.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")}},NUMBERVALUE:function(t,e,r){if(void 0===e&&(e=\".\"),void 0===r&&(r=\",\"),\"string\"==typeof t&&\"string\"==typeof e&&\"string\"==typeof r)return Number(t.replace(e,\".\").replace(r,\"\"))},REGEXEXTRACT:function(t,e){if(\"string\"==typeof t&&\"string\"==typeof e){var r=t.match(new RegExp(e));return r?r[r.length>1?r.length-1:0]:null}},REGEXMATCH:function(t,e){if(\"string\"==typeof t&&\"string\"==typeof e)return!!t.match(new RegExp(e))},REGEXREPLACE:function(t,e,r){if(\"string\"==typeof t&&\"string\"==typeof e)return t.replace(new RegExp(e),\"\"+r)},REPT:function(t,e){var r=x(e);if(\"number\"==typeof r)return new Array(r+1).join(\"\"+t)},SEARCH:function(t,e,r){void 0===r&&(r=0);var n=x(r);if(\"number\"==typeof n){var o=(\"\"+e).toLowerCase().indexOf((\"\"+t).toLowerCase(),n-1)+1;if(0!==o)return o;throw\"not found\"}},SUBSTITUTE:function(t,e,r,n){if(!t||!e||!r&&\"\"!==r)return\"\"+t;if(void 0===n)return(\"\"+t).replace(new RegExp(\"\"+e,\"g\"),\"\"+r);for(var o=0,a=0;(\"\"+t).indexOf(\"\"+e,o)>0;)if(o=(\"\"+t).indexOf(\"\"+e,o+1),++a===n)return(\"\"+t).substring(0,o)+r+(\"\"+t).substring(o+(\"\"+e).length)},T:function(t){return\"\"+t},JOIN:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=[],o=0,a=e;o<a.length;o++){var i=a[o];\"object\"==typeof i?n.push(i.join(\"\"+t)):n.push(i)}return n.join(\"\"+t)}}),B=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],G=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],j=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function W(t){return 1===new Date(t,1,29).getMonth()}function q(t,e,r){void 0===r&&(r=0);var n=N(t),o=N(e);if(n&&o){var a=n.getDate(),i=n.getMonth()+1,u=n.getFullYear(),f=o.getDate(),s=o.getMonth()+1,h=o.getFullYear(),c=365,p=h-u+1,g=(new Date(h+1,0,1).getTime()-new Date(u,0,1).getTime())/1e3/60/60/24/p;switch(r){case 0:return 31===a&&31===f?(a=30,f=30):31===a?a=30:30===a&&31===f&&(f=30),(f+30*s+360*h-(a+30*i+360*u))/360;case 1:return u===h||u+1===h&&(i>s||i===s&&a>=f)?((u===h&&W(u)||function(t,e){var r=t.getFullYear(),n=new Date(r,2,1);if(W(r)&&t<n&&e>=n)return!0;var o=e.getFullYear(),a=new Date(o,2,1);return W(o)&&e>=a&&t<a}(n,o)||1===s&&29===f)&&(c=366),this.DAYS(o.toDateString(),n.toDateString())/c):this.DAYS(o.toDateString(),n.toDateString())/g;case 2:return this.DAYS(o.toDateString(),n.toDateString())/360;case 3:return this.DAYS(o.toDateString(),n.toDateString())/365;case 4:return(f+30*s+360*h-(a+30*i+360*u))/360}}}var K=Object.freeze({__proto__:null,DATE:function(t,e,r){return A(new Date(t,e-1,r))},TIME:function(t,e,r){return A(new Date(1900,0,1,t,e,r))},DAY:function(t){return E(t).getDate()},MONTH:function(t){return E(t).getMonth()+1},YEAR:function(t){return E(t).getFullYear()},HOUR:function(t){return E(t).getHours()},MINUTE:function(t){return E(t).getMinutes()},SECOND:function(t){return E(t).getSeconds()},NOW:function(){return A(new Date)},DATEDIF:function(t,e,r){if(\"D\"===r)return e-t;var n=E(t),o=E(e);switch(r){case\"Y\":return o.getFullYear()-n.getFullYear();case\"M\":return(i=12*(o.getFullYear()-n.getFullYear()))+o.getMonth()-n.getMonth();case\"D\":return Math.floor(e-t);case\"MD\":if((u=o.getDate()-n.getDate())<0){var a=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();return o.getDate()+a-n.getDate()}return u;case\"YM\":var i;return(i=o.getMonth()-n.getMonth())<0?12+i:i;case\"YD\":var u;return(u=C(o)-C(n))<0?365+u:u}},DATEVALUE:function(t){if(\"string\"==typeof t)return A(new Date(new Date(t).toDateString()))},DAYS:function(t,e){var r=N(t),n=N(e);if(r&&n)return Math.round((r.getTime()-n.getTime())/864e5)},DAYS360:function(t,e,r){void 0===r&&(r=0);var n=N(t),o=N(e);if(n&&o){var a=n.getMonth(),i=o.getMonth(),u=void 0,f=void 0;if(r)u=31===n.getDate()?30:n.getDate(),f=31===o.getDate()?30:o.getDate();else{var s=new Date(n.getFullYear(),a+1,0).getDate(),h=new Date(o.getFullYear(),i+1,0).getDate();u=n.getDate()===s?30:n.getDate(),o.getDate()===h?u<30?(i++,f=1):f=30:f=o.getDate()}return 360*(o.getFullYear()-n.getFullYear())+30*(i-a)+(f-u)}},EDATE:function(t,e){var r=N(t),n=x(e);if(r&&\"number\"==typeof n)return r.setMonth(r.getMonth()+n),A(r)},EOMONTH:function(t,e){var r=N(t),n=x(e);if(r&&\"number\"==typeof n)return A(new Date(r.getFullYear(),r.getMonth()+n+1,0))},ISOWEEKNUM:function(t){var e=N(t);if(e){e.setHours(0,0,0),e.setDate(e.getDate()+4-(e.getDay()||7));var r=new Date(e.getFullYear(),0,1);return Math.ceil(((e.getTime()-r.getTime())/864e5+1)/7)}},NETWORKDAYS:function(t,e,r){return this.NETWORKDAYSINTL(t,e,1,r)},NETWORKDAYSINTL:function(t,e,r,n){var o=N(t),a=N(e);if(o&&a){var i=void 0===r?j[1]:j[r],u=void 0;u=void 0===n?[]:n instanceof Array?n:[n];for(var f=0;f<u.length;f++){if((l=E(u[f]))instanceof Error)throw\"The \"+u[f]+\" is not a  number\";u[f]=l}var s=(a.getTime()-o.getTime())/864e5+1,h=Math.round(s),c=o;for(f=0;f<s;f++){var p=(new Date).getTimezoneOffset()>0?c.getUTCDay():c.getDay(),g=!1;p!==i[0]&&p!==i[1]||(g=!0);for(var v=0;v<u.length;v++){var l;if((l=u[v]).getDate()===c.getDate()&&l.getMonth()===c.getMonth()&&l.getFullYear()===c.getFullYear()){g=!0;break}}g&&h--,c.setDate(c.getDate()+1)}return h}},TIMEVALUE:function(t){if(\"string\"==typeof t){var e=t.split(\" \"),r=e[1],n=e[0].split(\":\"),o=new Date;return o.setHours(+n[0]),r&&\"PM\"===r.toUpperCase()&&o.setHours(o.getHours()+12),o.setMinutes(+n[1]),n[2]&&o.setSeconds(+n[2]),(3600*o.getHours()+60*o.getMinutes()+o.getSeconds())/86400}},WEEKNUM:function(t,e){void 0===e&&(e=1);var r=N(t);if(21===e)return this.ISOWEEKNUM(e);var n=G[e],o=new Date(r.getFullYear(),0,1),a=o.getDay()<n?1:0,i=o.getTime()-24*Math.abs(o.getDay()-n)*60*60*1e3;return Math.floor((r.getTime()-i)/864e5/7+1)+a},WEEKDAY:function(t,e){void 0===e&&(e=1);var r=N(t).getDay();return B[e][r]},WORKDAY:function(t,e,r){return this.WORKDAYINTL(t,e,1,r)},WORKDAYINTL:function(t,e,r,n){var o=N(t),a=x(e);if(o&&\"number\"==typeof a){var i=void 0===r?j[1]:j[r],u=void 0;u=void 0===n?[]:n instanceof Array?n:[n];for(var f=0;f<u.length;f++){if((p=E(u[f]))instanceof Error)throw\"The \"+u[f]+\" is not a  number\";u[f]=p}for(var s=0;s<a;){o.setDate(o.getDate()+1);var h=o.getDate();if(h!==i[0]&&h!==i[1]){for(var c=0;c<u.length;c++){var p;if((p=u[c]).getDate()===o.getDate()&&p.getMonth()===o.getMonth()&&p.getFullYear()===o.getFullYear()){s--;break}}s++}}return A(o)}},YEARFRAC:q});var $=Object.freeze({__proto__:null,IF:function(t,e,r){return t?e:r},AND:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0;r<t.length;r++)if(!I(t[r]))return!1;return!0},NOT:function(t){return!I(t)},OR:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=0;r<t.length;r++)if(t[r])return!0;return!1},CHOOSE:function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=x(t);if(e.length>1&&\"number\"==typeof n){if(e.length<n)throw\"the index number is greater than the length of the array of values\";if(n<=0)throw\"index cannot be less than or equal to 0\";return e[--n]}},FALSE:function(){return!1},TRUE:function(){return!0}});var Q=Object.freeze({__proto__:null,ISBLANK:function(t){return O(t)},ISBINARY:function(t){return/^[01]{1,10}$/.test(\"\"+t)},ISEVEN:function(t){var e=x(t);return\"number\"==typeof e&&e%2==0},ISODD:function(t){var e=x(t);return\"number\"==typeof e&&e%2!=0},ISNOTEXT:function(t){return\"string\"!=typeof t},ISNUMBER:function(t){return\"number\"==typeof x(t)},ISTEXT:function(t){return\"string\"==typeof t},N:function(t){var e=x(t);if(\"number\"==typeof e)return e;var r=new Date(t);return r.getTime()?A(r):\"TRUE\"===t||!0===t?1:\"FALSE\"===t||!1===t?0:void 0}});var J=Object.freeze({__proto__:null,ACCRINT:function(t,e,r,n,o,a,i){void 0===o&&(o=0),void 0===i&&(i=0);var u=N(t),f=(N(e),N(r)),s=S(n),h=S(o),c=S(a),p=S(i);if(-1===[1,2,4].indexOf(c))throw\"Frequency is \"+a+\". It's should be 1, 2 or 4\";if(-1===[0,1,2,3,4].indexOf(p))throw\"Basis is \"+i+\". It's should be 0, 1, 2, 3 or 4\";if(f<=u)throw\"Settlement canot be before or equal to issue\";return h*s*q(t,r,p)},PMT:function(t,e,r,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a,i=S(t),u=S(e),f=S(r),s=S(n);if(0===i)a=(f+s)/u;else{var h=Math.pow(1+i,u);a=i*(f*h+s)/(h-1),1===o&&(a/=1+i)}return-a},FV:function(t,e,r,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a,i=S(t),u=S(e),f=S(r),s=S(n);if(0!==i){var h=Math.pow(1+i,u);return a=s*h+f*(h-1)/i,1===o&&(a=s*h+f*(1+i)*(h-1)/i),-a}a=s+f*u},DB:function(t,e,r,n,o){void 0===o&&(o=12);var a=S(t),i=S(e),u=S(r),f=S(n),s=S(o);if(a<0||i<0||u<0||f<0)throw\"Parameters cannot be negative\";if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(s))throw\"Moth is \"+o+\". It's should be beetwen 1 and 12\";if(f>u)throw\"Period cannot be greater than life\";if(i>=a)return 0;for(var h=+(1-Math.pow(i/a,1/u)).toFixed(3),c=a*h*s/12,p=c,g=0,v=n===u?u-1:n,l=2;l<=v;l++)p+=g=(a-p)*h;return 1===n?c:n===u?(a-p)*h:g},DDB:function(t,e,r,n,o){void 0===o&&(o=2);var a=S(t),i=S(e),u=S(r),f=S(n),s=S(o);if(a<0||i<0||u<0||f<0||s<0)throw\"Parameters cannot be negative\";if(f>u)throw\"Period cannot be greater than life\";if(i>=a)return 0;for(var h=0,c=0,p=1;p<=n;p++)h+=c=Math.min(s/u*(a-h),a-i-h);return c},DOLLARDE:function(t,e){var r=S(t),n=S(e);if(n<0)throw\"Fraction cannot be negative\";if(n>=0&&n<1)throw\"Fraction cannot be zero\";n=parseInt(\"\"+n,10);var o=parseInt(\"\"+t,10);o+=r%1*Math.pow(10,Math.ceil(Math.log(n)/Math.LN10))/n;var a=Math.pow(10,Math.ceil(Math.log(n)/Math.LN2)+1);return o=Math.round(o*a)/a},DOLLARFR:function(t,e){var r=S(t),n=S(e);if(n<0)throw\"Fraction cannot be negative\";if(n>=0&&n<1)throw\"Fraction cannot be zero\";n=parseInt(\"\"+n,10);var o=parseInt(\"\"+t,10);return o+=r%1*Math.pow(10,-Math.ceil(Math.log(n)/Math.LN10))*n},EFFECT:function(t,e){var r=S(t),n=S(e);if(r<=0)throw\"Rate cannot be less than or equal to zero\";if(n<1)throw\"Periods cannot be less than 1\";return n=parseInt(\"\"+n,10),Math.pow(1+r/n,n)-1},FVSCHEDULE:function(t,e){for(var r=S(t),n=e.map((function(t){return S(t)})),o=n.length,a=r,i=0;i<o;i++)a*=1+n[i];return a},IRR:function(t,e){void 0===e&&(e=0);for(var r=w(t).map((function(t){return S(t)})),n=S(e),o=function(t,e,r){for(var n=r+1,o=t[0],a=1;a<t.length;a++)o+=t[a]/Math.pow(n,(e[a]-e[0])/365);return o},a=function(t,e,r){for(var n=r+1,o=0,a=1;a<t.length;a++){var i=(e[a]-e[0])/365;o-=i*t[a]/Math.pow(n,i+1)}return o},i=[],u=!1,f=!1,s=0;s<r.length;s++)i[s]=0===s?0:i[s-1]+365,r[s]>0&&(u=!0),r[s]<0&&(f=!0);if(!u||!f)throw\"Values should contain at least one positive value and one negative value\";var h,c,p,g=n=void 0===e?.1:n,v=!0;do{h=g-(p=o(r,i,g))/a(r,i,g),c=Math.abs(h-g),g=h,v=c>1e-10&&Math.abs(p)>1e-10}while(v);return g},IPMT:function(t,e,r,n,o,a){void 0===o&&(o=0),void 0===a&&(a=0);var i=S(t),u=S(r),f=S(e),s=S(n),h=S(o),c=this.PMT(i,u,s,h,a);return(1===f?1===a?0:-s:1===a?this.FV(i,f-2,c,s,1)-c:this.FV(i,f-1,c,s,0))*i},ISPMT:function(t,e,r,n){var o=S(t),a=S(e),i=S(r);return S(n)*o*(a/i-1)},NPV:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=w(t).map((function(t){return S(t)})),n=S(r[0]),o=0,a=1;a<r.length;a++)o+=r[a]/Math.pow(1+n,a);return o},NOMINAL:function(t,e){var r=S(t),n=S(e);if(r<=0)throw\"Rate cannot be less then or equal to zero\";if(n<1)throw\"Periods cannot be less then 1\";return n=parseInt(\"\"+n,10),(Math.pow(r+1,1/n)-1)*n},NPER:function(t,e,r,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a=S(t),i=S(e),u=S(r),f=S(n),s=S(o),h=i*(1+a*s)-f*a,c=u*a+i*(1+a*s);return Math.log(h/c)/Math.log(1+a)},PDURATION:function(t,e,r){var n=S(t),o=S(e),a=S(r);if(n<=0)throw\"Rate cannot be less then or equal to zero\";return(Math.log(a)-Math.log(o))/Math.log(1+n)},PPMT:function(t,e,r,n,o,a){void 0===o&&(o=0),void 0===a&&(a=0);var i=S(t),u=S(e),f=S(r),s=S(n),h=S(o),c=S(a);return this.PMT(i,f,s,h,c)-this.IPMT(i,u,f,s,h,c)},PV:function(t,e,r,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var a=S(t),i=S(e),u=S(r),f=S(n),s=S(o);return 0===a?-u*i-f:((1-Math.pow(1+a,i))/a*u*(1+a*s)-f)/Math.pow(1+a,i)}}),Z={number:X,string:H,date:K,other:$,information:Q,financial:J},tt=r(r(r(r(r(r({},X),H),K),$),Q),J);var et=Math.pow(10,8),rt=function(){function t(t){var e=this;(t=t||{get:null,set:null})&&(this._getter=t.get,this._setter=t.set),this._parser=m,this._printer=T,this._parseContext={name:function(){},pageName:function(){return\"\"},pageObj:function(){return null},page:function(){return 0},z:0},this.$count=0,this._data=new Map,this._triggers=new Map,this._holders={},this._context={v:function(t){if(-1===t)throw new Error;var r=e._getter(t);return void 0===r?null:r},r:function(t,r){var n=[];return u(t,r,(function(t){return n.push(e._getter(t))})),n},m:tt,e:function(t){throw t},p:function(t){return e.getPlaceholder(t)}}}return t.prototype.setValue=function(t,e,r,n){\"\"===e&&(e=null),this._removeTriggers(t,null),this._setter(t,e,r)&&(n||this.trigger(t))},t.prototype.clean=function(t){this._removeTriggers(t,null)},t.prototype.getValue=function(t){return this._getter(t)},t.prototype.setPlaceholder=function(t,e){var r=this;\"*\"===t?Object.entries(e).forEach((function(t){return r.setPlaceholder(t[0],t[1])})):(null===e?delete this._holders[t]:this._holders[t]=e,this.each((function(e,n){(function(t,e,r){for(var n=0;n<t.length;n+=3)if(2===t[n]&&e.substr(t[n+1],t[n+2])==r)return!0;return!1})(n.code,n.source,t)&&r.setMath(e,n.source,r._parseContext)})))},t.prototype.getPlaceholder=function(t){if(\"*\"===t)return this._holders;var e=this._holders[t];return void 0===e?null:e},t.prototype.setMath=function(t,e,r,n){var o=this._generate(e,r),a=this._setMathAt(t,o);n||this._execAndTrigger(a)},t.prototype.refresh=function(t){this._execAndTrigger(t)},t.prototype.getMath=function(t){return this._data.get(t)},t.prototype.trigger=function(t,e){var r=this._triggers.get(t);if(r){var n=!e;e||(e=new Set);for(var o=0;o<r.length;o++)e.add(r[o]);n&&this.triggerSet(e)}return null},t.prototype.triggerSet=function(t){for(var e=this,r=new Map;t.size;){var n=t.values(),o=!1;t:for(var a=n.next();!a.done;a=n.next()){var i=this._data.get(a.value),u=r.get(a.value);if(!u||(1==u&&(u=this._check_for_loops(a.value,i.triggers,r)),2!=u)){var f=i.triggers;if(f)for(var s=0;s<f.length;s++)if(t.has(f[s]))continue t;this._execAndTrigger(a.value,t),u||r.set(a.value,1),t.delete(a.value),o=!0}}if(!o)return void t.forEach((function(r){return e._errorAndTrigger(r,t)}))}},t.prototype._check_for_loops=function(t,e,r){var n=new Set;e.forEach((function(t){return n.add(t)}));for(var o=n.values(),a=o.next();!a.done;a=o.next()){if(a.value==t)return r.set(t,2),2;var i=r.get(a.value);if(i&&i>1)return r.set(t,i),i;var u=this._data.get(a.value);u&&u.triggers&&u.triggers.forEach((function(t){return n.add(t)}))}return r.set(t,3),3},t.prototype._setMathAt=function(t,e){if(this._removeTriggers(t,e)){if(e.triggers)if(-1===e.triggers.indexOf(t))for(var n=0;n<e.triggers.length;n++){var o=e.triggers[n],a=this._triggers.get(o);void 0===a&&(a=[],this._triggers.set(o,a)),a.push(t)}else e=r(r({},e),{broken:3});return this._data.set(t,e),t}},t.prototype._removeTriggers=function(t,e){var r=this._data.get(t);if(!r)return!0;if(r===e)return!1;var n=r.triggers;if(n&&3!==r.broken)for(var o=0;o<n.length;o++){var a=n[o],i=this._triggers.get(a);if(i){var u=i.findIndex((function(e){return e===t}));i.splice(u,1)}}return this._data.delete(t),!0},t.prototype.parse=function(t,e){return this._parser(t,e||this._parseContext)},t.prototype.exec=function(t,e){var r=this._generate(t,e);return this._exec(r)},t.prototype.each=function(t){var e=this;Array.from(this._data.keys()).forEach((function(r){return t(r,e._data.get(r))}))},t.prototype.setLogger=function(t){this._err_handler=t},t.prototype._setErr=function(t,r){return t.broken=2,r&&this._err_handler&&this._err_handler(r),e[t.broken]},t.prototype._exec=function(t){if(t.broken>0&&2!==t.broken)return e[t.broken];try{var r=t.exec(this._context);return t.broken=0,\"number\"==typeof r?isFinite(r)?Math.round(r*et)/et:this._setErr(t):r}catch(e){return this._setErr(t,e)}},t.prototype.toString=function(t,e){return f(t,e||this._parseContext)},t.prototype.regenerate=function(t,e,n){var o=this;n=r({},n||this._parseContext),Array.from(this._data.keys()).forEach((function(r){var a=!1,u=o._data.get(r),s=i(r);if(e&&s===t)o._removeTriggers(r,null);else{for(var h=0;h<u.code.length;h+=3)if(9===u.code[h]&&i(u.code[h+1])===t){a=!0;break}a&&(n.z=s,e?o.setMath(r,u.source,n):(u.source=f(u,n),u.code=o._parser(u.source,n).code))}}))},t.prototype.recalculate=function(t,e){var n=this;e=r({},e||this._parseContext);var o=new Set;this.each((function(r){if(t){var a=n._data.get(r);if(a.broken&&2!==a.broken)return e.z=i(r),void n.setMath(r,a.source,e)}o.add(r)})),this.triggerSet(o)},t.prototype._generate=function(t,e,r){var n=r||this._parser(t,e||this._parseContext);return this._printer(n),n.triggers=function(t){for(var e=[],r=t.code,n=r.length,o=0;o<n;o+=3){switch(r[o]){case 7:case 6:e.push(r[o+4]);break;case 8:u(r[o+4],r[o+7],(function(t){return e.push(t)}))}}return e.length?e:null}(n),n},t.prototype._execAndTrigger=function(t,e){this.$count+=1;var r=this._data.get(t);if(r){var n=this._exec(r);this._setter(t,n)&&this.trigger(t,e)}},t.prototype._errorAndTrigger=function(t,e){var r=this._data.get(t),n=this._setErr(r);this._setter(t,n)&&this.trigger(t,e)},t.prototype.debug=function(t){console.log(function(t){for(var e=t.code,r=t.source,n=\"\",o=e.length,a=0;a<o;a+=3){var i=e[a],u=void 0;switch(i){case 4:u=\"method\";break;case 1:u=\"text\";break;case 5:u=\"page\";break;case 2:u=\"holder\";break;case 6:u=\"name\";break;case 7:u=\"arg\";break;case 8:u=\"range\";break;case 9:u=\"data\";break;case 10:u=\"op\";break;case 11:u=\"number\";break;case 3:u=\"error\";break;case 12:u=\"extra\"}n+=9===i?\"              \"+e[a+1]+\" x \"+e[a+2]+\")\\n\":\"[\"+u+\"]\"+M(u)+r.substr(e[a+1],e[a+2])+\"\\n\"}return n}(this.parse(t)))},t.prototype.transpose=function(t,e,r,a){var i=this;a=a||this._parseContext;var u=o(t),f=u[0],s=u[1],h=u[2],c=[],p=new Map,g=new Map;Array.from(this._data.keys()).forEach((function(t){var u=o(t),v=u[0],l=u[1],d=u[2],_=i._data.get(t),b=i._transpose(_,f,s,e,r,a),y=t;if(d===h&&(l>=s||v>=f)&&(y=n(v>=f?v+e:v,l>=s?l+r:l,d)),_!==b||t!==y){if(g.set(t,b),d===h&&(r<0&&l>=s&&l<s-r||e<0&&v>=f&&v<f-e))return;p.set(y,b),c.push(y)}})),Array.from(p.keys()).forEach((function(t){return i._setMathAt(t,p.get(t))})),Array.from(g.keys()).forEach((function(t){p.has(t)||i._removeTriggers(t,null)}));for(var v=new Set,l=0;l<c.length;l++)v.add(c[l]);this.triggerSet(v)},t.prototype.transposeMath=function(t,e,r,n){return\"string\"==typeof t&&(t=this.parse(t,n)),this._transpose(t,-1,-1,e,r,n||this._parseContext).source},t.prototype._transpose=function(t,e,r,a,i,u){for(var s=!0,h=t.code,c=!(e<0||r<0),p=0;p<h.length;p+=3)if(7===h[p]){var g=o(h[p+4]),v=g[0],l=g[1],d=g[2];if(u.z!==d)continue;var _=h[p+5];if(!c&&3==_)continue;(c||0==(1&_))&&v>=e&&(s&&(h=[].concat(h),s=!1),((v+=a)<e||v<0)&&(h[p]=3)),(c||0==(2&_))&&l>=r&&(s&&(h=[].concat(h),s=!1),((l+=i)<r||l<0)&&(h[p]=3)),s||(h[p+4]=n(v,l,d)),p+=3}else if(8===h[p]){var b=h[p+5],y=h[p+8];if(!c&&3===b&&3===y)continue;var m=o(h[p+4]),M=m[0],D=m[1],T=(d=m[2],o(h[p+7])),C=T[0],E=T[1];if(u.z!==d)continue;a&&((c||0==(1&b))&&(a>0?M>=e:M>e)&&(s&&(h=[].concat(h),s=!1),(M+=a)<0&&(h[p]=3)),(c||0==(1&y))&&C>=e&&(s&&(h=[].concat(h),s=!1),(C+=a)<M&&(h[p]=3))),i&&((c||0==(2&b))&&(i>0?D>=r:D>r)&&(s&&(h=[].concat(h),s=!1),(D+=i)<0&&(h[p]=3)),(c||0==(2&y))&&E>=r&&(s&&(h=[].concat(h),s=!1),(E+=i)<D&&(h[p]=3))),s||(h[p+4]=n(M,D,d),h[p+7]=n(C,E,d)),p+=6}if(s)return t;var A={code:h,broken:t.broken,source:t.source,triggers:null,exec:null};return A=this._parser(f(A,u),u),this._generate(A.source,u,A)},t}();var nt=function(){function t(t,e,n){this._data=[],this._id=t,this._store=e,this._meta={},this._parseContext=r(r({},n),{z:t})}return t.prototype.getMeta=function(){return this._meta},t.prototype.setMeta=function(t){this._meta=r(r({},this._meta),t)},t.prototype.getID=function(){return this._id},t.prototype.cellID=function(t,e){return n(t,e,this._id)},t.prototype.getSize=function(){var t=this._data.length,e=0;return this._data.forEach((function(t){t&&t.length>e&&(e=t.length)})),[t,e]},t.prototype.getContext=function(){return this._parseContext},t.prototype.addRow=function(t,e){this._data.splice.apply(this._data,ot(t,e)),this._store.transpose(n(t,0,this._id),e,0,this._parseContext)},t.prototype.removeRow=function(t,e){this._data.splice(t,e),this._store.transpose(n(t,0,this._id),-e,0,this._parseContext)},t.prototype.addColumn=function(t,e){var r=ot(t,e);this._data.forEach((function(t){t&&t.splice.apply(t,r)})),this._store.transpose(n(0,t,this._id),0,e,this._parseContext)},t.prototype.removeColumn=function(t,e){this._data.forEach((function(r){r&&r.splice(t,e)})),this._store.transpose(n(0,t,this._id),0,-e,this._parseContext)},t.prototype.setCell=function(t,e,n){var o=this._data[t];o||(o=this._data[t]=[]);var a=o[e];o[e]=a?r(r(r({},a),n),{value:a.value}):n,void 0!==n.value&&this.setValue(t,e,n.value)},t.prototype.setValue=function(t,e,r,o){\"string\"==typeof r&&r.length>1&&\"=\"===r[0]?this._store.setMath(n(t,e,this._id),r.substr(1),this._parseContext):this._store.setValue(n(t,e,this._id),r,o)},t.prototype.getCell=function(t,e,r){var n=this._data[t],o=n?n[e]:null;return o||!r?o:(n||(n=this._data[t]=[]),(o=n[e])||(o=n[e]={value:\"\"}),o)},t.prototype.getValue=function(t,e,r){if(r){var o=this._store.getMath(n(t,e,this._id));if(o)return\"=\"+o.source}var a=this.getCell(t,e,!1);return a?a.value:null},t.prototype.getRange=function(t,e,r,n){for(var o=[],a=t;a<=r;a++)for(var i=e;i<=n;i++)o.push(this.getValue(a,i,!1));return o},t.prototype.getCellRange=function(t,e,r,n){for(var o=[],a=t;a<=r;a++)for(var i=e;i<=n;i++)o.push(this.getCell(a,i));return o},t.prototype.eachCell=function(t){this._data.forEach((function(e,r){e&&e.forEach((function(e,n){e&&t(r,n,e)}))}))},t.prototype.serialize=function(t){var e=this,o=[];return this.eachCell((function(a,i,u){if(u=r({},u),t){var f=e._store.getMath(n(a,i,e.getID()));f&&(u.value=\"=\"+f.source)}o.push([a,i,u])})),o},t.prototype.parse=function(t,e){var o=this;this._store.each((function(t){i(t)===o._id&&o._store.clean(t)})),this._data=[];var a=new Set;t.forEach((function(t){var i=t[0],u=t[1],f=t[2],s=o._data[i];s||(s=o._data[i]=[]);var h=(f=s[u]=r({},f)).value;if(h)if(\"string\"==typeof h&&h.length>1&&\"=\"===h[0]){var c=n(i,u,o._id),p=h.substr(1);o._store.setMath(c,p,o.getContext(),!0),a.add(c)}else if(e){f.value=null;c=n(i,u,o._id);o._store.setValue(c,h,null,!0),o._store.trigger(c,a)}})),this._store.triggerSet(a)},t}();function ot(t,e){for(var r=[t,0],n=0;n<e;n++)r.push(null);return r}var at=function(){function t(t,e,r){this._ranges=new Map,this._counter=1,this._rangeOrder=[],this._store=t,this._page=e,this._pageGetter=r}return t.prototype.get=function(t){return this._store.getMath(this._ranges.get(t))},t.prototype.toId=function(t){return this._ranges.get(t)},t.prototype.add=function(t,e){var r=this._ranges.get(t)||this._next_id();this._store.setMath(r,e,this._page.getContext()),this._ranges.set(t,r),this._refresh(t)},t.prototype.remove=function(t){this._ranges.delete(t),this._counter=1,this._refresh(t)},t.prototype.serialize=function(){var t=this;return Array.from(this._ranges.keys()).map((function(e){return[e,t.get(e).source]}))},t.prototype.parse=function(t){var e=this;t.forEach((function(t){return e.add(t[0],t[1])}))},t.prototype._refresh=function(t){var e=this,r=t.indexOf(\"!\"),n=\"\";-1!==r&&(n=t.substr(0,r),t=t.substr(r+1)),this._store.each((function(r,o){if(function(t,e,r,n){for(var o=0;o<t.length;o+=3)if(6===t[o]){if(\"\"!==r){if(5===t[o-3]&&e.substr(t[o-2],t[o-1])!==r)continue;return!0}if(e.substr(t[o+1],t[o+2])===n)return!0}return!1}(o.code,o.source,n,t)){var a=i(r);e._store.setMath(r,o.source,e._pageGetter(a).getContext())}}))},t.prototype._next_id=function(){for(;this._rangeOrder[this._counter];)this._counter++;return this._rangeOrder[this._counter]=!0,n(this._counter,0,this._page.getID())},t.prototype.renamePage=function(t,e){var r=this;t+=\"!\",e&&(e+=\"!\"),this._ranges.forEach((function(n,o,a){0===o.indexOf(t)&&(e?a.set(o.replace(t,e),n):r._store.clean(n),a.delete(o))}))},t}();var it=function(){function t(){var t=this;this._pages=[],this._pageNames=[],this._pageName2ID=new Map,this._pCounter=0,this._parseContext={page:function(e){return t._pageName2ID.get(e)},pageName:function(e){return t._pageNames[e]},pageObj:function(e){return t._pages[e]},name:function(e,r,n){var o,a=e.length,i=r.substr(e[a-2],e[a-1]);if(5===e[a-6]){var u=r.substr(e[a-5],e[a-4]);o=t._ranges.toId(u+\"!\"+i)||t._ranges.toId(i)}else o=t._ranges.toId(n.pageName(n.z)+\"!\"+i)||t._ranges.toId(i);e.push(9,o||-1,0)},z:0},this._store=new rt({get:function(e){var r=o(e),n=r[0],a=r[1],i=r[2];return t._pages[i].getValue(n,a)},set:function(e,r,n){var a=o(e),i=a[0],u=a[1],f=a[2],s=t._pages[f].getCell(i,u,!0);return null==n&&(n=s.$format||0),s.$format=n,\"string\"==typeof r&&1!=n&&r&&parseFloat(r)==r&&(r=parseFloat(r)),s.value!==r&&(s.value=r,!0)}});var e=this._pages[63]=new nt(63,this._store,this._parseContext);this._ranges=new at(this._store,e,this.getPage.bind(this))}return t.prototype.addPage=function(t){for(;this._pages[this._pCounter];)this._pCounter++;var e=this._pCounter,r=new nt(e,this._store,this._parseContext);return this._pageName2ID.set(t,e),this._pages[e]=r,this._pageNames[e]=t,r},t.prototype.renamePage=function(t,e){if(t!==e){var r=this._pageName2ID.get(t);this._pageName2ID.delete(t),this._pageName2ID.set(e,r),this._pageNames[r]=e,this._ranges.renamePage(t,e);var n=this._pages[r].getContext();this._store.regenerate(r,!1,n)}},t.prototype.removePage=function(t){var e=this._pageName2ID.get(t),r=this._pages[e].getContext();this._pageName2ID.delete(t),this._pages[e]=this._pageNames[e]=null,this._pCounter=0,this._ranges.renamePage(t,null),this._store.regenerate(e,!0,r)},t.prototype.getPage=function(t){return\"string\"==typeof t&&(t=this._pageName2ID.get(t)),this._pages[t]},t.prototype.getRanges=function(){return this._ranges},t.prototype.getStore=function(){return this._store},t}();exports.D_COMMON=0,exports.D_STRING=1,exports.DataPage=nt,exports.DataStore=it,exports.Store=rt,exports.T_ARG=7,exports.T_DATA=9,exports.T_ERROR=3,exports.T_METHOD=4,exports.T_NAME=6,exports.T_NUMBER=11,exports.T_OPERATOR=10,exports.T_PAGE=5,exports.T_PLACEHOLDER=2,exports.T_RANGE=8,exports.T_SPACE=12,exports.T_TEXT=1,exports.addMethod=function(t,e){tt[t]=e},exports.column=function(t){return t>>6&4095},exports.fromId=o,exports.methodGroups=Z,exports.methods=tt,exports.page=i,exports.row=a,exports.str2id=function(t){var e=[];return y(e,t,0),e[1]},exports.str2pos=function(t){var e=[];return y(e,t,0),o(e[1]).slice(0,2)},exports.str2range=function(t){var e=[];t.split(\":\").map((function(t){return y(e,t,0)}));var r=o(e[1]),n=r[0],a=r[1],i=o(e[4]);return[n,a,i[0],i[1]]},exports.toId=n;\n//# sourceMappingURL=muon.js.map\n","import {addMethod} from \"@xbs/muon\";\n\nexport function init(){\n\taddMethod(\"IMAGE\", function(url){\n\t\treturn `<img class=\"webix_ssheet_cimage\" src=\"${webix.template.escape(url)}\">`;\n\t});\n\n\taddMethod(\"SPARKLINE\", function(arr, type, color1, color2){\n\t\tvar i, config = { type: type, color: color1, negativeColor:color2  },\n\t\t\twidth =  type == \"pie\"? 60: 150;\n\t\tfor(i =0 ; i < arr.length; i++)\n\t\t\tarr[i] = arr[i]||0;\n\t\treturn webix.Sparklines.getTemplate(config)(arr, { width:width, height: 35 });\n\t});\n\n\taddMethod(\"HYPERLINK\", function(url, text){\n\t\ttext = text || url;\n\t\treturn `<a target=\"blank\" href=\"${webix.template.escape(url)}\">${webix.template.escape(text)}</a>`;\n\t});\n}\n\nexport function getJsDateFromExcel(excelDate) {\n\tconst date = new Date(Math.round((excelDate - 25569) * 86400 * 1000));\n\treturn new Date(date.getTime() + date.getTimezoneOffset() * 60000);\n}\n\nexport function getExcelDateFromJs(jsDate) {\n\tconst returnDateTime = 25569 + ((jsDate.getTime() - (jsDate.getTimezoneOffset() * 60000)) / (86400 * 1000));\n\treturn returnDateTime.toString();\n}","import {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\n\nfunction getJsDate(value){\n\tif ((value || value === 0) && !(value instanceof Date) && !isNaN(value)){\n\t\tvalue = getJsDateFromExcel(value);\n\t}\n\treturn value;\n}\n\nfunction getExcelDate(value){\n\tif (value && value instanceof Date){\n\t\tvalue = getExcelDateFromJs(value);\n\t}\n\treturn value;\n}\n\nwebix.protoUI({\n\t$cssName: \"datepicker\",\n\tname: \"ssheet-datepicker\",\n\tgetValue:function(){\n\t\tconst value = webix.ui.datepicker.prototype.getValue.apply(this);\n\t\treturn getExcelDate(value) || \"\";\n\t},\n\t$prepareValue:function(value){\n\t\tvalue = getJsDate(value);\n\t\treturn webix.ui.datepicker.prototype.$prepareValue.apply(this, [value]);\n\t}\n}, webix.ui.datepicker);\n\nwebix.protoUI({\n\t$cssName: \"daterangepicker\",\n\tname: \"ssheet-daterangepicker\",\n\tgetValue:function(){\n\t\tlet value = webix.ui.datepicker.prototype.getValue.apply(this);\n\t\tif (value){\n\t\t\tvalue = webix.copy(value);\n\t\t\tvalue.start = getExcelDate(value.start);\n\t\t\tvalue.end = getExcelDate(value.end);\n\t\t}\n\t\treturn value || \"\";\n\t},\n\t$prepareValue:function(value){\n\t\tif (!value){\n\t\t\tvalue = { start:null, end:null };\n\t\t}\n\t\telse if (!value.start && !value.end)\n\t\t\tvalue = { start:value };\n\n\t\tvalue.start = getJsDate(value.start);\n\t\tvalue.end = getJsDate(value.end);\n\n\t\treturn webix.ui.daterangepicker.prototype.$prepareValue.apply(this, [value]);\n\t}\n}, webix.ui.daterangepicker);","webix.protoUI({\n\t$cssName: \"window\",\n\tname: \"ssheet-dialog\",\n\t$init: function(config){\n\t\tthis.$view.className += \" webix_ssheet_dialog\";\n\t\tthis.config.buttons = config.buttons;\n\t\tthis.config.close = true;\n\t},\n\tgetBodyConfig: function(content){\n\t\tcontent.borderless = true;\n\t\tvar elements = this.getFormElements(content);\n\t\tvar config = {\n\t\t\tview: \"form\",\n\t\t\tcss: \"webix_ssheet_form\",\n\t\t\tpadding: webix.skin.$active.layoutPadding.form,\n\t\t\telements: elements\n\t\t};\n\t\treturn config;\n\t},\n\tgetFormElements: function(content){\n\t\tvar elements;\n\t\tif(webix.isArray(content))\n\t\t\telements= content;\n\t\telse{\n\t\t\telements = [];\n\t\t\telements.push(content);\n\t\t}\n\t\tif(this.config.buttons){\n\t\t\telements.push({height:1});\n\t\t\telements.push( {\n\t\t\t\tmargin: 10,\n\t\t\t\tcols:[\n\t\t\t\t\t{},\n\t\t\t\t\t{view: \"button\", css: \"ssheet_cancel_button\", label: webix.i18n.spreadsheet.labels.cancel, autowidth:true, click: function(){\n\t\t\t\t\t\tvar parentView = this.getTopParentView();\n\t\t\t\t\t\tparentView.callEvent(\"onCancelClick\",[]);\n\t\t\t\t\t}},\n\t\t\t\t\t{view: \"button\", label: webix.i18n.spreadsheet.labels.save, hotkey: \"enter\", autowidth:true, click: function(){\n\t\t\t\t\t\tvar parentView = this.getTopParentView();\n\t\t\t\t\t\tparentView.callEvent(\"onSaveClick\",[]);\n\t\t\t\t\t}}\n\t\t\t\t]\n\t\t\t});\n\t\t}\n\t\treturn elements;\n\t},\n\tbody_setter: function(value){\n\t\tif(typeof value == \"object\"){\n\t\t\tif(webix.isUndefined(value.padding))\n\t\t\t\tvalue.padding = webix.skin.$active.layoutPadding.form;\n\t\t\tif(value.view == \"form\" && value.elements){\n\t\t\t\tvalue.elements = this.getFormElements(value.elements);\n\t\t\t\tif(!value.css)\n\t\t\t\t\tvalue.css = \"webix_ssheet_form\";\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = this.getBodyConfig(value);\n\t\t}\n\n\t\treturn webix.ui.window.prototype.body_setter.call(this,value);\n\t},\n\tdefaults:{\n\t\tmove:true,\n\t\thead: \"Dialog\",\n\t\tbuttons: true,\n\t\tclose:true,\n\t\t//we need to retain focus in table area, so disabling the autofocusing feature\n\t\tautofocus:false,\n\t\twidth: 350\n\t}\n}, webix.ui.window, webix.IdSpace);\n\n\n\nwebix.protoUI({\n\t$cssName: \"datatable\",\n\tname: \"ssheet-dialog-table\",\n\t$init: function(config){\n\t\tif(!config.headerRowHeight)\n\t\t\tconfig.headerRowHeight = 34;\n\t\tthis.$view.className += \" webix_ssheet_dialog_table\";\n\t}\n},webix.ui.datatable);","webix.protoUI({\n\tname: \"ssheet-form-popup\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_form\";\n\t}\n}, webix.ui.suggest);\n\nwebix.protoUI({\n\tname: \"ssheet-form-suggest\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_suggest\";\n\t}\n}, webix.ui.suggest);\n\nwebix.protoUI({\n\t$cssName: \"colorpicker\",\n\tname: \"ssheet-colorpicker\",\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_colorpicker\";\n\t},\n\tdefaults:{\n\t\tsuggest:{\n\t\t\tborderless: true,\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-colorboard\",\n\t\t\t}\n\t\t}\n\t}\n}, webix.ui.colorpicker);","webix.protoUI({\n\tname:\"formlate\",\n\tsetValue:function(a){ return this.setHTML(a); },\n\tgetValue:function(){ return \"\"; }\n}, webix.ui.template);","webix.protoUI({\n\tname:\"ssheet-icons\",\n\t$cssName: \"dataview\",\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_dataview\";\n\t},\n\tdefaults:{\n\t\tborderless: true,\n\t\ttemplate: \"<span class='webix_ssheet_button_icon #css#' ></span>\",\n\t\ttype:{\n\t\t\twidth: 36,\n\t\t\theight: 36\n\t\t}\n\t}\n},webix.ui.dataview);","webix.protoUI({\n\tname: \"ssheet-suggest\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tcss: \"webix_ssheet_suggest\"\n\t}\n},webix.ui.contextmenu);","const group = {\n\tvalue: null,\n\tset: function(method, master){\n\t\tif(!this.value){\n\t\t\tthis.start();\n\t\t\tmethod.call(master);\n\t\t\tthis.end();\n\t\t}\n\t\telse\n\t\t\tmethod.call(master);\n\t},\n\tstart(){\n\t\tthis.value = webix.uid();\n\t},\n\tend(){\n\t\tthis.value = null;\n\t}\n};\n\nexport default group;","export function init(view){\n\tconst events = [\n\t\t{name:\"onSheetAdd\", type:\"insert\"},\n\t\t{name:\"onSheetRemove\", type:\"remove\"},\n\t\t{name:\"onSheetRename\", type:\"rename\"},\n\t\t{name:\"onCellChange\"},\n\t\t{name:\"onStyleChange\"},\n\t\t{name:\"onAction\"},\n\t\t{name:\"onRowOperation\"},\n\t\t{name:\"onColumnOperation\"},\n\t\t{name:\"onAfterConditionSet\"},\n\t\t{name:\"onAfterRangeSet\"},\n\t\t{name:\"onAfterSpan\"},\n\t\t{name:\"onAfterSplit\"},\n\t\t{name:\"onAfterFilter\", view: \"cells\"},\n\t\t{name:\"onRowResize\", view: \"cells\"},\n\t\t{name:\"onColumnResize\", view: \"cells\"}\n\t];\n\n\tlet thread;\n\tfor (let i = 0; i < events.length; i++){\n\t\tconst handler = events[i];\n\t\t(handler.view ? view.$$(handler.view) : view).attachEvent(handler.name, function(name, newName){\n\t\t\tif (view._loading_data) return;\n\n\t\t\tlet params;\n\t\t\tif(handler.type)\n\t\t\t\tparams = handler.type == \"rename\" ? [handler.type, newName, name] : [handler.type, name];\n\t\t\telse\n\t\t\t\tparams = [\"update\", view.getActiveSheet()];\n\n\t\t\tclearTimeout(thread);\n\t\t\tthread = webix.delay(() => view.callEvent(\"onChange\", params));\n\t\t});\n\t}\n\n\tview.attachEvent(\"onChange\", function(){\n\t\tsave(view, \"all\");\n\t});\n}\n\nexport function save(view, name, data){\n\tvar save = view.config.save;\n\tvar url;\n\tif (!save) return;\n\n\tif(name == \"all\"){\n\t\tif(!save.all)\n\t\t\treturn;\n\t\tdata = { data: view.serialize({ sheets: true }) };\n\t\turl = save.all;\n\t}\n\telse{\n\t\turl = typeof save === \"string\" ? save + \"/\" + name : save[name];\n\t}\n\n\turl = webix.proxy.$parse(url);\n\n\tif(url){\n\t\tif (typeof url === \"function\")\n\t\t\treturn url(name, data);\n\n\t\tif (url.$proxy && url.save)\n\t\t\treturn url.save(view, data, null, null);\n\n\t\tvar ajax = webix.ajax();\n\t\tif (name === \"all\")\n\t\t\tajax.headers({ \"Content-type\" : \"application/json\" });\n\t\tajax.post(url, data);\n\t}\n}","export const decode = {};\nexport const encode = {};\n\nconst alpha = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\nfunction indexToHeader(index){\n\tconst chars = alpha.length;\n\tconst quotient = Math.floor(--index / chars);\n\tif (quotient > 0)\n\t\treturn indexToHeader(quotient) + alpha[index % chars];\n\n\treturn alpha[index % chars];\n}\n\nexport function updateMaxColumn(maxColumn){\n\tconst lastColumn = Object.keys(encode).length;\n\n\tfor(let i = lastColumn + 1; i <= maxColumn; i++){\n\t\tlet str = indexToHeader(i);\n\n\t\tdecode[str] = i;\n\t\tencode[i] = str;\n\t}\n}\n\nexport function adress(text){\n\tconst size = (text.charCodeAt(1) < 59) ? 1 : 2;\n\tconst col = text.substr(0, size);\n\tconst row = text.substr(size);\n\n\treturn [row*1, decode[col]];\n}\n\nexport function range(text, view, page){\n\tconst nind = text.indexOf(\"!\");\n\tlet sheet = page || \"\";\n\n\t//parse sheet names\n\tif (nind !== -1){\n\t\tsheet = text.substr(0, nind);\n\t\tif (sheet[0] === \"'\")\n\t\t\tsheet = sheet.substr(1, sheet.length-2);\n\t\ttext = text.substr(nind+1);\n\t}\n\n\tlet parts = text.split(\":\");\n\tif (parts.length != 2){\n\t\tif(view){\n\t\t\tlet code = view.ranges.getCode(text, sheet);\n\t\t\tif(!code){\n\t\t\t\t// global named range\n\t\t\t\tcode = view.ranges.getCode(text, true);\n\t\t\t\tif(!code)\n\t\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst rangeParts = code.split(\"!\");\n\t\t\tif(rangeParts[0] != page || view.getActiveSheet())\n\t\t\t\tsheet = rangeParts[0].replace(/'/g,\"\");\n\t\t\tcode = rangeParts[1];\n\t\t\tparts = code.split(\":\");\n\t\t}\n\t\telse\n\t\t\treturn null;\n\t} \n\n\tconst d1 = adress(parts[0]);\n\tconst d2 = adress(parts[1]);\n\n\tif(d1[0] && d1[1] && d2[0] && d2[1])\n\t\treturn [d1[0], d1[1], d2[0], d2[1], sheet];\n}\n\n\nfunction escapeSheet(sheet){\n\treturn sheet.indexOf(\" \") == -1 ? sheet : `'${sheet}'`;\n}\n\nexport function toRange(x,y,x2,y2,sheet){\n\treturn (sheet?(escapeSheet(sheet)+\"!\"):\"\")+encode[y]+x+\":\"+encode[y2]+x2;\n}\nexport function toSheetRange(x,y,sheet){\n\treturn (sheet?(escapeSheet(sheet)+\"!\"):\"\")+x+\":\"+y;\n}\n\nexport function rangeObj(text, view){\n\tif (typeof text === \"object\") return text;\n\tconst a = range(text, view);\n\treturn { start:{ row:a[0], column:a[1]}, end:{ row:a[2], column:a[3] }, sheet: a[4] };\n}\n\nexport function eachRange(text, view, callback, data){\n\tconst range = rangeObj(text);\n\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\tfor (let column = range.start.column; column <=  range.end.column; column++) {\n\t\t\tcallback(view, {row: row, column: column}, data);\n\t\t}\n\t}\n}\n\nconst cellTest = /[A-Z]+[0-9]+/;\nexport function isRange(text){\n\tif(typeof text == \"string\"){\n\t\tconst cells = text.split(\":\");\n\t\tif(cells.length == 2){\n\t\t\tfor(let i = 0; i < cells.length; i++){\n\t\t\t\tconst parts = cells[i].split(\"!\");\n\t\t\t\tif(!cellTest.test(parts.pop()))\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n}\n\nexport function changeRange(text,name,inc,start){\n\tlet updated = false;\n\n\tif(isRange(text)){\n\t\tlet [r1,c1,r2,c2,sheet] = range(text);\n\n\t\t//ranges like B2:A1\n\t\tif(r1 > r2)\n\t\t\t[r1, r2] = [r2, r1];\n\t\tif(c1 > c2)\n\t\t\t[c1, c2] = [c2, c1];\n\n\t\tif (name === \"row\" && start.row <= r2){\n\t\t\tif((inc < 0 && start.row < r1) || (inc > 0 && start.row <= r1))\n\t\t\t\tr1 += inc;\n\t\t\tr2 += inc;\n\n\t\t\tif(r2<r1)\n\t\t\t\treturn \"\";\n\n\t\t\tupdated = true;\n\t\t}\n\t\telse if (name === \"column\" && start.column <= c2){\n\t\t\tif((inc < 0 && start.column < c1) || (inc > 0 && start.column <= c1))\n\t\t\t\tc1 += inc;\n\t\t\tc2 += inc;\n\n\t\t\tif(c2<c1)\n\t\t\t\treturn \"\";\n\n\t\t\tupdated = true;\n\t\t}\n\t\tif(updated)\n\t\t\ttext = toRange(r1,c1,r2,c2,sheet);\n\t}\n\n\treturn text;\n}","export const toolbarSizes = {\n\twidth:38,\n\tmargin: 7,\n\tpaddingY: 1,\n\tsectorPadding: 5,\n\tsectorMargin: 0\n};\n\n// default styles for toolbar elements\nexport const defaultStyles = {\n\t\"color\"         : \"#666666\",\n\t\"background\"    : \"#ffffff\",\n\t\"font-family\"   : \"'PT Sans', Tahoma\",\n\t\"font-size\" : \"15px\",\n\t\"text-align\": \"left\",\n\t\"vertical-align\": \"middle\",\n\t\"white-space\": \"nowrap\",\n};\n\nexport function setSkinDefaults(){\n\tconst skin = webix.skin.$name;\n\tconst material = skin == \"material\" || skin == \"mini\";\n\ttoolbarSizes.width = webix.skin.$active.inputHeight+2;\n\ttoolbarSizes.titleHeight = webix.skin.$name == \"mini\" ? 18 : 20;\n\n\tdefaultStyles[\"font-family\"] = material ? \"'Roboto', sans-serif\" : \"'PT Sans', Tahoma\";\n\n\tif(skin == \"contrast\"){\n\t\tdefaultStyles.background = \"#393939\";\n\t\tdefaultStyles.color = \"#ffffff\";\n\t}\n}","import group from \"./undo_group\";\nimport {save} from \"./save\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {defaultStyles} from \"../toolbar/defaults\";\n\n//do not change order, it will break server side compatibility\n//add new options to the end of this list\nexport const style_names = [\n\t\"color\",\"background\",\"text-align\",\n\t\"font-family\",\"font-size\",\n\t\"font-style\",\"text-decoration\",\"font-weight\",\n\t\"vertical-align\", \"wrap\", \"borders\", \"format\",\n\t\"border-right\", \"border-bottom\",\"border-left\", \"border-top\"\n];\n\nconst _style_map = {\n\t\"text-align\": {\n\t\tleft: () => \"justify-content:flex-start;\",\n\t\tcenter: () => \"justify-content:center;\",\n\t\tright: () => \"justify-content:flex-end;\"\t\t\n\t},\n\t\"vertical-align\": {\n\t\ttop: () => \"align-items:flex-start;\",\n\t\tmiddle: () => \"align-items:center;\",\n\t\tbottom: () => \"align-items:flex-end;\"\n\t},\n\twrap: {\n\t\twrap: ()=> {\n\t\t\treturn \"white-space: normal !important;\";\n\t\t}\n\t},\n\t\"border-left\": obj => {\n\t\treturn getBorderCss(\"border-left\", obj);\n\t},\n\t\"border-top\": obj => {\n\t\treturn getBorderCss(\"border-top\", obj);\n\t},\n\t\"border-right\": obj => {\n\t\treturn getBorderCss(\"border-right\", obj);\n\t},\n\t\"border-bottom\": obj => {\n\t\treturn getBorderCss(\"border-bottom\", obj);\n\t},\n\t\"font-weight\": obj => {\n\t\t//Roboto bold - font-weight:500 (looks better, than 700). Roboto is default font for material skins.\n\t\tif(obj[\"font-weight\"] == \"bold\"){\n\t\t\tconst family = obj[\"font-family\"] || defaultStyles[\"font-family\"];\n\t\t\treturn \"font-weight:\" + (family == \"'Roboto', sans-serif\" ? 500 : 700) + \";\";\n\t\t}\n\t\treturn \"\";\n\t}\n};\n\nfunction getBorderCss(pos, obj){\n\tlet border = obj[pos];\n\tif(border){\n\t\tlet [color, type] = border.split(\",\");\n\n\t\ttype = type || \"thin\";\n\t\tlet size = \"1px\";\n\t\tif(type == \"medium\")\n\t\t\tsize = \"2px\";\n\t\telse if(type == \"thick\" || type == \"double\")\n\t\t\tsize = \"3px\";\n\n\t\tif([\"thin\", \"medium\", \"thick\"].indexOf(type) != -1)\n\t\t\ttype = \"solid\";\n\n\t\treturn `${pos}: ${size} ${type} ${color} !important;`;\n\t}\n\treturn \"\";\n}\n\nconst border_checks = {\n\t\"border-left\":\t\tfunction(cell, area, mode){ return cell.column == area.start.column || mode ==\"no\"; },\n\t\"border-right\":\t\tfunction(cell, area, mode){ return cell.column == area.end.column || mode == \"all\" || mode ==\"no\"; },\n\t\"border-top\":\t\tfunction(cell, area , mode){ return cell.row == area.start.row || mode ==\"no\"; },\n\t\"border-bottom\":\tfunction(cell, area, mode){ return cell.row == area.end.row || mode == \"all\"|| mode ==\"no\"; }\n};\n\nconst _style_handlers = {\n\t\"borders\": function(view, style, value, cell){\n\t\tconst area = view.$$(\"cells\").getSelectArea();\n\t\tvalue = value.split(\",\");\n\t\tconst type = value[0];\n\t\tlet color = value[1];\n\t\tlet lineStyle = value[2];\n\n\t\tvar modes = [\"border-left\", \"border-right\", \"border-bottom\", \"border-top\"];\n\n\t\tif(type == \"top-bottom\"){\n\t\t\tmodes = [\"border-top\",\"border-bottom\"];\n\t\t}\n\t\telse if (type != \"no\" && type != \"all\" && type != \"outer\")\n\t\t\tmodes = [\"border-\"+type];\n\n\t\tfor (var i = 0; i < modes.length; i++){\n\t\t\tvar mode = modes[i];\n\t\t\tlet result = view.callEvent(\"onAction\", [\"check-borders\", {row:cell.row, column:cell.column, area, type, mode}]);\n\t\t\tif (result === true || border_checks[mode](cell, area, type)){\n\t\t\t\tconst border = type == \"no\" ? \"\" : `${color},${lineStyle}`;\n\t\t\t\tstyle = _updateStyle(view, style, mode, border, cell);\n\t\t\t}\n\t\t}\n\t\treturn style;\n\t}\n};\n\nvar sizeEl;\nexport function init(view){\n\tview.attachEvent(\"onStyleSet\", (name, value) => _applyStyles(view, name, value));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data) => _serialize(view, data));\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, style) => {\n\t\tif(type == \"style\")\n\t\t\t_undoStyle(view, row, column, style);\n\t});\n\n\treset(view);\n\n\tif (!sizeEl)\n\t\tsizeEl = webix.html.create(\"DIV\", { style:\"visibility:hidden; position:absolute; top:0px; left:0px; height:auto;\"}, \"\");\n}\n\nfunction reset(view){\n\tview._styles = {};\n\tview._styles_cache = {};\n\tview._styles_max = 1;\n\n\tlet prefix = \".wss_\"+view.$index;\n\twebix.html.removeStyle(prefix);\n}\n\nexport function getStyle(view, cell){\n\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\n\tif(span){\n\t\tconst spanStyles = span[5].split(\" \");\n\t\tfor (let i = 0; i < spanStyles.length; i++){\n\t\t\tconst spanStyle = view._styles[spanStyles[i]];\n\t\t\tif(spanStyle)\n\t\t\t\treturn spanStyle;\n\t\t}\n\t}\n\n\tif (obj && obj.style)\n\t\treturn view._styles[obj.style];\n\n\treturn null;\n}\n\nexport function getFormat(view, row, column){\n\tvar obj = view._mPage.getCell(row-1, column-1);\n\treturn (obj && obj.format) || \"\";\n}\n\n// undo\nfunction _undoStyle(view, row, column, style){\n\tvar cell = {row: row, column: column};\n\tsetStyle(view, cell, style);\n}\n\nfunction _serialize(view, obj){\n\tvar styles = [];\n\n\tfor (var key in view._styles_cache)\n\t\tstyles.push([view._styles_cache[key].id, key]);\n\n\tobj.styles = styles;\n}\n\nexport function addStyle(view, props, origin){\n\tvar style = {\n\t\tprops:styleFromText(\";;;;;;;;;;;;;;;\")\n\t};\n\n\tif (origin)\n\t\tfor (var key in origin.props)\n\t\t\tstyle.props[key] = origin.props[key];\n\n\tfor (let  key in props)\n\t\tstyle.props[key] = props[key];\n\n\n\tstyle.text = _styleToText(style);\n\tvar cache = view._styles_cache[style.text];\n\tif (cache)\n\t\treturn cache;\n\n\t_addStyle(view, style);\n\n\treturn style;\n}\n\nfunction _parse(view, obj){\n\tif (obj.styles)\n\t\tfor (let i=0; i < obj.styles.length; i++){\n\t\t\tvar styleObj = obj.styles[i];\n\t\t\tvar style = {\n\t\t\t\tid: styleObj[0],\n\t\t\t\ttext:styleObj[1],\n\t\t\t\tprops: styleFromText(styleObj[1])\n\t\t\t};\n\n\t\t\t_addStyle(view, style, true);\n\t\t}\n\n\tfor (let i = 0; i < obj.data.length; i++){\n\t\tvar [row, column, , css] = obj.data[i];\n\n\t\tif (css)\n\t\t\tupdate_style_data(view, row, column, view._styles[css]);\n\t}\n}\n\nfunction _applyStyles(view, name, value){\n\tgroup.set(function(){\n\t\tview.eachSelectedCell(function(cell){\n\t\t\t_applyCellStyles(view, cell, name, value);\n\t\t});\n\t});\n\tview.refresh();\n}\n\nfunction _applyCellStyles(view, cell, name, value){\n\tvar ostyle = getStyle(view, cell);\n\tvar nstyle = _updateStyle(view, ostyle, name, value, cell);\n\n\tif (nstyle && nstyle != ostyle)\n\t\t_setStyle(view, cell, nstyle, ostyle);\n}\n\nfunction _updateStyle(view, style, name, value, cell){\n\n\tif(_style_handlers[name]){\n\t\treturn _style_handlers[name](view, style, value, cell);\n\t}\n\n\tif (style && style.props[name] == value) return style;\n\n\tvar nstyle = { text:\"\", id:0, props: (style?webix.copy(style.props):{}) };\n\tnstyle.props[name] = value;\n\tnstyle.text = _styleToText(nstyle);\n\n\tvar cache = view._styles_cache[nstyle.text];\n\tif (cache)\n\t\treturn cache;\n\n\t_addStyle(view,nstyle);\n\n\treturn nstyle;\n}\n\nfunction update_style_data(view, row, column, style){\n\tconst obj = view._mPage.getCell(row-1, column-1, true);\n\tobj.style = style && style.id;\n\tobj.format = style && style.props.format;\n}\n\nexport function setStyle(view, cell, style){\n\tvar old = getStyle(view, cell);\n\treturn _setStyle(view, cell, style, old);\n}\n\nexport function setRangeStyle(view, range, style) {\n\teachRange(range, view, _setStyle, style);\n}\n\nexport function getTextSize(view, text, css, baseWidth){\n\tsizeEl.innerHTML = text;\n\tsizeEl.style.width = baseWidth ? baseWidth+\"px\" : \"auto\";\n\n\tsizeEl.className = \"webix_table_cell webix_cell \"+css;\n\tview._table.$view.appendChild(sizeEl);\n\n\tconst width = Math.max(0, sizeEl.offsetWidth+1);\n\tconst height = Math.max(0, sizeEl.offsetHeight+1);\n\n\tview._table.$view.removeChild(sizeEl);\n\tsizeEl.innerHTML = \"\";\n\n\treturn { width, height };\n}\n\nfunction _setStyle(view, cell, style, old){\n\tif(view.callEvent(\"onBeforeStyleChange\", [cell.row, cell.column, style, old])){\n\t\tgroup.set(()=>{\n\t\t\tconst format = style && style.props.format || null;\n\t\t\tconst oldFormat = old && old.props.format || null;\n\t\t\tconst formatChanged = format != oldFormat;\n\t\t\tif(!formatChanged || formatChanged && view.callEvent(\"onBeforeFormatChange\", [cell.row, cell.column, format, oldFormat])){\n\t\t\t\tupdate_style_data(view, cell.row, cell.column, style);\n\t\t\t\tview.callEvent(\"onStyleChange\", [cell.row, cell.column, style, old]);\n\n\t\t\t\tif(formatChanged)\n\t\t\t\t\tview.callEvent(\"onFormatChange\", [cell.row, cell.column, format, oldFormat]);\n\n\t\t\t\tview.saveCell(cell.row,cell.column);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction _buildCssString(style) {\n\tlet css = \"\";\n\n\tfor (var key in style){\n\t\tif (style[key]){\n\t\t\tif( _style_map[key]){\n\t\t\t\tif(_style_map[key][style[key]])\n\t\t\t\t\tcss += _style_map[key][style[key]](style);\n\t\t\t\telse if(typeof  _style_map[key] == \"function\")\n\t\t\t\t\tcss += _style_map[key](style);\n\t\t\t}\n\t\t\telse\n\t\t\t\tcss+= key+\":\"+style[key]+\";\";\n\t\t}\n\t}\n\n\treturn css;\n}\n\nfunction _addStyle(view, style, silent){\n\tview._styles_cache[style.text] = style;\n\n\twhile (!style.id || view._styles[style.id])\n\t\tstyle.id = \"wss\"+(view._styles_max++);\n\tview._styles[style.id] = style;\n\n\tconst css = _buildCssString(style.props);\n\tlet prefix = \".wss_\"+view.$index;\n\twebix.html.addStyle(prefix+\" .\"+style.id+\"{\"+css+\"}\", prefix);\n\n\tif (!silent)\n\t\tsave(view, \"styles\", { name:style.id, text: style.text } );\n}\n\nfunction _styleToText(style){\n\tvar id = [];\n\tfor (var i=0; i<style_names.length; i++)\n\t\tid.push(style.props[style_names[i]]);\n\treturn id.join(\";\");\n}\n\nexport function styleFromText(text){\n\tvar parts = text.split(\";\");\n\tvar props = {};\n\tfor (var i=0; i<style_names.length; i++)\n\t\tprops[style_names[i]] = parts[i];\n\treturn props;\n}\n\n\n\nexport function clearRangeStyle(view, range){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tlet style = getStyle(view,cell);\n\t\t\tif (style)\n\t\t\t\tsetStyle(view, cell, null);\n\t\t});\n\t});\n}\n\nexport function compactStyles(view){\n\tconst serialized = view.serialize();\n\tserialized.styles = removeUnusedStyles(serialized);\n\n\treset(view);\n\t_parse(view, serialized);\n}\n\nexport function removeUnusedStyles(serialized){\n\tconst data = serialized.data;\n\tconst styles = serialized.styles;\n\n\tconst used = {};\n\tfor (let i=0; i<data.length; i++){\n\t\tconst name = data[i][3];\n\t\tif (name)\n\t\t\tused[name] = 1;\n\t}\n\n\tconst newStyles = [];\n\tfor(let i = 0; i<styles.length; i++){\n\t\tconst name = styles[i][0];\n\t\tif (used[name])\n\t\t\tnewStyles.push(styles[i]);\n\t}\n\n\treturn newStyles;\n}","import {addStyle, styleFromText} from \"./styles\";\nimport {getJsDateFromExcel} from \"../mathematics/methods\";\nimport group from \"./undo_group\";\n\nexport function init(view){\n\tview.attachEvent(\"onDataParse\", (data) => load(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => serialize(view, data, config));\n}\n\nexport let formatHelpers = {};\nexport let currencies = [];\n\nlet formats;\nlet formatsCount;\nlet formatSources;\nlet formatCache;\n\nfunction getCurrencySymbol(format){\n\treturn webix.template(format)(\"\");\n}\n\nexport function setDefaultFormats(){\n\tconst formatsLocale = webix.i18n.spreadsheet.formats;\n\n\tcurrencies = [ webix.i18n.price ];\n\tcurrencies = currencies.concat(webix.copy(formatsLocale.currencies));\n\n\tcurrencies = currencies.map(format => {\n\t\tconst id = getCurrencySymbol(format);\n\t\treturn {\n\t\t\tformat,\n\t\t\tid,\n\t\t\tvalue: id.trim()\n\t\t};\n\t});\n\n\tformats = {};\n\tformatsCount = 0;\n\tformatSources = {};\n\tformatCache = {};\n\tformatHelpers = {\n\t\tprice : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_price\";\n\t\t\t\treturn webix.i18n.priceFormat(value);\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: webix.i18n.priceSettings.decimalSize, \n\t\t\t\tsymbol: webix.i18n.priceFormat(\"\"),\n\t\t\t\tseparator: 1, negative:1, type: \"price\"\n\t\t\t}, getDelimiters(\"price\"))\n\t\t},\n\t\t\"int\" : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_int\";\n\t\t\t\treturn webix.i18n.numberFormat(value);\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: webix.i18n.decimalSize,\n\t\t\t\tseparator: 1, negative:1, type: \"int\",\n\t\t\t}, getDelimiters(\"int\"))\n\t\t},\n\t\tpercent : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_percent\";\n\t\t\t\treturn Math.round(value*100)+\"%\";\n\t\t\t},\n\t\t\tvalues:webix.extend({\n\t\t\t\tzeros: 0, separator: 0, negative:1, type: \"percent\",\n\t\t\t}, getDelimiters(\"percent\"))\n\t\t},\n\t\tdate : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_date\";\n\t\t\t\treturn format2code(formatsLocale.dateFormat, getDelimiters(\"date\"))(value);\n\t\t\t},\n\t\t\tvalues: { type:\"date\", date:formatsLocale.dateFormat }\n\t\t},\n\t\tstring : {\n\t\t\tgetFormat : function(value, extra){\n\t\t\t\textra.css = \"webix_ssheet_format_text\";\n\t\t\t\treturn value;\n\t\t\t},\n\t\t\tvalues: { type:\"string\" }\n\t\t}\n\t};\n\n\tfor(let i in formatHelpers){\n\t\tformatSources[i] = serializeFormat(formToValues(i, formatHelpers[i].values));\n\t\tformatCache[formatSources[i]] = i;\n\t}\n}\n\nexport function getDelimiters(type){\n\tif(type == \"price\")\n\t\treturn { groupSign:webix.i18n.priceSettings.groupDelimiter, decimalSign:webix.i18n.priceSettings.decimalDelimiter };\n\telse \n\t\treturn { groupSign:webix.i18n.groupDelimiter, decimalSign:webix.i18n.decimalDelimiter };\n}\n\nfunction serialize(view, data){\n\tconst formats = [];\n\tconst defaultFormats = [\"percent\", \"int\", \"price\", \"date\", \"string\"];\n\n\tfor(let i in formatSources){\n\t\tif(defaultFormats.indexOf(i) == -1) //exclude default formats\n\t\t\tformats.push([i,formatSources[i]]);\n\t}\n\tdata.formats = formats;\n}\n\nfunction load(view,data){\n\tvar i,\n\t\tformats = data.formats;\n\n\tif(formats)\n\t\tfor(i = 0; i < formats.length; i++)\n\t\t\tcreateFormatName(formats[i][1],formats[i][0]);\n}\n\nexport function getFormat(name){\n\treturn formatHelpers[name] ? formatHelpers[name].getFormat : formatHelpers[name];\n}\n\nexport function getFormatSource(name, toexcel){\n\tif(toexcel){\n\t\tlet parsed = parseFormat({values: formatHelpers[name].values, format: formatSources[name]});\n\t\treturn serializeFormat(parsed, true);\n\t}\n\telse\n\t\treturn formatSources[name];\n}\n\nfunction createFormatName(str, values){\n\tif (formatCache[str]) return formatCache[str];\n\n\tlet name = typeof(values) == \"object\" ? \"fmt\"+(formatsCount) : values;\n\tformatsCount++;\n\n\tformats[name] = str;\n\n\tif(typeof(values) == \"string\")\n\t\tvalues = formatToForm(str);\n\n\twebix.extend(\n\t\tvalues,\n\t\tgetDelimiters(\"custom\")\n\t);\n\n\tformatHelpers[name] = {\n\t\tgetFormat:format2code(str, {decimalSign: values.decimalSign, groupSign: values.groupSign}),\n\t\tvalues: values\n\t};\n\n\tformatSources[name] = str;\n\tformatCache[str] = name;\n\n\treturn name;\n}\n\nexport function addFormat(view, row, column, format, type){\n\tif(!type)\n\t\ttype = {format:format, type: \"custom\"};\n\tconst old = view.getStyle(row, column);\n\tconst nev = addStyle(view, { format:createFormatName(format, type) }, old);\n\tview.setStyle(row, column, nev);\n}\n\nexport function removeFormat(view, row, column){\n\tconst old = view.getStyle(row, column);\n\tconst nev = addStyle(view, { format:\"\" }, old);\n\tview.setStyle(row, column, nev);\n}\n\nfunction splitFormat(str){\n\tvar conditional = str.match(/.*\\[[><=].*/g);\n\tvar parts = str.split(\";\");\n\tif (!conditional){\n\t\tif (parts.length > 1){\n\t\t\tparts[0] = (parts.length > 2 ? \"[>0]\" : \"[>=0]\")+parts[0];\n\t\t\tparts[1] = \"[<0]\"+parts[1];\n\t\t\tif (parts[2])\n\t\t\t\tparts[2] = \"[=0]\"+parts[2];\n\t\t}\n\t}\n\treturn parts;\n}\n\nexport function format2code(str, delimiters){\n\tconst errorMessage = webix.i18n.spreadsheet.table[\"format-error\"];\n\tlet parts = splitFormat(str);\n\tlet code = [\"var spaces = \\\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\\";\"];\n\tfor (var i=0; i<parts.length; i++){\n\t\tvar separated = separateFmt(parts[i]);\n\t\tcode.push(genCode(separated.condition, separated.color.toLowerCase(), separated.symbol, separated.fmt, i, parts.length > 0, delimiters));\n\t}\n\n\treturn new Function(\"val\",\"extra\", `try{ ${code.join(\"\\n\")} return val; } catch(err) { return \"${errorMessage}\"; }`);\n}\n\nfunction genCode(check, color, symbol, line, ind, isAbs, delimiters){\n\tvar str = \"\";\n\tif (check){\n\t\tif (!ind) str+=\"if\"; else str+=\"else if\";\n\t\tif (check[0] === \"=\") check = \"=\"+check;\n\t\tstr+=\"(val\"+check+\"){\";\n\t\tif (isAbs) str+=\"val = Math.abs(val);\";\n\t}\n\tif (color)\n\t\tstr+=\"extra.css = \\\"webix_ssheet_format_\"+color+\"\\\";\";\n\n\tstr += genFormatCode(line, delimiters, symbol);\n\n\treturn str+(check?\"}\":\"\");\n}\n\nconst dateTypes = {\n\t\"yy\": \"%y\",\n\t\"yyyy\": \"%Y\",\n\t\"m\": \"%n\",\n\t\"mm\": \"%m\",\n\t\"mmm\": \"%M\",\n\t\"mmmm\": \"%F\",\n\t\"mmmmm\":\"%F\", //not supported by webix\n\t\"d\": \"%j\",\n\t\"dd\": \"%d\",\n\t\"ddd\": \"%D\",\n\t\"dddd\": \"%l\"\n};\n\nconst timeTypes = {\n\t\"h\": \"%G\",\n\t\"hh\": \"%H\",\n\t\"m\": \"%i\", //not supported by webix\n\t\"mm\": \"%i\",\n\t\"s\": \"%s\", //not supported by webix\n\t\"ss\": \"%s\",\n\t\"AM/PM\": \"%A\"\n};\n\nconst dateOrder = Object.keys(dateTypes).sort((a, b) => b.length - a.length);\nconst timeOrder = Object.keys(timeTypes).sort((a, b) => b.length - a.length);\n\nfunction excelDateToWebix(text, lastDateType){\n\tconst typesOrder = [\n\t\t{name:\"date\", order:dateOrder, types:dateTypes}, \n\t\t{name:\"time\", order:timeOrder, types:timeTypes}\n\t];\n\n\t// \"m\"/\"mm\" format can be either date (%n/%m) or time (%i), so check last date type\n\tconst basedOnLast = /^m{1,2}(?!m)/.test(text);\n\tif(basedOnLast && lastDateType != \"date\")\n\t\ttypesOrder.reverse();\n\n\tfor(let i = 0; i < typesOrder.length; i++){\n\t\tconst type = typesOrder[i];\n\t\tfor(let j = 0; j < type.order.length; j++)\n\t\t\tif(text.indexOf(type.order[j]) == 0)\n\t\t\t\treturn {\n\t\t\t\t\tformat: type.types[type.order[j]],\n\t\t\t\t\tlength: type.order[j].length,\n\t\t\t\t\ttype: type.name\n\t\t\t\t};\n\t}\n}\n\nfunction genFormatCode(line, delimiters, symbol){\n\tif (!line)\n\t\treturn \"return val;\";\n\n\tlet str = \"return \\\"\\\"\";\n\n\tlet isQuote;\n\tlet fmt = \"\";\n\tlet multiply = 1;\n\tlet comma, numberPlaceholder, textPlaceholder;\n\tlet date = [];\n\tlet lastDateType = \"date\";\n\n\tlet symbolPos;\n\tif(symbol){\n\t\tconst currency = currencies.find(val => val.id == symbol);\n\t\tsymbolPos = \"left\";\n\n\t\tif(currency)\n\t\t\tsymbolPos = currency.format.split(\"{obj}\").findIndex(val => val) ? \"right\" : \"left\";\n\t}\n\n\tfor (var i=0; i<line.length; i++){\n\t\tvar betweenPlaceholders = placeholder(line[i-1])&&placeholder(line[i+1]);\n\t\tif (line[i] == \"\\\"\"){\n\t\t\tif(webix.isUndefined(isQuote))\n\t\t\t\tisQuote = i;\n\t\t\telse {\n\t\t\t\tstr += `+\"${line.substr(isQuote+1, i-isQuote-1)}\"`;\n\t\t\t\tisQuote = undefined;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (!webix.isUndefined(isQuote))\n\t\t\tcontinue;\n\t\tif(line[i] == \"%\")\n\t\t\tmultiply = multiply*100;\n\n\t\tif(/[a-zA-Z]/.test(line[i])){\n\t\t\tconst datePart = excelDateToWebix(line.substr(i), lastDateType);\n\t\t\tif(datePart){\n\t\t\t\tif(numberPlaceholder || textPlaceholder)\n\t\t\t\t\treturn \"throw \\\"unexpected number placeholder\\\";\";\n\t\t\t\tdate.push(datePart.format);\n\t\t\t\tstr += \"/*date*/\"; //update this value after date format is ready\n\t\t\t\tlastDateType = datePart.type;\n\t\t\t\ti += datePart.length-1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse\n\t\t\t\tstr += `+\"${line[i]}\"`;\n\t\t}\n\t\telse if (line[i] === delimiters.decimalSign && betweenPlaceholders){\n\t\t\tfmt+= delimiters.decimalSign;\n\t\t}\n\t\telse if(line[i]==\"@\"){\n\t\t\tif(numberPlaceholder || date.length)\n\t\t\t\treturn \"throw \\\"unexpected number placeholder\\\";\";\n\t\t\tif(!textPlaceholder){\n\t\t\t\tstr+=\"+fmt\";\n\t\t\t\ttextPlaceholder = true;\n\t\t\t}\n\t\t\tfmt+=line[i];\t\t\n\t\t}\n\t\telse if (placeholder(line[i])){\n\t\t\tif(textPlaceholder || date.length)\n\t\t\t\treturn \"throw \\\"unexpected text placeholder\\\";\";\n\t\t\tif (!numberPlaceholder) {\n\t\t\t\tif(symbolPos == \"left\")\n\t\t\t\t\tstr += `+\"${symbol}\"`;\n\t\t\t\tstr+=\"+fmt\";\n\t\t\t\tif(symbolPos == \"right\")\n\t\t\t\t\tstr += `+\"${symbol}\"`;\n\t\t\t\tnumberPlaceholder=true;\n\t\t\t}\n\t\t\tfmt+=line[i];\n\t\t}\n\t\telse if (line[i] === delimiters.groupSign && betweenPlaceholders)\n\t\t\tcomma = true;\n\t\telse\n\t\t\tstr += `+\"${line[i]}\"`;\n\t}\n\n\tif(date.length){\n\t\t// 12-hour or 24-hour clock depends on AM/PM in format\n\t\tif(date.indexOf(\"%A\") != -1)\n\t\t\tdate = date.map(datePart => {\n\t\t\t\tswitch(datePart){\n\t\t\t\t\tcase \"%G\": return \"%g\";\n\t\t\t\t\tcase \"%H\": return \"%h\";\n\t\t\t\t\tdefault: return datePart;\n\t\t\t\t}\n\t\t\t});\n\n\t\tfor(let i = 0; i < date.length; i++)\n\t\t\tstr = str.replace(\"/*date*/\", `+dateParts[${i}]`);\n\t}\n\n\treturn `\n\t\t${date.length ? `val = (${getJsDateFromExcel})(val); var dateParts = webix.Date.dateToStr(\"${date.join(\";\")}\")(val).split(\";\");` : \"\"}\n\t\t${fmt ? `${numberFormat(fmt, comma, delimiters, multiply)};` : \"\"}\n\t\t${str};`;\n}\n\nfunction numberFormat(fmt, comma, delimiters, multiply){\n\tvar str = `if(/^@+$/.test(\"${fmt}\") || isNaN(val)){ var fmt = val; }else {`;\n\tvar decimal = delimiters.decimalSign;\n\tvar [left, right] = getParts(fmt, decimal);\n\tright = (right || \"\").split(\"\").reverse().join(\"\");\n\n\t//calculate indexes in mask\n\tvar lzeros = left.indexOf(\"0\"); if (lzeros>=0) lzeros = left.length - lzeros;\n\tvar lfills = left.indexOf(\"?\"); if (lfills>=0) lfills = left.length - lfills;\n\tvar rzeros = right.indexOf(\"0\"); if (rzeros>=0) rzeros = right.length - rzeros;\n\tvar rfills = right.indexOf(\"?\"); if (rfills>=0) rfills = right.length - rfills;\n\tvar rmax = right.length;\n\n\tstr += `\n\tval = val*${multiply};\n\tvar parts = val.toFixed(${rmax}).split(\".\");\n\tvar left = parts[0];\n\tvar lsize = left.length; \n\tvar right = parts[1] || \"\";\n\tif (left.length < ${lzeros}) left = \"0000000000\".substr(0, ${lzeros} - left.length)+left;\n\tif (left.length < ${lfills}) left = spaces.substr(0, 6*(${lfills} - left.length))+left;\n\tif (${comma}) {\n\t\tvar buf = [];\n\t\tvar start = 3;\n\t\twhile (lsize > start) { buf.push(left.substr(left.length-start,3)); start+=3; }\n\t\tvar last = left.substr(0,left.length-start+3);\n\t\tif (last !== \"-\")\n\t\t\tbuf.push(last);\n\t\telse\n\t\t\tbuf.push(\"-\"+buf.pop());\n\n\t\tleft = buf.reverse().join(\"${delimiters.groupSign}\");\n\t}\n\tif (right){\n\t\tvar zpoint = right.length-1;\n\t\twhile (zpoint >= ${rzeros}){\n\t\t\tif (right[zpoint] !== \"0\"){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tzpoint--;\n\t\t}\n\n\t\tif (zpoint <= right.length)\n\t\t\tright = right.substr(0, zpoint+1);\n\n\t\tif (right.length < ${rfills}){\n\t\t\tright += spaces.substr(0, 6*(${rfills} - right.length));\n\t\t}\n\t}\n\tvar fmt = left+(right?\"${decimal}\":\"\")+right;\n\t`;\n\n\treturn str+\"}\\n\";\n}\n\nfunction updateDecimals(fmt, inc, val){\n\tlet parsed = parseFormat(fmt);\n\tfor(let i = 0; i < parsed.length; i++){\n\t\tif(parsed[i].decimals){\n\t\t\tif(inc>0)\n\t\t\t\tparsed[i].right.placeholders += Array(inc+1).join(\"0\");\n\t\t\telse\n\t\t\t\tparsed[i].right.placeholders = parsed[i].right.placeholders.slice(0, inc);\n\t\t}\n\t\telse{\n\t\t\tconst withoutText = !parsed[i].left.text && !parsed[i].right.text;\n\t\t\tconst withoutPlaceholders = !parsed[i].left.placeholders && !parsed[i].right.placeholders;\n\t\t\t//check if cell value have decimals (not cell format)\n\t\t\tif(inc < 0 && withoutText && withoutPlaceholders && webix.rules.isNumber(val) && val.indexOf(\".\") > -1){\n\t\t\t\tparsed[i].left.placeholders = \"0\";\n\t\t\t\tparsed[i].right.placeholders = Array(val.split(\".\")[1].length).join(Array(inc+1).join(\"0\"));\n\t\t\t}\n\t\t\t//ignore text\n\t\t\telse if(inc > 0 && (parsed[i].left.placeholders || withoutText)){\n\t\t\t\tparsed[i].left.placeholders = parsed[i].left.placeholders || \"0\";\n\t\t\t\tparsed[i].right.placeholders = Array(inc+1).join(\"0\");\n\t\t\t\tparsed[i].decimals = true;\n\t\t\t}\n\t\t}\n\t\tparsed[i].decimals = parsed[i].right.placeholders.length > 0;\n\t}\n\n\treturn serializeFormat(parsed);\n}\n\nexport function changeAreaDecimals(view, inc, row, column){\n\tlet cells = getCells(view, row, column);\n\tif(cells.length == 0)\n\t\treturn;\n\n\tconst obj = view._mPage.getCell(cells[0].row-1, cells[0].column-1);\n\tconst oldFormat = obj && obj.format;\n\tconst value = (obj && obj.value) ? obj.value.toString() : \"\";\n\t\n\tif(webix.rules.isNumber(value) || oldFormat){\n\t\tgroup.set(function(){\n\t\t\tfor(let i = 0; i < cells.length; i++)\n\t\t\t\tchangeCellDecimals(view, inc, cells[i]);\n\t\t});\n\t\tview.refresh();\n\n\t\tlet format = getFormatName(view, cells[0].row, cells[0].column) || \"common\";\n\t\tformat = isCustom(format) ? \"custom\" : format;\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:format}]);\n\t}\n}\n\nexport function changeCellDecimals(view, inc, cell){\n\tlet format;\n\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\tconst oldFormat = obj && obj.format;\n\tconst value = (obj && obj.value) ? obj.value.toString() : \"\";\n\n\tif(oldFormat){\n\t\tformat = webix.copy({values:formatHelpers[oldFormat].values, format:getFormatSource(oldFormat)});\n\t\tformat.format = updateDecimals(format, inc, value);\n\n\t\tif(format.values && format.values.hasOwnProperty(\"zeros\"))\n\t\t\tformat.values.zeros = Math.max(format.values.zeros+inc, 0);\n\t}\n\t//add format for cell without format\n\telse{\n\t\tconst zeros = webix.rules.isNumber(value) && value.split(\".\")[1] ? Math.max(value.split(\".\")[1].length+inc, 0) : Math.max(inc, 0);\n\n\t\tformat = {values:{negative:1, zeros:zeros, separator:0, type:\"int\"}};\n\t\tformat.format = serializeFormat(formToValues(format.values.type, format.values));\n\t}\n\taddFormat(view, cell.row, cell.column, format.format, format.values);\n}\n\nexport function isCustom(name){\n\treturn name != \"common\" && (name.indexOf(\"fmt\") != -1 || formatHelpers[name].values.type == \"custom\");\n}\n\nexport function formToValues(type, formValues){\n\tif(type == \"string\")\n\t\treturn [{left:{text:\"@\"}}];\n\tif(formValues.date)\n\t\treturn [{left:{text:formValues.date}}];\n\n\tlet values = [{condition:\">=0\", left:{text:\"\"},right:{text:\"\"}}, {condition:\"<0\", left:{text:\"\"}, right:{text:\"\"}}];\n\twebix.extend(values, getDelimiters(type));\n\tvalues[0].right.placeholders = values[1].right.placeholders = formValues.zeros ? Array(formValues.zeros + 1).join(\"0\") : \"\";\n\tvalues[0].separator = values[1].separator = formValues.separator && type != \"percent\";\n\tvalues[0].left.placeholders = values[1].left.placeholders = values[0].separator ? \"#\"+values.groupSign +\"0\" : \"0\";\n\tvalues[0].decimals = values[1].decimals = formValues.zeros ? true : false;\n\tvalues[1].color = formValues.negative != 1 ? \"red\" : \"\";\n\tvalues[1].left.text += formValues.negative < 3 ? \"-\" : \"\";\n\tif(formValues.negative == 4)\n\t\tvalues[1].left.text += \"(\";\n\n\tif(type === \"percent\")\n\t\tvalues[0].right.text = values[1].right.text += \"%\";\n\telse if(type === \"price\"){\n\t\tconst symbolId = formValues.symbol;\n\t\tconst currency = currencies.find(val => val.id == symbolId);\n\t\tconst pos = currency.format.split(\"{obj}\").findIndex(val => val) ? \"right\" : \"left\";\n\n\t\tvalues[0][pos].symbol = values[1][pos].symbol = symbolId;\n\t}\n\n\tif(formValues.negative == 4)\n\t\tvalues[1].right.text += \")\";\n\n\treturn values;\n}\n\nfunction formatToForm(format){\n\tconst formatsLocale = webix.i18n.spreadsheet.formats;\n\tconst dates = [\n\t\tformatsLocale.dateFormat,\n\t\tformatsLocale.timeFormat,\n\t\tformatsLocale.fullDateFormat,\n\t\tformatsLocale.longDateFormat\n\t];\n\tconst form = {format, type:\"custom\"};\n\n\tif(dates.find(date => date == format)){\n\t\twebix.extend(form, {\n\t\t\ttype:\"date\", date:format\n\t\t}, true);\n\t}\n\telse{\n\t\tlet [first, second] = format.split(\";\");\n\t\tif(first && second){\n\t\t\tif(first.indexOf(\"[>=0]\") == 0 && second.indexOf(\"[<0]\") == 0){\n\t\t\t\tfirst = first.replace(\"[>=0]\", \"\");\n\t\t\t\tsecond = second.replace(\"[<0]\", \"\");\n\n\t\t\t\tlet red;\n\t\t\t\tif(second.indexOf(\"[red]\") == 0){\n\t\t\t\t\tsecond = second.replace(\"[red]\", \"\");\n\t\t\t\t\tred = true;\n\t\t\t\t}\n\n\t\t\t\tif(second[0] == \"-\"){\n\t\t\t\t\tsecond = second.substring(1);\n\t\t\t\t\tform.negative = red ? 2 : 1;\n\t\t\t\t}\n\t\t\t\telse if(red){\n\t\t\t\t\tif(second[0] == \"(\" && second[second.length-1] == \")\"){\n\t\t\t\t\t\tform.negative = 4;\n\t\t\t\t\t\tsecond = second.substring(1, second.length-1);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tform.negative = 3;\n\t\t\t\t}\n\n\t\t\t\tif(form.negative && first == second){\n\t\t\t\t\tlet type = \"int\";\n\t\t\t\t\tlet priceBrackets = first.indexOf(\"[$\") != -1;\n\n\t\t\t\t\tif(first[first.length-1] == \"%\"){\n\t\t\t\t\t\tfirst = first.substring(0, first.length-1);\n\t\t\t\t\t\ttype = \"percent\";\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tfor(let i = 0; i < currencies.length; i++){\n\t\t\t\t\t\t\tconst currency = currencies[i].id;\n\t\t\t\t\t\t\tlet isPrice;\n\n\t\t\t\t\t\t\tif(priceBrackets){\n\t\t\t\t\t\t\t\tif(first.indexOf(`[$${currency}]`) != -1){\n\t\t\t\t\t\t\t\t\tfirst = first.replace(`[$${currency}]`, \"\");\n\t\t\t\t\t\t\t\t\tisPrice = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(first.indexOf(currency) != -1){\n\t\t\t\t\t\t\t\tfirst = first.replace(currency, \"\");\n\t\t\t\t\t\t\t\tisPrice = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(isPrice){\n\t\t\t\t\t\t\t\ttype = \"price\";\n\t\t\t\t\t\t\t\tform.symbol = currency;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst delimiters = getDelimiters(type);\n\n\t\t\t\t\tif(first.indexOf(\"#\"+delimiters.groupSign) == 0){\n\t\t\t\t\t\tfirst = first.replace(\"#\"+delimiters.groupSign, \"\");\n\t\t\t\t\t\tform.separator = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst [integer, decimal] = first.split(delimiters.decimalSign);\n\t\t\t\t\tif((!integer || integer == \"0\") && (!decimal || /^[0]+$/.test(decimal))){\n\t\t\t\t\t\tform.type = type;\n\t\t\t\t\t\tform.delimiters = delimiters;\n\t\t\t\t\t\tform.zeros = decimal ? decimal.length : 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn form;\n}\n\nexport function serializeFormat(values, toExcel){\n\tlet fmt = \"\";\n\tfor(let i = 0; i < values.length; i++){\n\t\tif(values[i].condition)\n\t\t\tfmt += \"[\"+values[i].condition+\"]\";\n\t\tif(values[i].color)\n\t\t\tfmt += \"[\"+values[i].color+\"]\";\n\n\t\tif(values[i].left){\n\t\t\tif(values[i].left.text){\n\t\t\t\tlet leftText = values[i].left.text;\n\t\t\t\tfmt += leftText;\n\t\t\t}\n\t\t\tif(values[i].left.symbol)\n\t\t\t\tfmt += \"[$\"+values[i].left.symbol+\"]\";\n\t\t\tif(values[i].left.placeholders){\n\t\t\t\tlet leftPlaceholders = values[i].left.placeholders;\n\t\t\t\tfmt += toExcel ? leftPlaceholders.replace(values.groupSign, \",\") : leftPlaceholders;\n\t\t\t}\n\t\t}\n\n\t\tif(values[i].decimals)\n\t\t\tfmt += toExcel ? \".\" : values.decimalSign;\n\n\t\tif(values[i].right){\n\t\t\tif(values[i].right.placeholders)\n\t\t\t\tfmt += values[i].right.placeholders;\n\t\t\tif(values[i].right.symbol)\n\t\t\t\tfmt += \"[$\"+values[i].right.symbol+\"]\";\n\t\t\tif(values[i].right.text){\n\t\t\t\tlet rightText = values[i].right.text;\n\n\t\t\t\tfmt += rightText;\n\t\t\t}\n\t\t}\n\t\tif(i != values.length - 1)\n\t\t\tfmt += \";\";\n\t}\n\treturn fmt;\n}\n\nfunction parseFormat(fmt){\n\tconst fmtParts = fmt.format.split(\";\");\n\tlet values = [];\n\n\tfor(let i = 0; i < fmtParts.length; i++){\n\t\tlet separated = separateFmt(fmtParts[i]);\n\t\tvalues[i] = {color:separated.color, condition:separated.condition ,left:{}, right:{}};\n\n\t\tconst format = separated.fmt;\n\n\t\tvalues.groupSign = fmt.values.groupSign;\n\t\tvalues.decimalSign = fmt.values.decimalSign;\n\n\t\tif(format.indexOf(values.groupSign) > -1)\n\t\t\tvalues[i].separator = true;\n\n\t\tconst sepFmtParts = getParts(format, values.decimalSign);\n\n\t\tlet left = sepFmtParts[0];\n\t\tlet right = sepFmtParts[1] || \"\";\n\n\t\tif(sepFmtParts[1])\n\t\t\tvalues[i].decimals = true;\n\n\t\tleft = getFmtPartValues(left, \"left\", values.groupSign);\n\t\tright = getFmtPartValues(right, \"right\", values.groupSign);\n\n\t\tvalues[i].left = {\n\t\t\ttext: left.leftText,\n\t\t\tplaceholders: left.placeholders\n\t\t};\n\n\t\tvalues[i].right = {\n\t\t\ttext: left.rightText + right.rightText,\n\t\t\tplaceholders: right.placeholders\n\t\t};\n\n\t\tconst symbol = separated.symbol;\n\t\tif(symbol){\n\t\t\tconst currency = currencies.find(val => val.id == symbol);\n\t\t\tlet pos = \"left\";\n\n\t\t\tif(currency)\n\t\t\t\tpos = currency.format.split(\"{obj}\").findIndex(val => val) ? \"right\" : \"left\";\n\n\t\t\tvalues[i][pos].symbol = symbol;\n\t\t}\n\t}\n\treturn values;\n}\n\nfunction getFmtPartValues(fmtPart, type, groupSign){\n\tlet firstPlaceholder;\n\tif(type == \"left\"){\n\t\tfirstPlaceholder = fmtPart.match(/[#?0]/);\n\t\tfirstPlaceholder = firstPlaceholder ? firstPlaceholder.index : Infinity;\n\t}\n\n\tlet leftText = \"\";\n\tlet rightText = \"\";\n\tlet placeholders = \"\";\n\tfor(let k = 0; k < fmtPart.length; k++){\n\t\tif(!placeholder(fmtPart[k])){\n\t\t\tif(fmtPart[k] == groupSign && placeholder(fmtPart[k+1]) && placeholder(fmtPart[k-1])){\n\t\t\t\tplaceholders += fmtPart[k];\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(type == \"left\")\n\t\t\t\tif(k < firstPlaceholder){\n\t\t\t\t\tleftText += fmtPart[k];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\trightText += fmtPart[k];\n\t\t}\n\t\telse\n\t\t\tplaceholders += fmtPart[k];\n\t}\n\treturn {leftText: leftText, rightText: rightText, placeholders: placeholders};\n}\n\nfunction separateFmt(line){\n\tlet color = \"\";\n\tlet check = \"\";\n\tlet symbol = \"\";\n\n\tlet start = line.indexOf(\"[\");\n\tif (start != -1){\n\t\tif (line[1].match(/[><=]/)){\n\t\t\tlet end = line.indexOf(\"]\");\n\t\t\tcheck = line.substr(start+1, end-start-1);\n\t\t\tline = line.substr(end+1);\n\t\t}\n\t}\n\n\tstart = line.indexOf(\"[$\");\n\tif(start != -1){\n\t\tlet end = start + line.substr(start).indexOf(\"]\");\n\t\tsymbol = line.substr(start+2, end-start-2);\n\t\tline = line.substr(0, start)+line.substr(end+1);\n\t}\n\n\tstart = line.indexOf(\"[\");\n\tif (start != -1){\n\t\tlet end = line.indexOf(\"]\");\n\t\tcolor = line.substr(start+1, end-start-1);\n\t\tline = line.substr(end+1);\n\t}\n\treturn {condition:check, color, symbol, fmt:line};\n}\n\nfunction getCells(view, row, column){\n\tif(row && column){\n\t\tif (typeof row === \"object\" && typeof column === \"object\"){\n\t\t\tlet cells = [];\n\t\t\tfor (let r = row.row; r<=column.row; r++)\n\t\t\t\tfor (let c = row.column; c<=column.column; c++)\n\t\t\t\t\tcells.push({row: r, column: c});\n\t\t\treturn cells;\n\t\t}\n\t\telse\n\t\t\treturn [{row: row, column: column}];\n\t}\n\telse\n\t\treturn view.getSelectedId(true);\n}\n\nfunction placeholder(val){\n\treturn val === \"0\" || val === \"#\" || val === \"?\";\n}\n\nfunction getParts(str, decimal){\n\t// it is nessesary to use \"/\" before decimal to escape regex special characters\n\tconst match = str.match(\"[#?0][/\"+decimal+\"][#?0]\");\n\tif(match)\n\t\treturn [str.substring(0, match.index+1), str.substring(match.index+2)];\n\telse\n\t\treturn [str];\n}\n\n//simple check: take into account only first condition\nexport function checkFormat(format, type, checkTime){\n\tformat = format && format.fmt ? format.fmt : getFormatSource(format);\n\tif(!format) return;\n\tconst parts = splitFormat(format);\n\tconst separated = separateFmt(parts[0]).fmt;\n\n\tlet quot;\n\tif(separated)\n\t\tfor(let i = 0; i < separated.length; i++){\n\t\t\tif(separated[i] == \"\\\"\")\n\t\t\t\tquot = !quot;\n\t\t\tif(quot) continue;\n\n\t\t\tif(type == \"date\" && /[a-zA-Z]/.test(separated)){\n\t\t\t\tconst datePart = excelDateToWebix(separated.substr(i), \"date\");\n\t\t\t\tif(datePart){\n\t\t\t\t\tif(checkTime){\n\t\t\t\t\t\tif(datePart.type == \"time\")\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(type == \"string\" && separated[i] == \"@\")\n\t\t\t\treturn true;\n\t\t}\n}\n\nexport function getFormatName(view, row, col){\n\tconst item = view._mPage.getCell(row-1, col-1);\n\treturn (item && item.format) || null;\n}\n\nexport function isDateInvalid(value){\n\treturn value < -99974430.925 || value > 100025569.125;\n}\n\nexport function getDateEditFormat(view, row, col){\n\tconst formatName = getFormatName(view, row, col);\n\tconst locale = webix.i18n.spreadsheet.formats;\n\tconst isTime = checkFormat(formatName, \"date\", true);\n\n\treturn webix.Date.dateToStr( locale[isTime ? \"parseDateTime\" : \"parseDate\"] );\n}\n\nexport function getFormatFromData(data, arr){\n\tconst styleName = arr[3];\n\tlet fmt;\n\tif(styleName){\n\t\tlet style = data.styles.find(arr => arr[0] == styleName);\n\t\tif(style){\n\t\t\tstyle = style[1];\n\t\t\tconst fmtName = styleFromText(style).format;\n\t\t\tif(fmtName){\n\t\t\t\tif(data.formats)\n\t\t\t\t\tfmt = data.formats.find(arr => arr[0] == fmtName);\n\n\t\t\t\tif(fmt)\n\t\t\t\t\tfmt = fmt[1];\n\t\t\t\telse\n\t\t\t\t\tfmt = getFormatSource(fmtName); //default formats (int, percent, etc.)\n\t\t\t}\n\t\t}\n\t}\n\treturn fmt;\n}","import {getFormatName, getFormatSource} from \"../operations/formats\";\n\nexport function isChar(char) {\n\tconst code = char.charCodeAt(0);\n\treturn code <= 122 ? code >= 65 || code === 35 || code === 36 : code > 191;\n}\n\nexport function getLastCharIndex(str){\n\tfor(let i = str.length - 1; i >= 0; i--){\n\t\tif(!isChar(str[i]))\n\t\t\treturn i+1;\n\t}\n}\n\nfunction isNumber(char){\n\tvar code = char.charCodeAt(0);\n\treturn code>=48 && code<=57;\n}\n\nfunction getWord(formula, i, passive){\n\tvar max = formula.length;\n\tvar sheet = passive;\n\tvar quotes = false;\n\n\tfor(var j=i; j<max; j++){\n\t\tvar key =  formula[j];\n\t\tif (key === \"'\"){\n\t\t\tquotes = !quotes;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!quotes){\n\t\t\tif (key == \"!\"){\n\t\t\t\tif(formula[i] == \"#\") //error\n\t\t\t\t\tcontinue;\n\t\t\t\telse{\n\t\t\t\t\t//multi-sheet math\n\t\t\t\t\tsheet = formula.substr(i, j-i);\n\t\t\t\t\tif (sheet[0] === \"'\")\n\t\t\t\t\t\tsheet = sheet.substr(1, sheet.length-2);\n\t\t\t\t\ti=j+1;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!isChar(key) && !isNumber(key)){\n\t\t\t\treturn [formula.substr(i, j-i), j, i, sheet];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn [formula.substr(i), j, i, sheet];\n}\n\nvar operand = /^[A-Z$]+[0-9]+$/;\nfunction isPosition(text){\n\treturn operand.test(text);\n}\n\nexport function position(word){\n\tvar row = 0, sum = 0, x = 1, mode = 1, flags = 0;  \n\tvar chars = false;\n\n\tfor (var j =word.length-1; j>=0; j--){\n\t\tvar key = word[j].charCodeAt(0);\n\t\tif (key === 36) {\n\t\t\tflags = flags+mode;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key < 58){\n\t\t\t//numeric\n\t\t\tsum += (key - 48)*x;\n\t\t\tx *= 10;\n\t\t} else {\n\t\t\tif (!chars){\n\t\t\t\tx = 1; row = sum; sum = 0; chars = true; mode += 1;\n\t\t\t}\n\t\t\t//alpha\n\t\t\tsum += (key - 64)*x;\n\t\t\tx*=26;\n\t\t}\n\t}\n\n\t/*\n\t\t$X$Y => flags = 3\n\t\t$XY  => flags = 2\n\t\tX$Y  => flags = 1\n\t\tXY   => flags = 0\n\t*/\n\treturn [row, sum, flags];\n}\n\nexport function split(formula, view, crosssheet){\n\tconst activeSheet = view.getActiveSheet();\n\tvar lines = [];\n\tvar index = 0;\n\tvar quotes = false, ph = false;\n\tfor (var i = formula[i] === \"=\" ? 1 : 0; i < formula.length; i++){\n\t\tvar key = formula[i];\n\t\tif (key == \"\\\"\"){\n\t\t\tquotes = !quotes;\n\t\t} else if (!quotes){\n\t\t\tif (key == \"{\" && formula[i+1] == \"{\"){\n\t\t\t\tph = true;\n\t\t\t} else if (key == \"}\" && formula[i+1] == \"}\"){\n\t\t\t\tph = false;\n\t\t\t} else if (!ph){\n\t\t\t\tconst escaped = key === \"'\";\n\t\t\t\tif (escaped || isChar(key)){\n\t\t\t\t\tlet [word, end, ,sheet] = getWord(formula, i, \"\");\n\t\t\t\t\tlet next = end - 1;\n\t\t\t\t\tlet value;\n\n\t\t\t\t\tif(formula[next+1] !== \"(\"){\n\t\t\t\t\t\tif(isPosition(word)){\n\t\t\t\t\t\t\tif(!sheet || sheet == activeSheet || crosssheet){\n\t\t\t\t\t\t\t\tvalue = sheet ? [sheet, word, escaped] : word;\n\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(crosssheet){\n\t\t\t\t\t\t\t\tvalue = sheet ? [sheet, word, escaped] : word;\n\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tlet range;\n\n\t\t\t\t\t\t\t\tif(sheet)\n\t\t\t\t\t\t\t\t\trange = view.ranges.getCode(word, sheet);\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\t//global range\n\t\t\t\t\t\t\t\t\trange = view.ranges.getCode(word, true);\n\n\t\t\t\t\t\t\t\t\t//active sheet range\n\t\t\t\t\t\t\t\t\tif(!range)\n\t\t\t\t\t\t\t\t\t\trange = view.ranges.getCode(word);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif(range){\n\t\t\t\t\t\t\t\t\tconst parts = range.split(\"!\");\n\t\t\t\t\t\t\t\t\tif(parts[0] == activeSheet){\n\t\t\t\t\t\t\t\t\t\tvalue = [sheet, word, escaped, parts[1]];\n\t\t\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ti = next;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (index!=formula.length)\n\t\tlines.push(formula.substr(index));\n\treturn lines;\n}\n\nfunction pushLine(lines, formula, i, index, value){\n\tif (i!==0)\n\t\tlines.push(formula.substr(index, i-index));\n\tlines.push(value);\n}\n\nexport function getMathFormat(view, value){\n\tlet level = 0;\n\tlet blockLevel;\n\n\tconst parts = split(value, view);\n\n\tfor(let i = 0; i < parts.length; i++){\n\t\t// parts[i] can contain numbers, math operators, formulas, etc.\n\t\tif(i%2 === 0){\n\t\t\t// check formulas and round brackets which are not in quotes\n\t\t\tconst methods = parts[i].match(/(([a-zA-Z]*\\()|\\))(?=(?:[^\"]|\"[^\"]*\")*$)/g);\n\t\t\tif(methods)\n\t\t\t\tmethods.forEach(part => {\n\t\t\t\t\tif(part.indexOf(\"(\") > -1){\n\t\t\t\t\t\tlevel++;\n\t\t\t\t\t\t// some methods block format addition (like count,odd,etc.)\n\t\t\t\t\t\tconst safeMethods = /^(SUM|AVERAGE|MAX|MIN|INT|ROUND|ROUNDDOWN|ROUNDUP|TRUNC)?\\($/gi;\n\t\t\t\t\t\tif(!blockLevel && !safeMethods.test(part))\n\t\t\t\t\t\t\tblockLevel = level;\n\t\t\t\t\t}\n\t\t\t\t\telse if(--level < blockLevel)\n\t\t\t\t\t\tblockLevel = null;\n\t\t\t\t});\n\t\t}\n\t\t// parts[i] can be named range, cell from the active / non-active sheet\n\t\telse if(!blockLevel){\n\t\t\tif(webix.isArray(parts[i])){\n\t\t\t\tif(/^[A-Za-z]+$/.test(parts[i][1]))\n\t\t\t\t\tparts[i] = parts[i][3].split(\":\")[0];\n\t\t\t\telse if(parts[i][0] == view.getActiveSheet())\n\t\t\t\t\tparts[i] = parts[i][1];\n\t\t\t\telse\n\t\t\t\t\tcontinue; // ignore non-active sheets\n\t\t\t}\n\n\t\t\t// if range - check first cell position\n\t\t\tconst cell = position(parts[i]);\n\t\t\tconst name = getFormatName(view, cell[0], cell[1]);\n\n\t\t\t// first cell with number format\n\t\t\tif(name)\n\t\t\t\treturn {fmt: getFormatSource(name)};\n\t\t}\n\t}\n}","import {getFormatName, checkFormat, isDateInvalid, getFormatFromData, getFormatSource} from \"./formats\";\nimport {getExcelDateFromJs} from \"../mathematics/methods\";\nimport {getMathFormat} from \"../mathematics/parser\";\n\nexport function init(view){\n\tview.attachEvent(\"onCellChange\", function(row, col, value, type){\n\t\tif(!this._setType){\n\t\t\tconst formatName = getFormatName(this, row, col);\n\t\t\tconst cell = {\n\t\t\t\trow,\n\t\t\t\tcol,\n\t\t\t\tvalue,\n\t\t\t\tfmt: formatName ? {fmt: getFormatSource(formatName)} : null,\n\t\t\t\ttype\n\t\t\t};\n\t\t\tsetType(this, cell);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onBeforeFormatChange\", function(row, col, formatName){\n\t\tif(!this._setType){\n\t\t\tconst cell = {\n\t\t\t\trow,\n\t\t\t\tcol,\n\t\t\t\tvalue: view.getCellValue(row, col),\n\t\t\t\tfmt: {fmt:getFormatSource(formatName)}\n\t\t\t};\n\t\t\tsetType(this, cell, true);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", function(action, values){\n\t\tif(action == \"dropdown\" && values.newValue && values.newValue.editor == \"excel_date\"){\n\t\t\tconst format = getFormatName(this, values.row, values.column);\n\t\t\tif(getFormatType(format) != \"date\")\n\t\t\t\tthis.setFormat(values.row, values.column, webix.i18n.spreadsheet.formats.dateFormat);\n\t\t}\n\t});\n}\n\nexport function loadCell(view, data, item){\n\tconst fmt = getFormatFromData(data, item);\n\tconst cell = {\n\t\tvalue: item[2],\n\t\tfmt: fmt ? {fmt} : null,\n\t\ttype: item[4]\n\t};\n\tsetType(view, cell);\n\treturn cell;\n}\n\nfunction getExpectType(view, cell, parseDate, isFormula, formatType, style){\n\t//date based math\n\tlet type = \"string\";\n\tif(!webix.isUndefined(cell.value)){\n\t\tif(isFormula){\n\t\t\ttype = \"number\";\n\n\t\t\tif(/^=(now|date|time)\\(/i.test(cell.value))\n\t\t\t\ttype = \"date\";\n\t\t\telse if(/^=(sparkline|image)\\(/i.test(cell.value))\n\t\t\t\ttype = \"string\";\n\t\t}\n\t\telse if(!isNaN(cell.value))\n\t\t\ttype = \"number\";\n\t\telse if(formatType != \"string\" && parseDate){\n\t\t\t//if user types a date string, or it comes from Excel import\n\t\t\t//set date type and convert string to Excel date\n\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\tconst value  = parser(cell.value);\n\t\t\tif(value != \"\" && !isNaN(value)){\n\t\t\t\t//change cell style - value changes once (some value -> 35767.5)\n\t\t\t\t//change cell value - value changes twice (some value -> \"12/03/97\" -> 35767.5)\n\t\t\t\t//so ignore undo for cell value change\n\t\t\t\tif(style)\n\t\t\t\t\tdateToExcel(view, cell, value);\n\t\t\t\telse\n\t\t\t\t\tview.ignoreUndo(() => dateToExcel(view, cell, value));\n\n\t\t\t\ttype = \"date\";\n\t\t\t}\n\t\t}\n\t}\n\treturn type;\n}\n\nfunction dateToExcel(view, cell, date){\n\tdate = getExcelDateFromJs(date);\n\tcell.value = date;\n\n\tif(!view._loading_data)\n\t\tview.setCellValue(cell.row, cell.col, date);\n}\n\nfunction checkType(type, expectType, formatType, isFormula, value){\n\ttype = type || expectType;\n\n\t//strings will always have string type regardless of format\n\tif(expectType == \"string\")\n\t\ttype = \"string\";\n\telse if(formatType)\n\t\ttype = formatType;\n\n\tif(type == \"date\" && !isFormula && isDateInvalid(value))\n\t\ttype = \"number\";\n\n\treturn type;\n}\n\nfunction getFormatType(format){\n\tlet formatType = format ? \"number\" : null;\n\tif(checkFormat(format, \"string\"))\n\t\tformatType = \"string\";\n\telse if(checkFormat(format, \"date\"))\n\t\tformatType = \"date\";\n\treturn formatType;\n}\n\nexport function getType(view, row, column){\n\tconst item = view._mPage.getCell(row-1, column-1);\n\treturn (item && item.type) || null;\n}\n\nfunction setType(view, cell, style){\n\tconst parseToStore = !(cell.row && cell.col);\n\n\t//prevent type change during value or format change\n\tview._setType = true;\n\n\tconst isFormula = typeof cell.value == \"string\" && cell.value[0] == \"=\";\n\tconst parseDate = (!style || cell.fmt == getFormatSource(\"date\")) && (!view._loading_data || cell.type == \"date\");\n\n\tlet mathFormat;\n\tif(!parseToStore)\n\t\tmathFormat = isFormula && !cell.fmt ? getMathFormat(view, cell.value) : null;\n\n\tconst formatType = getFormatType(cell.fmt || mathFormat);\n\tconst expectType = getExpectType(view, cell, parseDate, isFormula, formatType, style);\n\n\tcell.type = checkType(cell.type, expectType, formatType, isFormula, cell.value);\n\tcell.$format = formatType == \"string\" ? 1 : 0;\n\n\tif(!parseToStore){\n\t\tconst item = view._mPage.getCell(cell.row-1, cell.col-1, true);\n\t\titem.type = cell.type;\n\t\titem.$format = cell.$format;\n\n\t\tupdateCell(view, cell, expectType, formatType, mathFormat);\n\t}\n\n\tdelete view._setType;\n}\n\nfunction updateCell(view, cell, expectType, formatType, mathFormat){\n\tconst row = cell.row;\n\tconst col = cell.col;\n\tconst isString = typeof cell.value == \"string\";\n\n\tconst isFormula = isString && cell.value[0] == \"=\";\n\tconst cellEditor = view.getCellEditor(row, col);\n\n\t//update cell value if set number format (5e5 -> 500000, 005 -> 5)\n\tif(!view._loading_data && cell.type === \"number\" && isString && !isFormula && cell.value !== \"\")\n\t\tview.setCellValue(row, col, cell.value*1);\n\n\tif(mathFormat)\n\t\tview.setFormat(row, col, mathFormat.fmt);\n\telse if(cell.type == \"date\"){\n\t\t// add default date format\n\t\tif(formatType != \"date\"){\n\t\t\tconst isTime = isFormula && cell.value.toUpperCase().indexOf(\"=TIME(\") == 0;\n\t\t\tconst locale = webix.i18n.spreadsheet.formats;\n\t\t\tconst format = isTime ? locale.timeFormat : locale.dateFormat;\n\t\t\tview.setFormat(row, col, format);\n\t\t}\n\n\t\t//set date editor for cells with date type\n\t\tif(!isFormula && !cellEditor)\n\t\t\tview.setCellEditor(row, col, {editor: \"excel_date\"});\n\t}\n\telse if(formatType != \"string\" && cell.type == \"string\" && expectType != \"string\"){\n\t\t//force text format for numbers typed as strings\n\t\tview.setFormat(row, col, \"@\");\n\t}\n\n\t//remove date editor\n\tif((cell.type != \"date\" || isFormula) && cellEditor && cellEditor.editor == \"excel_date\")\n\t\tview.setCellEditor(row, col, null);\n}\n","import {isChar, getLastCharIndex} from \"../mathematics/parser\";\n\nwebix.protoUI({\n\tname: \"suggest-formula\",\n\tdefaults: {\n\t\tfitMaster: false,\n\t\twidth: 200,\n\t\tfilter(item, value) {\n\t\t\tconst editor = webix.$$(this.config.master);\n\t\t\tconst cursor = editor.getInputNode().selectionStart;\n\t\t\tconst val = editor.getValue();\n\n\t\t\tif(val.charAt(0) !== \"=\") return;\n\n\t\t\tconst str = val.substring(0, cursor);\n\t\t\tconst search = str.substring( getLastCharIndex(str) );\n\t\t\tconst nextSymbol = val.charAt(cursor);\n\n\t\t\tif(search && (cursor === val.length || !(isChar(nextSymbol) || /^[0-9]/.test(nextSymbol))))\n\t\t\t\tvalue = search;\n\n\t\t\treturn item.value.toString().toLowerCase().indexOf(value.toLowerCase()) === 0;\n\t\t}\n\t},\n\t$init() {\n\t\tthis.attachEvent(\"onBeforeShow\", (node) => {\n\t\t\tif(node.tagName){\n\t\t\t\tconst editor = webix.$$(this.config.master);\n\t\t\t\tconst text = editor.getValue();\n\n\t\t\t\t//only for formulas\n\t\t\t\tif(!text || text.charAt(0) !== \"=\") return false;\n\n\t\t\t\tconst sizes = webix.html.offset(node);\n\n\t\t\t\tconst selectionStart = editor.getInputNode().selectionStart;\n\t\t\t\tconst textWidth = webix.html.getTextSize(text.substring(0, selectionStart), \"webix_ssheet_formula\").width;\n\n\t\t\t\tconst y = sizes.y + sizes.height;\n\t\t\t\tconst x = sizes.x + textWidth;\n\n\t\t\t\twebix.ui.popup.prototype.show.apply(this, [{x, y}]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t},\n\tsetMasterValue(data, refresh) {\n\t\tconst text = data.id ? this.getItemText(data.id) : (data.text||data.value);\n\t\twebix.$$(this.config.master).setValueHere(text);\n\n\t\tif (!refresh)\n\t\t\tthis.hide(true);\n\n\t\tthis.callEvent(\"onValueSuggest\", [data, text]);\n\t},\n\t$enterKey: function() {\n\t\tif (this.isVisible())\n\t\t\treturn webix.ui.suggest.prototype.$enterKey.apply(this, arguments);\n\t}\n}, webix.ui.suggest);","webix.protoUI({\n\tname: \"ssheet-button\",\n\t$cssName: \"button\",\n\tdefaults:{\n\t\ttype:\"htmlbutton\",\n\t\twidth: 40\n\t},\n\t$init: function(config){\n\t\tthis.$view.className += \" webix_ssheet_button\"+(config.arrow?\" webix_ssheet_button_menu\":\"\");\n\t\tif(config.label || config.icon){\n\t\t\tlet icon = (config.icon||config.name),\n\t\t\t\ttext = config.label||\"\";\n\t\t\tif(config.arrow)\n\t\t\t\ttext += \"<span class='webix_ssheet_button_icon webix_ssheet_icon_arrow webix_icon wxi-menu-down'></span>\";\n\t\t\tconfig.label = \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+icon+\"'></span> \"+text;\n\t\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\t}\n\t\tif(config.options && !config.popup)\n\t\t\tconfig.popup = getPopupConfig(config.options);\n\t}\n},webix.ui.button);\n\n\nwebix.protoUI({\n\tname: \"ssheet-button-icon-top\",\n\t$cssName: \"button\",\n\tdefaults:{\n\t\ttype:\"htmlbutton\",\n\t\twidth: 70,\n\t\theight: 70\n\t},\n\t$init: function(config){\n\t\tthis.$view.className += \" ssheet_button_icon_top\";\n\t\tif(config.label) {\n\t\t\tlet icon = (config.icon || config.name||\"\"),\n\t\t\t\ttext = config.label;\n\t\t\tconfig.label = \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + icon + \"'></span><br/>\";\n\t\t\tconfig.label += \"<span class='ssheet_button_icon_top_text'>\"+text+\"</span>\";\n\t\t\tif (config.arrow)\n\t\t\t\tconfig.label += \"<br/><span class='ssheet_button_icon_top_arrow webix_icon wxi-menu-down'></span>\";\n\t\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\t}\n\t\tif(config.options && !config.popup)\n\t\t\tconfig.popup = getPopupConfig(config.options);\n\t}\n},webix.ui.button);\n\n\nfunction getPopupConfig(options){\n\treturn {\n\t\tview: \"ssheet-suggest\",\n\t\tcss: \"webix_ssheet_suggest\",\n\t\tautowidth:true,\n\t\ttemplate: function(obj){\n\t\t\tvar text = \"\";\n\t\t\tif(obj.icon)\n\t\t\t\ttext += \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + obj.icon + \"'></span> \";\n\t\t\ttext += obj.value || webix.i18n.spreadsheet.menus[obj.id] || obj.id;\n\t\t\treturn text;\n\t\t},\n\t\tdata: options,\n\t\ton:{\n\t\t\tonItemClick: function(id){\n\t\t\t\tvar button = this.config.master;\n\t\t\t\tif(button){\n\t\t\t\t\tlet view = webix.$$(button).getTopParentView();\n\t\t\t\t\tvar params = [this.getItem(id)];\n\t\t\t\t\tif(webix.$$(button).config.area){\n\t\t\t\t\t\tlet area = view.$$(\"cells\").getSelectArea();\n\t\t\t\t\t\tif(area)\n\t\t\t\t\t\t\tparams = params.concat([area.start,area.end]);\n\t\t\t\t\t}\n\t\t\t\t\tview.callEvent(\"onCommand\",params);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}","import \"./suggest_formula\";\nimport {getJsDateFromExcel} from \"../mathematics/methods\";\nimport {getType} from \"../operations/types\";\nimport {getDateEditFormat} from \"../operations/formats\";\nimport {split, position, getLastCharIndex} from \"../mathematics/parser\";\n\nwebix.protoUI({\n\tname: \"live-editor\",\n\t$cssName:\"texthighlight\",\n\t$init(config){\n\t\tconfig.suggest = {\n\t\t\tview: \"suggest-formula\",\n\t\t\tdata: config.suggestData\n\t\t};\n\t\tconfig.highlight = this.highlight;\n\n\t\tthis._highlightedCells = {};\n\t\tthis.$view.className += \" webix_ssheet_formula\";\n\n\t\tthis.attachEvent(\"onKeyPress\", (code, e) => {\n\t\t\tdelete this._update_range;\n\t\t\tif(code == 13) {\n\t\t\t\t//ignore Enter key if it was pressed to select some value from suggest\n\t\t\t\tif ((new Date() - (this._last_value_set || 0)) > 300){\n\t\t\t\t\tconst cell = this.config.activeCell;\n\t\t\t\t\tthis.showActiveSheet(true);\n\t\t\t\t\tthis.updateCellValue(cell);\n\t\t\t\t\t//blur to avoid calling highlight function after selection move\n\t\t\t\t\tthis.getInputNode().blur();\n\t\t\t\t\t//we have 'enter' hot key to activate editor\n\t\t\t\t}\n\t\t\t\twebix.html.preventEvent(e);\n\t\t\t}\n\t\t\t//esc - cancel editing\n\t\t\telse if(code == 27){\n\t\t\t\tthis.showActiveSheet();\n\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tconst master = this.getTopParentView();\n\t\t\t\t\tconst cell = master.getSelectedId();\n\t\t\t\t\tconst oldVal = this.getCellValue(cell.row, cell.column);\n\n\t\t\t\t\tif(this.getValue() == oldVal)\n\t\t\t\t\t\tmaster.$$(\"cells\").refresh(cell.row);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.setValue(oldVal);\n\n\t\t\t\t\tdelete master.$handleSelection;\n\n\t\t\t\t\twebix.UIManager.setFocus(master.$$(\"cells\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.attachEvent(\"onAfterRender\", function(){\n\t\t\twebix.eventRemove(this.keydownEv);\n\n\t\t\tthis.keydownEv = webix.event(this.getInputNode(), \"keydown\", e => {\n\t\t\t\tthis.endEdit(e);\n\t\t\t});\n\t\t});\n\t},\n\thighlight(value){\n\t\tlet html = \"\";\n\t\tconst master = this.getTopParentView();\n\t\tconst escapeText = webix.template.escape;\n\n\t\tfor(let area in this._highlightedCells){\n\t\t\tconst cells = this._highlightedCells[area];\n\t\t\tthis.changeCellCss(cells[0], cells[1], cells[2], true);\n\t\t}\n\t\tthis._highlightedCells = {};\n\n\t\t//value can be null\n\t\tif(value && value[0]==\"=\"){\n\t\t\tconst parts = split(value, master);\n\t\t\tconst sheet = master.getActiveSheet();\n\n\t\t\tlet colorIndex = 1;\n\n\t\t\tfor(let i = 0; i < parts.length; i++){\n\t\t\t\tif(i%2 === 0)\n\t\t\t\t\thtml += escapeText(parts[i]);\n\t\t\t\telse{\n\t\t\t\t\tconst crossheet = webix.isArray(parts[i]);\n\t\t\t\t\tconst cellSheet = crossheet ? this.prepareSheet(parts[i][0], parts[i][2]) : \"\";\n\t\t\t\t\tconst activeMath = this._activeMath;\n\n\t\t\t\t\tconst activeSheet = !crossheet && (!activeMath || activeMath == sheet);\n\t\t\t\t\tlet cell = position(crossheet ? parts[i][1] : parts[i]);\n\t\t\t\t\tconst cellText = crossheet ? cellSheet+parts[i][1] : parts[i];\n\n\t\t\t\t\tconst rangeName = crossheet && !getLastCharIndex(parts[i][1]);\n\n\t\t\t\t\tif(rangeName || activeSheet || (crossheet && parts[i][0] == sheet)){\n\t\t\t\t\t\tlet repeatedColor;\n\t\t\t\t\t\t//range\n\t\t\t\t\t\tif((parts[i+1] == \":\" && parts[i+2]) || rangeName){\n\t\t\t\t\t\t\tlet nextCell, nextCellText;\n\n\t\t\t\t\t\t\tif(rangeName){\n\t\t\t\t\t\t\t\tconst cells = parts[i][3].split(\":\");\n\n\t\t\t\t\t\t\t\tcell = position(cells[0]);\n\t\t\t\t\t\t\t\tnextCell = position(cells[1]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tnextCell = position(webix.isArray(parts[i+2]) ? parts[i+2][1] : parts[i+2]);\n\t\t\t\t\t\t\t\tnextCellText = webix.isArray(parts[i+2]) ? cellSheet+parts[i+2][1] : parts[i+2];\n\t\t\t\t\t\t\t\ti+=2;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trepeatedColor = this.setColor(cell[0], cell[1], nextCell[0], nextCell[1], colorIndex);\n\t\t\t\t\t\t\thtml += `<span class=\"webix_ssheet_highlight_color_${repeatedColor||colorIndex}\">${rangeName ? cellText : cellText+\":\"+nextCellText}</span>`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//OtherSheet!A1:A3 - do not highlight A3\n\t\t\t\t\t\telse if(parts[i-1] && parts[i-1][ parts[i-1].length-1 ] == \":\"){\n\t\t\t\t\t\t\thtml += cellText;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//cell\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\trepeatedColor = this.setColor(cell[0], cell[1], cell[0], cell[1], colorIndex);\n\t\t\t\t\t\t\thtml += `<span class=\"webix_ssheet_highlight_color_${repeatedColor||colorIndex}\">${cellText}</span>`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst colors = 7;\n\t\t\t\t\t\tif(!repeatedColor)\n\t\t\t\t\t\t\tcolorIndex += colorIndex == colors ? -1*(colors-1) : 1;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\thtml += cellText;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\thtml = escapeText(value);\n\n\t\tmaster.$$(\"cells\").refresh();\n\n\t\tif(document.activeElement == this.getInputNode())\n\t\t\tthis.paintValue();\n\t\treturn html;\n\t},\n\tshowActiveSheet(enter){\n\t\tconst master = this.getTopParentView();\n\t\tconst grid = master._table;\n\n\t\tif(this._activeMath){\n\t\t\tif(this._activeMath != master.getActiveSheet()){\n\t\t\t\tconst cell = this.config.activeCell;\n\n\t\t\t\tthis.define({activeCell:null});\n\n\t\t\t\tmaster.showSheet(this._activeMath);\n\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tgrid.select(cell.row + (enter ? 1 : 0), cell.column);\n\t\t\t\t});\n\t\t\t}\n\t\t\tdelete this._activeMath;\n\t\t}\n\t\telse if(enter){\n\t\t\twebix.delay(()=>{\n\t\t\t\tgrid.moveSelection(\"down\");\n\t\t\t});\n\t\t}\n\t},\n\tchangeCellCss(row, col, index, remove){\n\t\tconst css = `webix_ssheet_highlight_background_${index}`;\n\t\tfor (let r = row.start; r <= row.end; r++)\n\t\t\tfor (let c = col.start; c <=  col.end; c++)\n\t\t\t\tthis.getTopParentView().$$(\"cells\")[remove?\"removeCellCss\":\"addCellCss\"](r, c, css, true);\n\t},\n\tendEdit(e){\n\t\tlet code = e.which || e.keyCode;\n\n\t\t//if it is a formula - force user to finish it by click outside or 'enter'\n\t\tif(code == 9 || (code>36 && code<41 && this.getValue().charAt(0)!==\"=\")){\n\t\t\tlet dir = (code == 40)?\"down\":(code === 39?\"right\":(code ==37?\"left\":\"up\"));\n\t\t\tif (code === 9)\n\t\t\t\tdir = \"right\";\n\n\t\t\tthis.getInputNode().blur();\n\t\t\tthis.updateCellValue();\n\t\t\tthis.getTopParentView()._table.moveSelection(dir);\n\t\t}\n\t},\n\tpaintValue(){\n\t\tconst master = this.getTopParentView();\n\t\tif(!this._activeMath || this._activeMath == master.getActiveSheet()){\n\t\t\tconst cell = this.config.activeCell;\n\t\t\tconst node = master._table.getItemNode(cell);\n\t\t\tif(cell && node) \n\t\t\t\tnode.innerHTML = `<div>${webix.template.escape(this.getValue())}</div>`;\n\t\t}\n\t},\n\tupdateCellValue(cell) {\n\t\tconst newv = this.getValue();\n\t\tconst master = this.getTopParentView();\n\t\tcell = cell || this.config.activeCell;\n\n\t\tif (!cell)\n\t\t\tthis.setValue(\"\");\n\t\telse{\n\t\t\tconst val = master.getCellValue(cell.row, cell.column);\n\n\t\t\tif(newv !== val){\n\t\t\t\tthis.config.value = newv;\n\t\t\t\tmaster.setCellValue(cell.row, cell.column, newv);\n\t\t\t\tmaster.refresh();\n\t\t\t}\n\t\t}\n\n\t\tdelete master.$handleSelection;\n\t},\n\t$setValueHere(value){\n\t\tthis.setValueHere(value);\n\t},\n\tsetValueHere(value) {\n\t\tthis._last_value_set = new Date();\n\n\t\tconst formula = this.getValue();\n\t\tif(formula && formula.charAt(0)===\"=\"){\n\t\t\tconst cursor = this.getInputNode().selectionStart;\n\t\t\tlet str1 = formula.substring(0, cursor);\n\t\t\tconst str2 = formula.substring(cursor);\n\n\t\t\tif(str1[str1.length-1] == \"(\")\n\t\t\t\tstr1 = str1.substring(0, str1.length-1);\n\n\t\t\tstr1 = str1.substring(0, getLastCharIndex(str1));\n\n\t\t\t//suggest called via up/down key\n\t\t\tstr1 += value + (str2[0] == \"(\" ? \"\" : \"(\");\n\n\t\t\tthis.setValue(str1 + str2);\n\t\t\tthis.getInputNode().setSelectionRange(str1.length, str1.length);\n\t\t}\n\t},\n\texpectOperator(){\n\t\tconst text = this.getValue();\n\n\t\tif(text[0] == \"=\"){\n\t\t\tlet cursor = this.getInputNode().selectionStart;\n\t\t\twhile(text[cursor-1] == \" \")\n\t\t\t\tcursor--;\n\t\t\treturn text[cursor-1] && text[cursor-1].match(/[+&\\-/*%=(:,]/);\n\t\t}\n\t},\n\tsetRange(range, replace){\n\t\tconst cursor = this.getInputNode().selectionStart;\n\t\tconst formula = this.getValue();\n\n\t\tlet str1, str2;\n\n\t\t//check if range was added by click\n\t\tif(replace)\n\t\t\treplace = this._update_range && cursor == this._update_range.pos + this._update_range.len;\n\n\t\tconst lastPos = replace ? this._update_range.pos : cursor;\n\n\t\tstr1 = formula.substring(0, lastPos) + range;\n\t\tstr2 = formula.substring(cursor);\n\n\t\tthis._update_range = {pos: lastPos, len: range.length};\n\n\t\tthis.setValue(str1 + str2);\n\t},\n\tprepareSheet(sheet, escaped){\n\t\tif(!sheet)\n\t\t\treturn \"\";\n\t\tconst condition = webix.isUndefined(escaped) ? sheet.indexOf(\" \") != -1 : escaped;\n\t\treturn (condition ? `'${sheet}'` : sheet) + \"!\";\n\t},\n\tprepareArea(first, second){\n\t\treturn {\n\t\t\tstart: Math.min(first, second),\n\t\t\tend: Math.max(first, second)\n\t\t};\n\t},\n\tsetColor(row1, col1, row2, col2, color){\n\t\tconst row = this.prepareArea(row1, row2);\n\t\tconst col = this.prepareArea(col1, col2);\n\t\tconst index = [row.start, row.end, col.start, col.end].join(\",\");\n\t\tconst coloredArea = this._highlightedCells[index];\n\n\t\tif(!coloredArea){\n\t\t\tthis._highlightedCells[index] = [row, col, color];\n\t\t\tthis.changeCellCss(row, col, color);\n\t\t}\n\t\telse\n\t\t\treturn coloredArea[2];\n\t},\n\tgetCellValue(row, column){\n\t\tconst master = this.getTopParentView();\n\t\tlet value = master.getCellValue(row, column);\n\t\tif(getType(master, row, column) == \"date\" && value[0] != \"=\"){\n\t\t\tconst format = getDateEditFormat(master, row, column);\n\t\t\tvalue = format(getJsDateFromExcel(value));\n\t\t}\n\t\treturn value;\n\t}\n}, webix.ui.texthighlight);","webix.protoUI({\n\tname: \"ssheet-separator\",\n\tdefaults:{\n\t\tcss: \"webix_ssheet_toolbar_spacer\",\n\t\ttemplate: \" \",\n\t\twidth: 1,\n\t\tborderless: true\n\t}\n},webix.ui.view);","webix.protoUI({\n\tname: \"sheets\",\n\tdefaults:{\n\t\tlayout: \"x\",\n\t\tborderless: true,\n\t\tcss:\"ssheet_list_sheets\",\n\t\tselect: true,\n\t\tdrag: \"order\",\n\t\tdragscroll:\"x\",\n\t\tscroll:false\n\t}\n},webix.EditAbility,webix.ui.list);","// toolbar: toogle button\nwebix.protoUI({\n\t$cssName: \"toggle\",\n\tname:\"ssheet-toggle\",\n\ttoggle:function(){\n\t\tvar value = this.getValue() == this.config.onValue?true:false;\n\t\tthis.setValue(!value);\n\t},\n\t$setValue:function(value){\n\t\tif(value == this.config.offValue)\n\t\t\tvalue = false;\n\t\telse if(value == this.config.onValue)\n\t\t\tvalue = true;\n\t\twebix.ui.toggle.prototype.$setValue.call(this,value);\n\t},\n\tgetValue:function(){\n\t\tvar config = this.config;\n\t\tvar value = config.value;\n\t\treturn  !value || value==config.offValue?(config.offValue||false):(config.onValue||true);\n\t},\n\tdefaults:{\n\t\ttemplate:function(obj, common){\n\t\t\tvar css = (obj.value === true ||obj.value == obj.onValue) ? \" webix_pressed\" : \"\";\n\t\t\tvar inp = common.$renderInput(obj, common);\n\t\t\treturn \"<div class='webix_el_box\"+css+\"' style='width:\"+obj.awidth+\"px; height:\"+obj.aheight+\"px'>\"+inp+\"</div>\";\n\t\t}\n\t}\n}, webix.ui.toggle);\n\n\n// toolbar: silent toggle button\nwebix.protoUI({\n\tname:\"ssheet-toggle-silent\",\n\t$cssName:\"toggle\",\n\t$allowsClear:false,\n\tsetValue:function(){\n\t\tthis.blockEvent();\n\t\twebix.ui.toggle.prototype.setValue.apply(this, arguments);\n\t\tthis.unblockEvent();\n\t}\n}, webix.ui.toggle);","webix.protoUI({\n\tname: \"ssheet-bar-title\",\n\tdefaults:{\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_subbar_title\";\n\t}\n},webix.ui.template);","webix.protoUI({\n\tname:\"multicheckbox\",\n\tdefaults:{\n\t\tpadding:0,\n\t\ttype:\"clean\",\n\t\tborderless:true,\n\t\telementsConfig:{\n\t\t\tlabelWidth:10\n\t\t}\n\t},\n\t$init:function(config){\n\t\tconfig.rows = [{height:0.000001}];\n\t\tthis.$ready.push(function(){\n\t\t\tthis._initOnChange();\n\t\t});\n\t},\n\t_initOnChange(){\n\t\tthis.attachEvent(\"onChange\", function(newv){\n\t\t\tconst name = this.$eventSource.config.name;\n\n\t\t\tthis.blockEvent();\n\t\t\tif(name == \"$all\"){\n\t\t\t\tfor(let i in this.elements)\n\t\t\t\t\tthis.elements[i].setValue(newv);\n\t\t\t\tif(!newv)\n\t\t\t\t\tthis._getCheckboxes()[0].setValue(1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tconst count = this.getValue().length;\n\t\t\t\tthis.elements.$all.setValue(count == this._count ? 1 : 0);\n\t\t\t\tif(!count)\n\t\t\t\t\tthis._getCheckboxes()[0].setValue(1);\n\t\t\t}\n\t\t\tthis.unblockEvent();\n\t\t});\n\t},\n\tsetValue:function(value){\n\t\tthis.elements = {};\n\t\tthis._count = value.length;\n\n\t\tif(value.length > 1){\n\t\t\tlet elements = [];\n\t\t\tlet base = [];\n\t\t\tconst maxHeight = 400;\n\n\t\t\tvalue.forEach(sheet => {\n\t\t\t\tbase.push({ view: \"checkbox\", labelRight: sheet.name, name: sheet.name, value: sheet.active});\n\t\t\t});\n\n\t\t\tconst baseHeight = base.length * webix.skin.$active.inputHeight;\n\t\t\tconst scroll = baseHeight > maxHeight;\n\n\t\t\telements.push({\n\t\t\t\tview:\"scrollview\", body:{rows:base},\n\t\t\t\tscroll: scroll,\n\t\t\t\theight: scroll ? maxHeight : baseHeight\n\t\t\t});\n\n\t\t\telements.push({ template:\"<div class='ss_sep_line'></div>\", height:10 });\n\t\t\telements.push({ view:\"checkbox\", labelRight:webix.i18n.spreadsheet.labels[\"export-all-sheets\"], name:\"$all\", value:0 });\n\n\t\t\twebix.ui(elements, this);\n\t\t}\n\t\telse if(this.getChildViews().length > 1){\n\t\t\twebix.ui([{height:0.000001}], this);\n\t\t}\n\t},\n\tgetValue:function(){\n\t\tconst checkboxes = this._getCheckboxes();\n\t\tlet output = [];\n\n\t\t//save order\n\t\tfor(let i = 0; i < checkboxes.length; i++)\n\t\t\tif(checkboxes[i].getValue())\n\t\t\t\toutput.push(checkboxes[i].config.name);\n\n\t\treturn output;\n\t},\n\t_getCheckboxes(){\n\t\tconst scrollview = this.queryView(\"scrollview\");\n\t\treturn scrollview ? scrollview.getBody().getChildViews() : [];\n\t}\n}, webix.ui.form);","webix.protoUI({\n\tname:\"formlist\",\n\tdefaults:{\n\t\tpaddingY: 5,\n\t\theight: 120,\n\t},\n\t$init:function(config){\n\n\t\tconfig.cols = [\n\t\t\t{\n\t\t\t\tcss:\"webix_inp_label\",\n\t\t\t\ttemplate:config.label,\n\t\t\t\twidth:config.labelWidth,\n\t\t\t\tborderless:true\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"list\",\n\t\t\t\tdata:config.data,\n\t\t\t\tcss:config.css,\n\t\t\t\ttemplate:config.template,\n\t\t\t\tselect: true,\n\t\t\t\tscroll:false,\n\t\t\t\tborderless:true,\n\t\t\t\ton:{\n\t\t\t\t\tonSelectChange:()=>{\n\t\t\t\t\t\tthis.getParentView().callEvent(\"onChange\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t},\n\tsetValue:function(value){this.getChildViews()[1].select(value);},\n\tgetValue:function(){return this.getChildViews()[1].getSelectedId();},\n\trefresh: function(){this.getChildViews()[1].refresh();},\n\tfocus:function(){}\n}, webix.ui.layout);","webix.protoUI({\n\tname: \"ssheet-ui\",\n\tdefaults:{\n\t\tmove:true,\n\t\tcss:\"webix_shadow_none webix_ssheet_ui\",\n\t\thead:false,\n\t\tresize:true,\n\t\ttoFront:true,\n\t\tminWidth:50,\n\t\tminHeight:200,\n\t\tescHide:false,\n\t\tautofit:false\n\t},\n\t$init:function(){\n\t\t// prevent block selection\n\t\tthis.$view.setAttribute(\"webixignore\", \"1\");\n\n\t\tthis.$ready.push(function(){\n\t\t\twebix.UIManager.addHotKey(\"delete\", webix.bind(this._removeView, this));\n\t\t\twebix.UIManager.addHotKey(\"backspace\", webix.bind(this._removeView, this));\n\t\t\tthis.getMenu();\n\t\t});\n\t\tthis.attachEvent(\"onDestruct\", function(){\n\t\t\twebix.eventRemove(this._clickEv);\n\t\t\tthis._menu.destructor();\n\t\t});\n\t},\n\tmove_setter:function(value){\n\t\tif (value){\n\t\t\twebix.DragControl.addDrag(this.$view, this);\n\t\t}\n\t\treturn value;\n\t},\n\t$dragPos:function(pos, e){\n\t\tthis.callEvent(\"onViewMove\", [pos, e]);\n\t\treturn pos;\n\t},\n\t$dragCreate:function(object, e){\n\t\tconst trg = e.target;\n\t\tif (!trg.getAttribute || trg.getAttribute(\"webix_disable_drag\") || trg.getAttribute(\"webixignore\"))\n\t\t\treturn;\n\n\t\tthis.getMenu().hide();\n\t\tconst elOffset = webix.html.offset(object);\n\t\tconst elPos = webix.html.pos(e);\n\t\tconst pOffset = webix.html.offset(object.parentNode);\n\t\tconst state = webix.$$(this.config.master).getScrollState();\n\n\t\twebix.DragControl.top = elOffset.y - elPos.y - pOffset.y;\n\t\twebix.DragControl.left = elOffset.x - elPos.x - pOffset.x + state.x;\n\n\t\treturn webix.toNode(this.$view);\n\t},\n\t$dragDestroy:function(node, drag){\n\t\tconst x = this.config.left = parseInt(drag.style.left,10);\n\t\tconst y = this.config.top = parseInt(drag.style.top,10);\n\n\t\twebix.DragControl.top = webix.DragControl.left = 0;\n\n\t\tthis.callEvent(\"onViewMoveEnd\", [x, y]);\n\t\treturn;\n\t},\n\tgetMenu:function(){\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\t\tif(!this._menu){\n\t\t\tlet data = [\n\t\t\t\t{ value:labels[\"export-view\"], submenu:[\n\t\t\t\t\t{ id:\"pdf\", value:labels[\"export-view-pdf\"] },\n\t\t\t\t\t{ id:\"png\", value:labels[\"export-view-png\"] },\n\t\t\t\t\t{ id:\"excel\", value:labels[\"export-view-excel\"] }\n\t\t\t\t] }\n\t\t\t];\n\n\t\t\tif(!webix.$$(this.config.master).getTopParentView().config.readonly)\n\t\t\t\tdata = [\n\t\t\t\t\t{ id:\"edit\", value:labels[\"edit-view\"] },\n\t\t\t\t\t...data,\n\t\t\t\t\t{ id:\"del\", value:labels[\"remove-view\"] }\n\t\t\t\t];\n\n\t\t\tthis._menu = webix.ui({\n\t\t\t\tview:\"contextmenu\",\n\t\t\t\tsubmenuConfig:{\n\t\t\t\t\texternalUI: this.config.id\n\t\t\t\t},\n\t\t\t\tdata:data,\n\t\t\t\ton:{\n\t\t\t\t\tonMenuItemClick: id => this._menuActions(id),\n\t\t\t\t\tonBeforeShow: () => this._toggleExcel()\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst dots = webix.html.create(\"span\", {\"class\":\"webix_ssheet_view_menu webix_icon wxi-dots\"});\n\t\t\tthis._clickEv = webix.event(dots, \"click\", ()=> {\n\t\t\t\tif(this._menu.isVisible())\n\t\t\t\t\tthis._menu.hide();\n\t\t\t\telse\n\t\t\t\t\tthis._menu.show(dots);\n\t\t\t});\n\t\t\tthis.$view.firstChild.appendChild(dots);\n\t\t}\n\t\treturn this._menu;\n\t},\n\t_menuActions:function(id){\n\t\tswitch(id){\n\t\t\tcase \"del\":\n\t\t\t\tthis.callEvent(\"onViewRemove\", []);\n\t\t\t\tbreak;\n\t\t\tcase \"edit\":\n\t\t\t\tthis.callEvent(\"onViewEdit\", []);\n\t\t\t\tbreak;\n\t\t\tcase \"pdf\":\n\t\t\t\twebix.toPDF(this.getBody(), {display:\"image\"});\n\t\t\t\tbreak;\n\t\t\tcase \"png\":\n\t\t\t\twebix.toPNG(this.getBody());\n\t\t\t\tbreak;\n\t\t\tcase \"excel\":\n\t\t\t\twebix.toExcel(this.getBody(), {header: false});\n\t\t\t\tbreak;\n\t\t}\n\t},\n\t_toggleExcel:function(){\n\t\tconst view = this.getBody();\n\t\tif(view.data && view.data.pull)\n\t\t\tthis._menu.showItem(\"excel\");\n\t\telse\n\t\t\tthis._menu.hideItem(\"excel\");\n\t},\n\t_removeView:function(view){\n\t\tif(view && view.getTopParentView() == this)\n\t\t\tthis.callEvent(\"onViewRemove\", []);\n\t}\n}, webix.ui.window);","webix.protoUI({\n\tname: \"ssheet-series\",\n\t$init: function(config){\n\t\tconfig.rows = [\n\t\t\t{\n\t\t\t\tview: \"scrollview\",\n\t\t\t\tborderless: true,\n\t\t\t\tbody: {\n\t\t\t\t\tview: \"accordion\",\n\t\t\t\t\tcss: \"webix_ssheet_accordion\",\n\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\tmulti: true,\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\trows: [\n\t\t\t\t\t\tthis.getSectionConfig()\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonAfterScroll:function(){\n\t\t\t\t\t\t//close possibly open selector popups\n\t\t\t\t\t\twebix.callEvent(\"onClick\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ view:\"button\", label:webix.i18n.spreadsheet.labels[\"add-line\"], click:()=>{\n\t\t\t\tthis.addSection();\n\t\t\t}}\n\t\t];\n\t},\n\tgetSectionConfig: function(i){\n\t\tconst view = this;\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\t\tconst trashIcon = \"<span class='webix_icon webix_ssheet_series_icon wxi-trash'></span>\";\n\t\tconst padding = webix.skin.$active.dataPadding-2;\n\n\t\treturn {\n\t\t\tview:\"accordionitem\",\n\t\t\theader:`${labels[\"chart-item\"]} ${i ? i+1 : 1} ${trashIcon}`,\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\tpadding,\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth:180\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonChange: () => {\n\t\t\t\t\t\tthis.callEvent(\"onChange\", []);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", label:labels[\"chart-range\"], name:\"range\", range:true, on:{\n\t\t\t\t\t\tonChange: function(val, oldVal) {\n\t\t\t\t\t\t\tconst upper = val.toUpperCase();\n\t\t\t\t\t\t\tif(val != upper){\n\t\t\t\t\t\t\t\tthis.blockEvent();\n\t\t\t\t\t\t\t\tthis.setValue(upper);\n\t\t\t\t\t\t\t\tthis.unblockEvent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tview.callEvent(\"onRangeChange\", [upper, oldVal]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"chart-series-color\"], name:\"color\"},\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-tooltip\"], name:\"tooltip\" },\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-label\"], name:\"label\", hidden: !this.labelsVisible },\n\t\t\t\t\t{ view:\"richselect\", label:labels[\"chart-markers\"], value:\"square\", name:\"marker\", hidden: !this.markersVisible,\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t{id:\"square\", value:labels[\"chart-markers-square\"]},\n\t\t\t\t\t\t\t\t{id:\"triangle\", value:labels[\"chart-markers-triangle\"]},\n\t\t\t\t\t\t\t\t{id:\"diamond\", value:labels[\"chart-markers-diamond\"]},\n\t\t\t\t\t\t\t\t{id:\"round\", value:labels[\"chart-markers-round\"]}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\tonClick:{\n\t\t\t\t\"wxi-trash\": function(){\n\t\t\t\t\tconst layout = this.getParentView();\n\t\t\t\t\tlayout.removeView(this);\n\n\t\t\t\t\tconst childs = layout.getChildViews();\n\n\t\t\t\t\tfor (let i = 0; i < childs.length; i++) {\n\t\t\t\t\t\tchilds[i].define({header:`${labels[\"chart-item\"]} ${i+1} ${trashIcon}`});\n\t\t\t\t\t\tchilds[i].refresh();\n\t\t\t\t\t}\n\n\t\t\t\t\tview.callEvent(\"onChange\", []);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\taddSection: function(){\n\t\tconst layout = this.getLayout();\n\t\tconst lastIndex = layout.getChildViews().length;\n\t\tconst layoutId = layout.addView(this.getSectionConfig(lastIndex));\n\n\t\twebix.$$(layoutId).queryView({name: \"range\"}).focus();\n\t},\n\tsetValue: function(value){\n\t\tvalue = value || [];\n\n\t\tconst layout = this.getLayout();\n\t\tconst childs = layout.getChildViews();\n\t\tconst count = childs.length;\n\n\t\tif(count > value.length)\n\t\t\tfor(let i = count; i > value.length; i--)\n\t\t\t\tthis.getLayout().removeView(childs[i-1]);\n\t\telse if(value.length > count)\n\t\t\tfor(let i = value.length; i > count; i--)\n\t\t\t\tthis.addSection();\n\n\t\tfor(let i = 0; i < childs.length; i++){\n\t\t\tconst form = childs[i].getChildViews()[0];\n\t\t\tconst range = form.queryView({name: \"range\"});\n\n\t\t\t//block range events to ignore onRangeChange\n\t\t\trange.blockEvent();\n\t\t\tform.setValues(value[i]);\n\t\t\trange.unblockEvent();\n\t\t}\n\t},\n\tsetSubValue: function(sub, value){\n\t\tsub.blockEvent();\n\t\tsub.setValue(value);\n\t\tsub.unblockEvent();\n\t},\n\tgetLayout(){\n\t\treturn this.queryView(\"scrollview\").getBody();\n\t},\n\thideSubviews(name, show){\n\t\tif(name == \"marker\")\n\t\t\tthis.markersVisible = show;\n\t\telse\n\t\t\tthis.labelsVisible = show;\n\n\t\tthis.queryView({ name }, \"all\").forEach(view => {\n\t\t\tif(show)\n\t\t\t\tview.show();\n\t\t\telse\n\t\t\t\tview.hide();\n\t\t});\n\t},\n\tgetValue: function(){\n\t\tconst value = [];\n\n\t\tconst layout = this.getLayout();\n\t\tlayout.getChildViews().forEach(child => {\n\t\t\tvalue.push(child.getChildViews()[0].getValues());\n\t\t});\n\t\treturn value;\n\t}\n}, webix.ui.layout);","import {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {getDateEditFormat} from \"../operations/formats\";\n\nwebix.editors.excel_date = webix.extend({\n\tcreatePopup:function(){\n\t\tconst editor = webix.editors.excel_date;\n\n\t\tif(!editor.popup){\n\t\t\tconst popup = webix.ui({\n\t\t\t\tview:\"popup\",\n\t\t\t\tbody:{ \n\t\t\t\t\tview:\"calendar\",\n\t\t\t\t\ticons:true,\n\t\t\t\t\ttimepicker:true,\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonChange: function(val){\n\t\t\t\t\t\t\tval = val[0];\n\t\t\t\t\t\t\tthis.getParentView()._last_input_target.value = val ? getExcelDateFromJs(val) : \"\";\n\t\t\t\t\t\t\twebix.callEvent(\"onEditEnd\", []);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonEnter: function(){\n\t\t\t\t\t\twebix.callEvent(\"onEditEnd\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\teditor.popup = popup.config.id;\n\t\t}\n\n\t\treturn editor.popup;\n\t},\n\trender:function(){\n\t\tconst node = webix.html.create(\"div\", {\n\t\t\t\"class\":\"webix_dt_editor\"\n\t\t}, \"<input type='text'>\");\n\n\t\tthis.popup = this.createPopup();\n\n\t\twebix.event(node.firstChild, \"click\", ()=> this.getPopup().show(node));\n\n\t\treturn node;\n\t},\n\tgetPopup(){\n\t\treturn webix.$$(this.popup);\n\t},\n\tshowPopup:function(){\n\t\tconst input = this.getInputNode();\n\t\tconst popup = this.getPopup();\n\n\t\tpopup._last_input_target = input;\n\t\tpopup.show(input);\n\n\t\tinput.setAttribute(\"aria-expanded\", \"true\");\n\t},\n\tupdateCalendar(value){\n\t\tconst calendar = this.getPopup().getBody();\n\n\t\tcalendar.blockEvent();\n\t\tcalendar.setValue(value);\n\t\tcalendar.unblockEvent();\n\t},\n\tafterRender:function(){\n\t\tthis.showPopup();\n\t},\n\tsetValue:function(value){\n\t\tconst noDate = (value === \"\" || isNaN(value*1));\n\t\tvalue = noDate ? new Date() : getJsDateFromExcel(value);\n\t\tthis.updateCalendar(value);\n\n\t\tconst view = webix.$$(this.config.node).queryView(a => a.name === \"spreadsheet\", \"parent\");\n\t\tconst format = getDateEditFormat(view, this.config.row.id, this.config.id);\n\t\tthis.getInputNode().value = format(value);\n\t},\n\tgetValue:function(){\n\t\tconst value = this.getInputNode().value;\n\t\tthis.getPopup().hide();\n\t\treturn value;\n\t}\n}, webix.editors.text);","webix.editors.ss_richselect = webix.extend({\n\tgetFormat:function(value){\n\t\tconst list = this.getInputNode();\n\t\tlet item;\n\n\t\tif (value && list.exists(value))\n\t\t\titem = list.getItem(value);\n\t\treturn item && item.format;\n\t},\n\tpopupInit:function(popup){\n\t\twebix.editors.richselect.popupInit.apply(this, arguments);\n\n\t\tpopup.getList().define(\"template\", function(obj){\n\t\t\treturn obj.$value || obj.value;\n\t\t});\n\t}\n}, webix.editors.richselect);","import {changeAreaDecimals} from \"../operations/formats\";\n\nexport const actions = {\n\tspan: function(view){\n\t\tvar range = view.$$(\"cells\").getSelectArea();\n\t\tif(range){\n\t\t\tif(isMerged(view,range)){\n\t\t\t\tview.splitCell();\n\t\t\t}\n\t\t\telse{\n\t\t\t\tlet values = [];\n\t\t\t\tfor(let r = range.start.row; r<=range.end.row; r++){\n\t\t\t\t\tfor(let c = range.start.column; c<=range.end.column; c++){\n\t\t\t\t\t\tlet value = view.getCellValue(r,c);\n\t\t\t\t\t\tif(value) values.push(value);\n\t\t\t\t\t\tif(values.length >1) break;\n\t\t\t\t\t}\n\t\t\t\t\tif(values.length >1) break;\n\t\t\t\t}\n\t\t\t\tif(values.length>1){\n\t\t\t\t\tview.confirm({\n\t\t\t\t\t\ttext:webix.i18n.spreadsheet.labels[\"merge-cell-confirm\"]\n\t\t\t\t\t}).then(()=> view.combineCells() );\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tview.combineCells();\n\t\t\t}\n\t\t}\n\t},\n\tundo: function(view){\n\t\tview.undo();\n\t},\n\tredo: function(view){\n\t\tview.redo();\n\t},\n\t\"hide-gridlines\": function(view){\n\t\tview.hideGridlines(\"toggle\");\n\t},\n\t\"hide-headers\": function(view){\n\t\tview.hideHeaders(\"toggle\");\n\t},\n\t\"freeze-columns\": function(view){\n\t\tvar table = view.$$(\"cells\");\n\t\tvar select = table.getSelectedId();\n\t\tview.freezeColumns(select && select.column!=\"rowId\"?select.column : 0);\n\t},\n\t\"freeze-rows\":function(view){\n\t\tvar table = view.$$(\"cells\");\n\t\tvar select = table.getSelectedId();\n\t\tview.freezeRows(select ? select.row : 0);\n\t},\n\t\"increase-decimals\": function(view){\n\t\tchangeAreaDecimals(view, 1);\n\t},\n\t\"decrease-decimals\": function(view){\n\t\tchangeAreaDecimals(view, -1);\n\t},\n};\n\nfunction isMerged(view,range){\n\tvar i, j,\n\t\tc0 = range.start,\n\t\tc1 = range.end;\n\n\tfor( i = c0.row*1; i <= c1.row*1; i++ ){\n\t\tfor( j = c0.column*1; j <= c1.column*1; j++ ){\n\t\t\tif(view.$$(\"cells\").getSpan(i, j))\n\t\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n","import {toolbarSizes, defaultStyles} from \"./defaults\";\nimport {formatHelpers} from \"../operations/formats\";\n\n// options for 'font-family' select\nexport const fontFamily = [\n\t{id: \"Arial\", value: \"Arial\"},\n\t{id: \"'Roboto', sans-serif\", value: \"Roboto\"},\n\t{id: \"'PT Sans', Tahoma\", value: \"PT Sans\"},\n\t{id: \"Tahoma\", value: \"Tahoma\"},\n\t{id: \"Verdana\", value: \"Verdana\"},\n\t{id: \"Calibri, Tahoma\", value:\"Calibri\"}\n];\n\n// options for 'format' select\nfunction getCellFormats(){\n\tconst locale = webix.i18n.spreadsheet.labels;\n\treturn [\n\t\t{id: \"common\", value: locale.common },\n\t\t{id: \"price\", value: locale.currency, example: \"98.20\"},\n\t\t{id: \"int\", value: locale.number, example: \"2120.02\"},\n\t\t{id: \"percent\", value: locale.percent, example:\"0.5\"},\n\t\t{id: \"date\", value: locale.date, example:\"45000\"},\n\t\t{id: \"string\", value: locale.string, example:\"012345\"},\n\t\t{id: \"custom\", value: locale[\"custom-format\"]},\n\t];\n}\n\nexport function getColumnOperation(view){\n\tconst locale = webix.i18n.spreadsheet.menus;\n\tlet colOperations = [\n\t\t{ id:\"add\",    group:\"column\", value:locale[\"insert-column\"]},\n\t\t{ id:\"del\",    group:\"column\", value:locale[\"delete-column\"]},\n\t\t{ id:\"show\",   group:\"column\", value:locale[\"show-column\"]},\n\t\t{ id:\"hide\",   group:\"column\", value:locale[\"hide-column\"]}\n\t];\n\tif(view.config.resizeCell != false)\n\t\tcolOperations.push({ id:\"resize\", group:\"column\", value:locale[\"resize-column\"]});\n\treturn colOperations;\n}\n\nexport function getRowOperation(view){\n\tconst locale = webix.i18n.spreadsheet.menus;\n\tlet rowOperations = [\n\t\t{ id:\"add\",    group:\"row\", value:locale[\"insert-row\"]},\n\t\t{ id:\"del\",    group:\"row\", value:locale[\"delete-row\"]},\n\t\t{ id:\"show\",   group:\"row\", value:locale[\"show-row\"]},\n\t\t{ id:\"hide\",   group:\"row\", value:locale[\"hide-row\"]}\n\t];\n\tif(view.config.resizeCell != false)\n\t\trowOperations.push({ id:\"resize\", group:\"row\", value:locale[\"resize-row\"]});\n\treturn rowOperations;\n}\n\n// options for 'clear' select\nexport function getClearOperation(){\n\treturn [\n\t\t{id: \"clear-value\",               value: getLocaleClear(\"value\")},\n\t\t{id: \"clear-style\",               value: getLocaleClear(\"style\")},\n\t\t{id: \"clear-conditional-formats\", value: getLocaleClear(\"conditional-formats\")},\n\t\t{id: \"clear-dropdown-editors\",    value: getLocaleClear(\"dropdown-editors\")},\n\t\t{id: \"clear-comments\",            value: getLocaleClear(\"comments\")},\n\t\t{ $template: \"Separator\" },\n\t\t{id: \"clear-all\",                 value: getLocaleClear(\"all\")}\n\t];\n}\n\n// options for 'borders' select\nconst borders = [\n\t{id: \"no\", value: \"no\"},\n\t{id: \"left\", value: \"left\"},\n\t{id: \"top\", value: \"top\"},\n\t{id: \"right\", value: \"right\"},\n\t{id: \"bottom\", value: \"bottom\"},\n\t{id: \"all\", value: \"all\"},\n\t{id: \"outer\", value: \"outer\"},\n\t{id: \"top-bottom\", value: \"top-bottom\"}\n];\n\nfunction getLocaleClear(value){\n\tvar locale = webix.i18n.spreadsheet.menus;\n\treturn locale[\"clear\"] + \" \" + locale[\"clear-\"+value].toLowerCase();\n}\n\n// options for 'font-size' select\nfunction getFontSize(){\n\tvar numbers = [\n\t\t\"8\",\"9\",\"10\",\"11\",\"12\",\"14\",\"15\",\n\t\t\"16\",\"18\",\"20\",\"22\",\"24\",\"28\",\"36\"\n\t];\n\tvar  fontSize = [];\n\n\tfor(var i =0; i < numbers.length; i++){\n\t\tfontSize.push({id: numbers[i]+webix.i18n.spreadsheet.labels.px, value: numbers[i]});\n\t}\n\treturn fontSize;\n}\n\nexport const styleFormats = {\n\t\"font-weight\": \"bold\",\n\t\"font-style\": \"italic\",\n\t\"text-decoration\": \"underline\"\n};\n\nexport const ui = {\n\tbutton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-toggle\", width: config.width||toolbarSizes.width, id: config.name, name: config.name,  label: config.label,\n\t\t\tcss: config.css||\"\", onValue: styleFormats[config.name], offValue: \"normal\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\tcolorButton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-color\",  css: config.css,  name: config.name, width: config.width||toolbarSizes.width+24,\n\t\t\ttitle: \"<span class='webix_ssheet_button_icon webix_ssheet_color_button_icon webix_ssheet_icon ssi-\"+config.name+\"' ></span>\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\ttoggleButton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-toggle-silent\", width: toolbarSizes.width, id: config.name, name: config.name,\n\t\t\tlabel: \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+config.name+\"'></span>\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||\"\"\n\t\t};\n\t},\n\ticonButton: function(config){\n\t\tvar btn = webix.copy(config);\n\t\twebix.extend(btn, {view: \"button\", width: toolbarSizes.width, id: config.name,\n\t\t\tlabel: \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\"+config.name+\"'></span>\",\n\t\t\tcss: \"\",\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name]||webix.i18n.spreadsheet.menus[config.name]||\"\"\n\t\t});\n\t\tif(config.onValue){\n\t\t\twebix.extend(btn,{view: \"ssheet-toggle\", onValue: config.onValue, offValue: config.offValue},true);\n\t\t}\n\n\t\treturn btn;\n\t},\n\tsegmented: function(config){\n\t\treturn  {\n\t\t\tview: \"segmented\", name: config.name, css:config.css||\"\", width: config.width||toolbarSizes.width+76,  options:config.options\n\t\t};\n\t},\n\tselect: function(config){\n\t\twebix.extend(config,{\n\t\t\tview: \"richselect\",\n\t\t\tid: config.name,\n\t\t\tvalue: defaultStyles[config.name],\n\t\t\tsuggest: {\n\t\t\t\tcss: \"webix_ssheet_suggest\",\n\t\t\t\t//fitMaster: false,\n\t\t\t\tpadding: 0,\n\t\t\t\tdata: config.options\n\t\t\t}\n\t\t});\n\n\t\tconfig.tooltip = webix.i18n.spreadsheet.tooltips[config.name]||\"\";\n\t\tif(config.popupWidth){\n\t\t\tconfig.suggest.fitMaster = false;\n\t\t\tconfig.suggest.width = config.popupWidth;\n\t\t}\n\t\tif(config.popupTemplate)\n\t\t\tconfig.suggest.body = {\n\t\t\t\ttemplate: config.popupTemplate\n\t\t\t};\n\t\tif(config.popupEvents){\n\t\t\tconfig.suggest.body = config.suggest.body || {};\n\t\t\tconfig.suggest.body.on = config.popupEvents;\n\t\t}\n\t\treturn config;\n\t},\n\tseparator: function(){\n\t\treturn {\n\t\t\tview: \"ssheet-separator\"\n\t\t};\n\t},\n\ttitle: function(config){\n\t\tvar title = config.title;\n\t\tif(title.indexOf(\"$\") === 0)\n\t\t\ttitle = \"\";\n\t\ttitle = webix.i18n.spreadsheet.labels[config.title]||title;\n\n\t\treturn {\n\t\t\ttemplate: title, view: \"ssheet-bar-title\", height: toolbarSizes.titleHeight\n\t\t};\n\t},\n\tborders: function(config){\n\t\treturn {view: \"ssheet-borders\", width:config.width||toolbarSizes.width+24, data: borders, id: config.name, name: config.name,\n\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[config.name] };\n\t},\n\talign: function(config){\n\t\treturn {view: \"ssheet-align\", value: defaultStyles[config.name], width:config.width||toolbarSizes.width+24, data: config.options,\n\t\t\tname: config.name, tooltip: webix.i18n.spreadsheet.tooltips[config.name] };\n\t},\n\tcondFormat: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-cond-format\",\n\t\t\twidth: 40,\n\t\t\tid: config.name,\n\t\t\tname: config.name\n\t\t};\n\t}\n};\n\nexport const buttonsMap = {\n\t\"font-family\": function(){\n\t\treturn  ui.select({name: \"font-family\", options:fontFamily, width: 100});\n\t},\n\t\"font-size\": function(){\n\t\treturn  ui.select({name: \"font-size\", options:getFontSize(), width: 64});\n\t},\n\t\"font-weight\": function(){\n\t\treturn ui.button({name:\"font-weight\",label: \"B\", css: \"webix_ssheet_bold\"});\n\t},\n\t\"font-style\": function(){\n\t\treturn ui.button({name: \"font-style\",label: \"I\",css:\"webix_ssheet_italic\"});\n\t},\n\t\"text-decoration\": function(){\n\t\treturn ui.button({name: \"text-decoration\",label: \"U\",css: \"webix_ssheet_underline\"});\n\t},\n\t\"color\": function(){\n\t\treturn ui.colorButton({name: \"color\",icon:\"font\",css:\"webix_ssheet_color\"});\n\t},\n\t\"background\": function(){\n\t\treturn  ui.colorButton({name: \"background\",icon:\"paint-brush\",css:\"webix_ssheet_background\", width: 64});\n\t},\n\t\"borders\": function(){\n\t\treturn ui.borders({ name: \"borders\" });\n\t},\n\t\"text-align\": function(){\n\t\tvar locale = webix.i18n.spreadsheet.tooltips;\n\t\treturn ui.align({name: \"text-align\", css: \"webix_ssheet_align\", options:[\n\t\t\t{id: \"left\", css: \"webix_ssheet_icon ssi-left\", tooltip: locale[\"align-left\"]},\n\t\t\t{id: \"center\", css: \"webix_ssheet_icon ssi-center\", tooltip: locale[\"align-center\"]},\n\t\t\t{id: \"right\", css: \"webix_ssheet_icon ssi-right\", tooltip: locale[\"align-right\"]}\n\t\t]});\n\t},\n\t\"vertical-align\": function(){\n\t\tvar locale = webix.i18n.spreadsheet.tooltips;\n\t\treturn  ui.align({name: \"vertical-align\", css: \"webix_ssheet_align\", options:[\n\t\t\t{id: \"top\", css: \"webix_ssheet_icon ssi-top\", tooltip: locale[\"align-top\"]},\n\t\t\t{id: \"middle\", css: \"webix_ssheet_icon ssi-middle\", tooltip: locale[\"align-middle\"]},\n\t\t\t{id: \"bottom\", css: \"webix_ssheet_icon ssi-bottom\", tooltip: locale[\"align-bottom\"]}\n\t\t]});\n\t},\n\t\"wrap\": function(){\n\t\treturn ui.iconButton({name: \"wrap\", onValue:\"wrap\", offValue:\"nowrap\"});\n\t},\n\t\"format\": function(){\n\t\treturn ui.select({\n\t\t\tname: \"format\", width: 106, options:getCellFormats(), popupWidth: 180,\n\t\t\tpopupTemplate: function(obj){\n\t\t\t\t//make it look like an actual cell\n\t\t\t\tvar format =  formatHelpers[obj.id] ? formatHelpers[obj.id].getFormat : \"\";\n\t\t\t\tvar cell = {css:\"\"};\n\t\t\t\tvar example = format && obj.example?format(obj.example, cell):\"\";\n\t\t\t\treturn obj.value + (format?\"<span class='webix_ssheet_right\"+(cell.css?\" \"+cell.css:\"\")+\"'>\"+example+\"</span>\":\"\");\n\t\t\t},\n\t\t\tpopupEvents:{\n\t\t\t\tonItemClick: function(id){\n\t\t\t\t\tif(id == \"custom\")\n\t\t\t\t\t\tthis.getTopParentView().callEvent(\"onCommand\", [{id:id}]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t\"column\": function(view){\n\t\treturn {\n\t\t\tname: \"column\",\n\t\t\tview: \"ssheet-button\", icon: \"column\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getColumnOperation(view)\n\t\t};\n\t},\n\t\"row\": function(view){\n\t\treturn {\n\t\t\tname: \"row\", view: \"ssheet-button\", icon: \"row\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getRowOperation(view)\n\t\t};\n\t},\n\t\"clear\": function(){\n\t\treturn {\n\t\t\tname: \"clear\", view: \"ssheet-button\", icon: \"clear-styles\",\n\t\t\tarrow: true, area: true, width: 58,\n\t\t\toptions:getClearOperation()\n\t\t};\n\t},\n\t\"image\":function(){\n\t\treturn {\n\t\t\tname:\"image\", view:\"ssheet-button\", icon:\"add-image\",\n\t\t\tarrow:true, options:[\n\t\t\t\t{id:\"add-image-cell\", value: webix.i18n.spreadsheet.labels[\"add-image-cell\"]},\n\t\t\t\t{id:\"add-image-top\", value: webix.i18n.spreadsheet.labels[\"add-image-top\"]}\n\t\t\t]\n\t\t};\n\t},\n\t\"graph\":function(){\n\t\treturn {\n\t\t\tname:\"graph\", view:\"ssheet-button\", icon:\"add-sparkline\",\n\t\t\tarrow:true, options:[\n\t\t\t\t{id:\"add-sparkline\", value:webix.i18n.spreadsheet.labels[\"add-sparkline\"]},\n\t\t\t\t{id:\"add-chart\", value: webix.i18n.spreadsheet.labels[\"add-chart\"]}\n\t\t\t]\n\t\t};\n\t},\n\t\"comment\": function(){\n\t\treturn {\n\t\t\tname: \"comment\",\n\t\t\tview: \"ssheet-button\", icon: \"comments\",\n\t\t\tarrow: true, area: true, width: 55\n\t\t};\n\t},\n\t\"create-filter\": function(){\n\t\treturn ui.toggleButton({name: \"create-filter\"});\n\t},\n\t\"hide-gridlines\": function(){\n\t\treturn ui.toggleButton({name: \"hide-gridlines\"});\n\t},\n\t\"hide-headers\": function(){\n\t\treturn ui.toggleButton({name: \"hide-headers\"});\n\t}\n};","import {toolbarSizes} from \"./defaults\";\n\nfunction getText(text){\n\tvar locale = webix.i18n.spreadsheet;\n\treturn locale.menus[text] || locale.labels[text] || locale.tooltips[text] || text;\n}\nfunction calcButtons(){\n\tvar i, name, width,\n\t\tgroups = {\n\t\t\t\"undo\":[\"undo\",\"redo\"],\n\t\t\t\"insert\":[\"add-sparkline\",\"add-image\",\"add-comment\"]\n\t\t},\n\t\tresult = {};\n\n\tfor( name in groups){\n\t\tresult[name] = 0;\n\t\tfor(i=0; i < groups[name].length; i++){\n\t\t\twidth = webix.html.getTextSize(getText(groups[name][i]), \"webix_ssheet_button_measure\").width + 7;\n\t\t\tresult[name] = Math.max(width,result[name]);\n\t\t}\n\t}\n\treturn result;\n}\nexport function getAllElements(){\n\tvar sizes = calcButtons();\n\tvar titleHeight = toolbarSizes.titleHeight;\n\n\treturn [\n\t\t{\n\t\t\tpadding: 3,\n\t\t\tmargin: 0,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"sheet\", view: \"ssheet-button-icon-top\", label: getText(\"sheet\"), arrow: true,\n\t\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t\t{id: \"new-sheet\"},\n\t\t\t\t\t\t\t\t{id: \"copy-sheet\"},\n\t\t\t\t\t\t\t\t{id: \"remove-sheet\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button: \"excel-import\"},\n\t\t\t\t\t\t\t\t{$button: \"excel-export\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button: \"print\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t\t{template: getText(\"file\"), view: \"ssheet-bar-title\", height: titleHeight, width: 85}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{$button: \"undo\", view: \"ssheet-button\", label: getText(\"undo\"), width: sizes.undo },\n\t\t\t\t{$button: \"redo\", view: \"ssheet-button\", label: getText(\"redo\"), width: sizes.undo},\n\t\t\t\t{template: getText(\"undo-redo\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t\t{$button: \"font-family\", width: (webix.skin.$active.inputHeight+2)*3+4},\n\t\t\t\t\t\t\t\t{$button: \"font-size\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{$button: \"borders\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmargin: 2,\n\t\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t\t{$button: \"font-weight\"},\n\t\t\t\t\t\t\t\t{$button: \"font-style\"},\n\t\t\t\t\t\t\t\t{$button: \"text-decoration\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\t{$button: \"background\"},\n\t\t\t\t\t\t{$button: \"color\"}\n\t\t\t\t\t]\n\n\t\t\t\t},\n\t\t\t\t{template: getText(\"font\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"text-align\"},\n\t\t\t\t\t\t{$button: \"span\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"vertical-align\"},\n\n\t\t\t\t\t\t{$button: \"wrap\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{template: getText(\"align\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{$button: \"format\"},\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"increase-decimals\"},\n\t\t\t\t\t\t{$button: \"decrease-decimals\"}\n\t\t\t\t\t]\n\t\t\t\t},\n\n\t\t\t\t{template: getText(\"number\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{cols:[\n\t\t\t\t\t{ $button: \"sort-asc\"},\n\t\t\t\t\t{ $button: \"create-filter\"},\n\t\t\t\t\t{ $button: \"conditional-format\"},\n\t\t\t\t\t{ $button: \"add-link\"},\n\t\t\t\t\t{ $button: \"clear\"}\n\t\t\t\t]},\n\t\t\t\t{cols:[\n\t\t\t\t\t{ $button: \"sort-desc\"},\n\t\t\t\t\t{ $button: \"add-range\"},\n\t\t\t\t\t{ $button: \"lock-cell\"},\n\t\t\t\t\t{ $button: \"add-dropdown\"}\n\t\t\t\t]},\n\t\t\t\t{template: getText(\"edit\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{$button: \"image\", view: \"ssheet-button\", label: getText(\"image\"), width:sizes.insert},\n\t\t\t\t\t\t{$button: \"add-comment\", view: \"ssheet-button\", label: getText(\"comment\"), width:sizes.insert},\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{$button: \"graph\", view: \"ssheet-button\", label: getText(\"graph\"), width:sizes.insert},\n\t\t\t\t{template: getText(\"insert\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\n\t\t{view: \"ssheet-separator\"},\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows:[\n\t\t\t\t{\n\t\t\t\t\tcols:[\n\t\t\t\t\t\t{rows:[\n\t\t\t\t\t\t\t{$button:\"row\"},\n\t\t\t\t\t\t\t{$button:\"column\"}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button:\"hide-gridlines\"},\n\t\t\t\t\t\t\t\t{$button:\"hide-headers\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{$button:\"freeze-rows\"},\n\t\t\t\t\t\t\t\t{$button:\"freeze-columns\"}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{template: getText(\"view\"), view: \"ssheet-bar-title\", height: titleHeight}\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t\t{}\n\t];\n}","import {actions} from \"./toolbar/actions\";\nimport {defaultStyles} from \"./toolbar/defaults\";\nimport {toolbarButtons, getButtons} from \"./toolbar/helpers\";\nimport * as elm from \"./toolbar/all_elements\";\nimport {isCustom} from \"./operations/formats\";\nimport {getStyle, getFormat} from \"./operations/styles\";\n\nconst buttons = {\n\t\"undo-redo\": [\"undo\",\"redo\"],\n\t\"font\": [\"font-family\",\"font-size\",\"font-weight\",\"font-style\",\"text-decoration\",\"color\",\"background\",\"borders\"],\n\t\"align\": [\"text-align\",\"vertical-align\",\"wrap\",\"span\"],\n\t\"format\": [\"format\"]\n};\n\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tif (action.id == \"toolbar-update\")\n\t\t\tupdateValue(view, action.name, action.value);\n\t});\n\n\tvar elements = [];\n\n\tif(view.config.toolbar){\n\t\tlet allElements =  view.config.toolbar;\n\t\tif(allElements == \"full\"){\n\t\t\tallElements = elm.getAllElements();\n\t\t\tif(webix.isUndefined(view.config.bottombar))\n\t\t\t\tview.config.bottombar = true;\n\t\t}\n\t\telements =   toolbarButtons(view, allElements);\n\t}\n\telse\n\t\telements =   getButtons(view, view.config.buttons || buttons);\n\n\tvar bar = {\n\t\tview:\"toolbar\",\n\t\tcss: \"webix_ssheet_toolbar webix_layout_toolbar\",\n\t\tid:\"bar\",\n\t\tpadding:0,\n\t\telements: elements,\n\t\ton: {\n\t\t\tonChange: function (){\n\t\t\t\tvar source = this.$eventSource;\n\t\t\t\tvar value = source.getValue();\n\t\t\t\tvar name = source.config.name;\n\t\t\t\tif(name == \"format\" && value == \"common\")\n\t\t\t\t\tvalue = \"\";\n\t\t\t\tif(!(name == \"format\" && value == \"custom\"))\n\t\t\t\t\tview.callEvent(\"onStyleSet\", [name, value]);\n\t\t\t},\n\t\t\tonItemClick: function (id){\n\t\t\t\tvar viewId = view.innerId(id);\n\t\t\t\tif (actions[viewId])\n\t\t\t\t\tactions[viewId].call(this, view);\n\t\t\t\telse\n\t\t\t\t\tview.callEvent(\"onCommand\", [{ id: viewId }]);\n\t\t\t}\n\t\t}\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"toolbar\", bar]);\n\treturn bar;\n\n}\n\nfunction ready(view){\n\tview.attachEvent(\"onAfterSelect\", (selected) => setValues(view, selected));\n}\n\nfunction setValues(view, selected) {\n\tconst barStyles = getBarStyles(view, selected);\n\tview.$$(\"bar\").setValues(barStyles);\n}\n\nfunction updateValue(view, name, value){\n\tconst element = view.$$(\"bar\").elements[name];\n\n\tif (element)\n\t\telement.setValue(value);\n}\n\nfunction getBarStyles(view, selected){\n\tconst dropdowns = [\n\t\t\"font-family\",\n\t\t\"font-size\",\n\t\t\"text-align\",\n\t\t\"vertical-align\",\n\t\t\"format\",\n\t\t\"background\",\n\t\t\"color\"\n\t];\n\n\tconst cell = selected[0];\n\tconst barStyles = getCellStyles(view, cell);\n\n\tfor(let i = 1; i < selected.length; i++){\n\t\tconst cellStyle = getCellStyles(view, selected[i]);\n\n\t\tfor(let k = dropdowns.length-1; k >= 0; k--){\n\t\t\tconst property = dropdowns[k];\n\t\t\tif(barStyles[property] != cellStyle[property]){\n\t\t\t\tdelete barStyles[property];\n\t\t\t\tdropdowns.splice(k, 1);\n\t\t\t}\n\t\t}\n\n\t\tif(!dropdowns.length)\n\t\t\tbreak;\n\t}\n\n\treturn barStyles;\n}\n\nfunction getCellStyles(view, cell){\n\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\tif(span)\n\t\t[cell.row, cell.column] = span;\n\n\tconst obj = getStyle(view, cell);\n\tconst styles = obj ? webix.copy(obj.props) : {};\n\n\tfor (let i in defaultStyles)\n\t\tif(!styles[i])\n\t\t\tstyles[i] = defaultStyles[i];\n\n\tconst format = getFormat(view, cell.row, cell.column) || \"common\";\n\tstyles.format = isCustom(format) ? \"custom\" : format;\n\n\treturn styles;\n}","import {ui, buttonsMap} from \"./buttons\";\n\nexport function toolbarButtons(view,structure){\n\tvar checkButtons = function(cells){\n\t\tfor(var i =0; i < cells.length; i++){\n\t\t\tvar name = cells[i].$button;\n\t\t\tif (name){\n\t\t\t\tvar base = buttonsMap[name] ? buttonsMap[name](view) : ui.iconButton({name:name});\n\t\t\t\twebix.extend(cells[i], base);\n\t\t\t}\n\t\t\t\n\t\t\tif(cells[i].rows)\n\t\t\t\tcheckButtons(cells[i].rows);\n\t\t\tif(cells[i].cols)\n\t\t\t\tcheckButtons(cells[i].cols);\n\t\t}\n\t};\n\tcheckButtons(structure);\n\treturn structure;\n}\n\nexport function getButtons(view,structure){\n\tvar config = [];\n\tfor(var block in structure){\n\t\tconfig.push(elementsBlock(view, block, structure[block]));\n\t\tconfig.push(ui.separator());\n\t}\n\treturn config;\n}\n\nfunction blockColumns(view, buttons){\n\tvar cols = [];\n\tfor(var i =0; i < buttons.length; i++){\n\t\tlet name = buttons[i];\n\t\tif(typeof name == \"object\"){\n\t\t\tcols.push(name);\n\t\t}\n\t\telse {\n\t\t\tvar base = buttonsMap[name] ? buttonsMap[name](view) : ui.iconButton({name:name});\n\t\t\tcols.push(base);\n\t\t}\n\t}\n\treturn cols;\n}\n\n\nfunction elementsBlock(view, name, columns){\n\tvar block = {\n\t\trows:[\n\t\t\t{\n\t\t\t\tpadding:2,\n\t\t\t\tcols:[{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols: blockColumns(view, columns)\n\t\t\t\t}]\n\t\t\t},\n\t\t\tui.title({title:name})\n\t\t]\n\t};\n\treturn block;\n}","import {getTextSize} from \"./styles\";\n\nexport function selectRow(row, view, endRow){\n\tvar columns = view.$$(\"cells\").config.columns;\n\tvar firstColumn = columns[0].id == \"rowId\" ? 1 : 0;\n\n\tvar start = {\n\t\trow:row,\n\t\tcolumn:columns[firstColumn].id\n\t};\n\tvar last = {\n\t\trow: (endRow || row),\n\t\tcolumn: columns[columns.length-1].id\n\t};\n\n\tif(start.column && last.column)\n\t\t_selectRange(start, last, view);\n}\n\nexport function selectAll(view){\n\tvar order = view.$$(\"cells\").data.order;\n\tvar columns = view.$$(\"cells\").config.columns;\n\tvar firstColumn = columns[0].id == \"rowId\" ? 1 : 0;\n\n\tvar start = {\n\t\trow: order[0],\n\t\tcolumn: columns[firstColumn].id\n\t};\n\tvar last = {\n\t\trow: order[order.length-1],\n\t\tcolumn: columns[columns.length-1].id\n\t};\n\n\tif(start.column && last.column)\n\t\t_selectRange(start, last, view);\n}\n\nexport function selectColumn(column, view, endColumn){\n\tvar order = view.$$(\"cells\").data.order;\n\tvar startRow = order[0];\n\tvar lastRow = order[order.length-1];\n\n\tvar start = {row: startRow, column: column};\n\tvar last = {row: lastRow, column: (endColumn || column) };\n\n\t_selectRange(start, last, view);\n}\n\nexport function isColSelected(column, view){\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\tif (selectedArea){\n\t\tif (column >= selectedArea.start.column && column <= selectedArea.end.column)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function isCellSelected(row, column, view){\n\treturn isRowSelected(row, view) && isColSelected(column, view);\n}\n\nexport function isRowSelected(row, view){\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\tif (selectedArea){\n\t\tif (row >= selectedArea.start.row && row <= selectedArea.end.row)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function selectColumns(column, view) {\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\n\tif (!selectedArea)\n\t\tselectColumn(column, view);\n\telse {\n\t\tlet col1 = Math.min(selectedArea.start.column, selectedArea.end.column, column);\n\t\tlet col2 = Math.max(selectedArea.start.column, selectedArea.end.column, column);\n\t\tselectColumn(col1, view, col2);\n\t}\n}\n\nfunction _selectRange(a, b, view){\n\tview.$$(\"cells\").addSelectArea(a, b);\n}\n\n\nexport function adjustColumn(column, view) {\n\tlet width = 25;\n\tconst columnWidth = view._table.getColumnConfig(column).width;\n\n\tview._table.eachRow(function(row) {\n\t\tconst span = view._table.getSpan(row, column);\n\t\tif(span && span[2] > 1)\n\t\t\treturn;\n\n\t\tconst text = this.getText(row, column);\n\t\tconst style = view.getStyle(row, column);\n\t\tconst css = style ? style.id : \"\";\n\n\t\tif (text.replace(/<\\/?[^>]+(>|$)/g, \"\")) {\n\t\t\tconst size = getTextSize(view, text, css);\n\n\t\t\tif(view.getCellEditor(row, column))\n\t\t\t\tsize.width += 20;\n\t\t\tif(view.getCellFilter(row, column))\n\t\t\t\tsize.width += 20;\n\n\t\t\tif(style && style.props.wrap == \"wrap\" && size.width > columnWidth)\n\t\t\t\tsize.width = columnWidth;\n\t\t\tif (size.width > width)\n\t\t\t\twidth = size.width;\n\t\t}\n\t});\n\tview._table.setColumnWidth(column, width);\n}\n\nexport function adjustRow(row, view) {\n\tlet height = 25;\n\n\tview._table.eachColumn(function(column) {\n\t\tif(column != \"rowId\"){\n\t\t\tconst text = this.getText(row, column);\n\n\t\t\t// if there is text wrap in cell we need to know width to get correct height\n\t\t\tlet width = this.getColumnConfig(column).width;\n\t\t\tconst span = view._table.getSpan(row, column);\n\t\t\tif(span)\n\t\t\t\twidth = view._table.getSpanNode({row:span[0], column:span[1]}).offsetWidth;\n\n\t\t\tlet style = view.getStyle(row, column);\n\t\t\tlet css = style ? style.id : \"\";\n\n\t\t\tif (text.replace(/<\\/?[^>]+(>|$)/g, \"\")) {\n\t\t\t\tlet size = getTextSize(view, text, css, width);\n\t\t\t\tif (size.height > height) height = size.height;\n\t\t\t}\n\t\t}\n\t});\n\tview._table.setRowHeight(row, height);\n}\n\nexport function highlightColRow(start, end, view){\n\tif(!view._table.config.header) return;\n\n\tconst grid = view._table;\n\n\tconst css = \"webix_highlight\";\n\n\tlet sr = start.row, er = end.row, sc = start.column, ec = end.column;\n\n\tconst columns = grid.config.columns;\n\tconst firstColumn = columns[1].id;\n\n\tif(sc == \"rowId\"){\n\t\tif(sc == ec){\n\t\t\tstart.column = sc = firstColumn;\n\t\t\tend.column = ec = columns[ columns.length-1 ].id;\n\t\t}\n\t\telse\n\t\t\tstart.column = sc = firstColumn;\n\t}\n\telse if(ec == \"rowId\")\n\t\tend.column = ec = firstColumn;\n\n\tif(er<sr) [sr, er] = [er, sr];\n\tif(ec<sc) [sc, ec] = [ec, sc];\n\n\tgrid.eachRow(function(row){\n\t\tif(row < sr || row > er)\n\t\t\tgrid.removeCellCss(row, \"rowId\", css, true);\n\t\telse\n\t\t\tgrid.addCellCss(row, \"rowId\", css, true);\n\t});\n\twebix.delay(() => grid.refresh());\n\n\tgrid.eachColumn(function(col){\n\t\tconst node = grid.getHeaderNode(col);\n\t\tif(col == \"rowId\" || !node) return;\n\n\t\tif(col < sc || col > ec)\n\t\t\twebix.html.removeCss(node, css);\n\t\telse\n\t\t\twebix.html.addCss(node, css, true);\n\t});\n}","import group from \"./undo_group\";\n\nexport const lockCss = \"webix_lock\";\n\nexport function init(view){\n\tview._locks = {};\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, mode) => {\n\t\tif (type === \"lock\") lockCell(view, row, column, !!mode, true);\n\t});\n\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"lock-cell\")\n\t\t\tlock(view);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._locks = {};\n}\n\nexport function lockCell(view, row, column, mode, silent){\n\tvar table = view.$$(\"cells\");\n\tif (typeof row === \"object\" && typeof column === \"object\"){\n\t\tgroup.set(function() {\n\t\t\t_mapCellsCalls(row, column, function(row, column){\n\t\t\t\tlockCell(view, row, column, mode, true);\n\t\t\t});\n\t\t});\n\t} else {\n\t\tmode = ((mode === false) ? false : true);\n\t\tvar objrow = view._locks[row] = view._locks[row] || {};\n\t\tobjrow[column] = mode;\n\t\tif (mode)\n\t\t\ttable.addCellCss(row, column, lockCss, true);\n\t\telse\n\t\t\ttable.removeCellCss(row, column, lockCss, true);\n\n\t\tview.callEvent(\"onAction\", [\"lock\", { row, column, value: !mode, newValue: mode }]);\n\t}\n\n\tif (!silent)\n\t\ttable.refresh();\n}\n\nfunction _mapCellsCalls(start, end, handler,master){\n\tfor (let x = start.row; x<=end.row; x++)\n\t\tfor (let y = start.column; y<=end.column; y++)\n\t\t\thandler.call(master||this, x, y);\n}\n\nexport function isCellLocked(view, row, column){\n\treturn view._locks[row]?view._locks[row][column]:false;\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\tlocked = [];\n\tfor(row in view._locks){\n\t\tfor(column in view._locks[row])\n\t\t\tif(view._locks[row][column])\n\t\t\t\tlocked.push([row,column]);\n\t}\n\tdata.locked = locked;\n}\n\nexport function load(view,data){\n\tvar i,\n\t\tlocked = data.locked;\n\n\tif(locked)\n\t\tfor(i = 0; i < locked.length; i++)\n\t\t\tlockCell(view, locked[i][0],locked[i][1],true, true);\n}\n\nfunction lock(view){\n\tvar block = view.$$(\"cells\").getSelectArea();\n\tif (block){\n\t\tvar mode = view.isCellLocked(block.start.row, block.start.column);\n\t\tview.lockCell(block.start, block.end, !mode);\n\t}\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet locked = data.locked,\n\t\ti = locked.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = locked[i];\n\t\t\tif(row && name == \"row\" && row>= start.row || column && name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete lock mark if row was deleted\n\t\t\t\t\t\tlocked.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tlocked[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tlocked.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tlocked[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","import {lockCss} from \"./lock_cell\";\nimport {save} from \"./save\";\n\nexport function init(view){\n\tview.attachEvent(\"onStyleChange\", (row, column, style) => {\n\t\tvar span = getSpan(view, row, column);\n\t\tif (span){\n\t\t\tvar extraCss = getExtraCss(view, row, column);\n\t\t\tspan[3] = (style ? style.id : \"\") + (extraCss ? (\" \" + extraCss) : \"\");\n\t\t}\n\t});\n\n\tview.attachEvent(\"onDataParse\", (data) => {\n\t\tparse(view, data);\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => {\n\t\tserialize(view, data);\n\t});\n\t\n\tview.attachEvent(\"onUndo\", (type, row, column, value, isUndo) => {\n\t\tif(type == \"span\" || type == \"split\"){\n\t\t\tif (type == \"span\") \n\t\t\t\tisUndo = !isUndo;\n\t\t\tundoSpan(view, row, column, value, isUndo);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", (name, options) => {\n\t\tif(name == \"lock\")\n\t\t\tsetSpanCss(view, options.row, options.column, lockCss, options.newValue);\n\t\telse if(name == \"before-grid-change\")\n\t\t\tupdatePosition(view, options.name, options.inc, options.data, options.start);\n\t\telse if(name == \"check-borders\")\n\t\t\treturn checkSpanBorders(view, options.row, options.column, options.area, options.mode);\n\t});\n}\n\nfunction getSpan(view, row, column){\n\tvar item = view.$$(\"cells\").getSpan()[row];\n\tif (item)\n\t\treturn item[column];\n}\n\nfunction parse(view, data){\n\tif (data.spans)\n\t\tfor (var i = 0; i < data.spans.length; i++) {\n\t\t\tvar span = data.spans[i];\n\t\t\taddSpan( view,\n\t\t\t\t{ row: span[0], column: span[1] },\n\t\t\t\tspan[2]*1,\n\t\t\t\tspan[3]*1,\n\t\t\t\ttrue \n\t\t\t);\n\t\t}\n}\n\nfunction serialize(view, data){\n\tvar spans = [];\n\tvar pull = view.$$(\"cells\").getSpan();\n\tif (pull){\n\t\tfor (var rid in pull){\n\t\t\tvar row = pull[rid];\n\t\t\tfor (var cid in row){\n\t\t\t\tvar span = row[cid];\n\t\t\t\tspans.push([rid*1, cid*1, span[0], span[1]]);\n\t\t\t}\n\t\t}\n\n\t\tdata.spans = spans;\n\t}\n}\n\nexport function addSpan(view, cell, x, y, silent){\n\tif (x<2 && y<2) return;\n\n\tif(silent || view.callEvent(\"onBeforeSpan\", [cell.row, cell.column, [x, y]])){\n\t\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\t\tlet css = ( obj && obj.style ) || \"\";\n\t\tvar extraCss = getExtraCss(view, cell.row, cell.column);\n\t\tif (extraCss)\n\t\t\tcss += \" \" + extraCss;\n\n\t\tsetSpanValue(view, cell, x, y);\n\t\tview.$$(\"cells\").addSpan(cell.row, cell.column, x, y, null, css);\n\t\tif (!silent){\n\t\t\tview.callEvent(\"onAfterSpan\", [cell.row, cell.column, [x, y]]);\n\t\t\tsave(view, \"spans\", {\n\t\t\t\trow:cell.row, column: cell.column,\n\t\t\t\tx:x, y:y\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function removeSpan(view, cell){\n\tvar span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\tif(span && view.callEvent(\"onBeforeSplit\", [ cell.row, cell.column, [span[2], span[3]] ])){\n\t\tview.$$(\"cells\").removeSpan(cell.row, cell.column);\n\t\tview.callEvent(\"onAfterSplit\", [ cell.row, cell.column, [span[2], span[3]] ]);\n\t\tsave(view, \"spans\", {\n\t\t\trow:cell.row, column: cell.column,\n\t\t\tx:0, y:0\n\t\t});\n\t}\n}\n\nexport function getRange(sel){\n\tvar lx, ly, rx, ry;\n\trx = ry = 0;\n\tlx = ly = Infinity;\n\n\tfor (var i=0; i<sel.length; i++){\n\t\tvar cx = sel[i].column*1;\n\t\tvar cy = sel[i].row*1;\n\n\t\tlx = Math.min(cx, lx);\n\t\trx = Math.max(cx, rx);\n\t\tly = Math.min(cy, ly);\n\t\try = Math.max(cy, ry);\n\t}\n\n\treturn {\n\t\tcell:{ row:ly, column:lx },\n\t\tx: rx-lx+1,\n\t\ty: ry-ly+1\n\t};\n}\n\nexport function setSpanCss(view, row, column, css, add){\n\tconst span = getSpan(view, row, column);\n\tif (span){\n\t\tif (add){\n\t\t\tif (span[3].indexOf(css) == -1)\n\t\t\t\tspan[3] += \" \" + css;\n\t\t} else {\n\t\t\tspan[3] = span[3].replace(\" \" + css, \"\");\n\t\t}\n\t}\n}\n\nfunction getExtraCss(view, row, column){\n\tlet extraCss = [];\n\tif(view.getCellEditor(row, column))\n\t\textraCss.push(\"ss_editor\");\n\tif(view.getCellFilter(row, column))\n\t\textraCss.push(\"ss_filter\");\n\treturn extraCss.join(\" \");\n}\n\nfunction undoSpan(view,row, column,value,isUndo){\n\tif(isUndo){\n\t\tremoveSpan(view,{row: row, column: column});\n\t}\n\telse{\n\t\taddSpan(view, {row: row, column: column}, value[0], value[1]);\n\t}\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet spans = data.spans;\n\tif(inc){\n\t\tfor(let i = spans.length-1;i >=0;i--){\n\t\t\tlet [row,column] = spans[i];\n\n\t\t\tif(inc < 0){//deleting\n\t\t\t\tif(name == \"row\" && row <= start.row-inc-1)\n\t\t\t\t\tinc = start.row - spans[i][0];\n\t\t\t\telse if (name == \"column\" && column <= start.column-inc-1)\n\t\t\t\t\tinc = start.column - spans[i][1];\n\t\t\t}\n\n\t\t\tif(name == \"row\" && row>= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tspans[i][0] =  name == \"row\"?row*1 + inc:row;\n\t\t\t\tspans[i][1] = name == \"column\"?column*1 + inc:column;\n\t\t\t}\n\t\t}\n\t}\n}\n\nvar borderChecks = {\n\t\"border-right\":\t\tfunction(row, column, span, area){\n\t\treturn area.end.column == column+span[0]-1;\n\t},\n\t\"border-bottom\":\tfunction(row, column, span, area){\n\t\treturn area.end.row == row+span[1]-1;\n\t}\n};\n\nfunction checkSpanBorders(view, row, column, area, mode){\n\tvar span = getSpan(view, row, column);\n\treturn span&&borderChecks[mode]?borderChecks[mode](row, column, span, area):false;\n}\n\n// clear merged cells except the first one\nfunction setSpanValue(view, cell, x, y){\n\tvar i,j,value,\n\t\trow = cell.row*1,\n\t\tcolumn = cell.column*1,\n\t\tisEmpty = !view.getCellValue(row,column);\n\tfor(i = row; i < row+y; i++){\n\t\tfor(j = column; j < column+x; j++) {\n\t\t\tvalue = view.getCellValue(i,j);\n\t\t\tif(value!==\"\" && (j != column || i != row)){\n\t\t\t\tif(isEmpty){\n\t\t\t\t\tisEmpty = false;\n\t\t\t\t\tview.setCellValue(row,column,value);\n\t\t\t\t}\n\t\t\t\tview.setCellValue(i,j,\"\");\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function adjustSpan (span, action, start, end, view, data, spanData){\n\tvar length = action.group == \"row\" ? span[3] : span[2];\n\tvar checkSpan = action.group == \"row\" ? [span[0]*1, span[0]*1+span[3]-1] : [span[1]*1, span[1]*1+span[2]-1];\n\tvar selection = action.group == \"row\" ? [start.row, end.row] : [start.column, end.column];\n\n\t//if we add, the number of selected rows/cols is added to span, so we need original selection length\n\tvar inc = selection[1] - selection[0] + 1;\n\n\tselection[0] = Math.max(selection[0], checkSpan[0]);\n\tselection[1] = Math.min(selection[1], checkSpan[1]);\n\n\tvar isFirstCell = selection[0] == checkSpan[0];\n\n\tif(selection[0] <= selection[1]){ //selection is in span\n\t\tif(action.id == \"del\") //if we delete, only rows/cols included into span\n\t\t\tinc = (selection[1] - selection[0]+ 1) * -1;\n\t\t//delete smth which starts as span and less than it's length\n\t\tif(action.id == \"del\" && isFirstCell && length > -1*inc){\n\t\t\tconst item = data.find(arr => arr[0] == span[0] && arr[1] == span[1]);\n\t\t\tif(item)\n\t\t\t\tspanData.push(item);\n\t\t}\n\n\t\tif(!(isFirstCell && action.id == \"add\")){\n\t\t\tspan[2] = action.group == \"column\" ? span[2]+inc : span[2];\n\t\t\tspan[3] = action.group == \"row\" ? span[3]+inc : span[3];\n\t\t}\n\t}\n\treturn span;\n}\n\nexport function pasteSpan(view, extra, row, col, cutted, translate){\n\t//existing span\n\tvar s = view._table.getSpan(row, col);\n\tif(extra && extra.span){\n\t\tvar span = extra.span;\n\t\t//if we are on start position for the future span\n\t\tif(row == span[0]*1+translate.row && col == span[1]*1+translate.column){\n\t\t\t//delete spans in future paste zone \n\t\t\tview._table.mapCells(row, col, span[3], span[2], (value, rid, cid) => {\n\t\t\t\ts = view._table.getSpan(rid,cid);\n\t\t\t\tif(s) removeSpan(view, {row:s[0], column:s[1]});\n\t\t\t}, true);\n\t\t\taddSpan(view, {row:row, column:col}, span[2], span[3]);\n\t\t\tif(cutted === 1)\n\t\t\t\tremoveSpan(view, {row:extra.row, column:extra.col});\n\t\t}\n\t}\n\telse if(s)\n\t\tremoveSpan(view, {row:s[0], column:s[1]});\n}","import {isDateInvalid} from \"../operations/formats\";\n\nfunction getText(text){\n\tvar locale = webix.i18n.spreadsheet.labels;\n\treturn locale[text] || text;\n}\nexport function getDefaultStyles(){\n\treturn [\n\t\t{name: getText(\"normal\"), css: \"webix_ssheet_condition_regular\"},\n\t\t{name: getText(\"neutral\"), css: \"webix_ssheet_condition_neutral\"},\n\t\t{name: getText(\"bad\"), css: \"webix_ssheet_condition_bad\"},\n\t\t{name: getText(\"good\"), css: \"webix_ssheet_condition_good\"}\n\t];\n}\n\nfunction isDate(value){\n\treturn value && !isNaN(value) && !isDateInvalid(value);\n}\n\nexport const conditions = {\n\tnumber:[\n\t\t{ id:\"greater\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 > b*1);\n\t\t}},\n\t\t{ id:\"less\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 < b*1);\n\t\t}},\n\t\t{ id:\"greaterOrEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 >= b*1);\n\t\t}},\n\t\t{ id:\"lessOrEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 <= b*1);\n\t\t}},\n\t\t{ id:\"equal\", batch:\"text\", handler:function(a,b){ return a == b; }},\n\t\t{ id:\"notEqual\", batch:\"text\", handler:function(a,b){ return a != b; }},\n\t\t{ id:\"contains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) !== -1;\n\t\t}},\n\t\t{ id:\"notContains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) === -1;\n\t\t}}\n\t],\n\ttext: [\n\t\t{ id:\"contains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) !== -1;\n\t\t}},\n\t\t{ id:\"notContains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) === -1;\n\t\t}},\n\t\t{ id:\"equal\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase() === b.toString().toLowerCase();\n\t\t}},\n\t\t{ id:\"notEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase() !== b.toString().toLowerCase();\n\t\t}},\n\t\t{ id:\"beginsWith\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().lastIndexOf(b.toString().toLowerCase(), 0) === 0;\n\t\t}},\n\t\t{ id:\"notBeginsWith\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().lastIndexOf(b.toString().toLowerCase(), 0) !== 0;\n\t\t}},\n\t\t{ id:\"endsWith\", batch:\"text\", handler:function(a,b){\n\t\t\ta = a.toString();\n\t\t\tb = b.toString();\n\t\t\treturn a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) !== -1;\n\t\t}},\n\t\t{ id:\"notEndsWith\", batch:\"text\", handler:function(a,b){\n\t\t\ta = a.toString();\n\t\t\tb = b.toString();\n\t\t\treturn a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) === -1;\n\t\t}}\n\t],\n\tdate: [\n\t\t{ id:\"greater\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a > b;\n\t\t}},\n\t\t{ id:\"less\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a < b;\n\t\t}},\n\t\t{ id:\"greaterOrEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a >= b;\n\t\t}},\n\t\t{ id:\"lessOrEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a <= b;\n\t\t}},\n\t\t{ id:\"equal\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a == b;\n\t\t}},\n\t\t{ id:\"notEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn !isDate(a) || a != b;\n\t\t}},\n\t\t{ id:\"between\", batch: \"daterangepicker\", handler: function(a, b){\n\t\t\tif (!isDate(a)) return false;\n\t\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t\t}},\n\t\t{ id:\"notBetween\", batch: \"daterangepicker\", handler: function(a, b){\n\t\t\tif (!isDate(a)) return false;\n\t\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t\t}}\n\t]\n};","import group from \"./undo_group\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {setSpanCss} from \"./spans\";\nimport {conditions} from \"../helpers/conditional\";\nimport {getType} from \"./types\";\n\nexport function init(view){\n\tview.conditions = {\n\t\t_empty:true,\n\t\t_pull: {},\n\t\thandlers: createRules(),\n\t\tadd: function(rId, cId, cond, val, style){\n\t\t\tadd.apply(this, [view, rId, cId, cond, val, style]);\n\t\t},\n\t\tupdate: function(r, c, data){\n\t\t\tupdate.apply(this, [view, r, c, data]);\n\t\t},\n\t\tremove,\n\t\tget,\n\t\tparse,\n\t\tserialize,\n\t\tclear\n\t};\n\n\tview.attachEvent(\"onConditionSet\", (data) => _setCondition(view, data));\n\n\tview.attachEvent(\"onUndo\", (type_action, row, column, value) => {\n\t\tif(type_action == \"condition\")\n\t\t\t_undoCondition(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => _serialize(view, data));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\n\tview.attachEvent(\"onReset\", () => view.conditions.clear() );\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\treset(view);\n}\n\nfunction createRules(){\n\tconst rules = webix.copy(conditions);\n\trules.number = rules.number.concat([\n\t\t{ id:\"between\", handler: function(a, b){\n\t\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t\t}},\n\t\t{ id:\"notBetween\", handler: function(a, b){\n\t\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t\t}}\n\t]);\n\treturn rules;\n}\n\nfunction getCellValue(view, value){\n\tif(isNaN(value*1)){\n\t\tif (value.charAt(0) == \"=\" && value.length > 1){\n\t\t\tvalue = view._mData.getStore().exec(value.substring(1));\n\t\t\tif(value === null)\n\t\t\t\tvalue = \"\";\n\t\t}\n\t}\n\telse {\n\t\tvalue = value*1;\n\t}\n\treturn value;\n}\n\nfunction reset(view){\n\tview.conditions.clear();\n}\n\nfunction _setCondition(view, data){\n\tgroup.set(function(){\n\t\tview.eachSelectedCell((cell) => {\n\t\t\tconst collection = view.conditions.get(cell.row, cell.column);\n\t\t\tif(collection)\n\t\t\t\tfor (let i = 0; i < collection.length; i++)\n\t\t\t\t\tsetSpanCss(view, cell.row, cell.column, collection[i][2], false);\n\t\t\t_changeCondition(\"update\", cell.row, cell.column, (collection||null), data, view);\n\t\t});\n\t});\n\tview.refresh();\n}\n\nfunction _undoCondition(view, row, column, value){\n\tif(view.conditions.get(row, column))\n\t\tview.conditions.remove(row, column);\n\tif(value)\n\t\tview.conditions.update(row, column, value);\n}\n\nfunction _serialize(view, obj){\n\tobj.conditions = view.conditions.serialize();\n}\n\nfunction _parse(view, obj){\n\tview.conditions.parse(obj.conditions);\n}\n\nexport function getConditionCss(view, row, column, rendered){\n\tlet css = \"\";\n\n\tif (!view.conditions._empty){\n\t\tconst collection = view.conditions.get(row, column);\n\t\tif(collection){\n\t\t\tconst span = view.$$(\"cells\").getSpan(row, column);\n\t\t\tlet value = view.getCellValue(row,column,false);\n\t\t\tif(!value && value !== 0)\n\t\t\t\tvalue = \"\";\n\n\t\t\tlet type = getType(view, row, column);\n\t\t\tif(!type || type == \"string\")\n\t\t\t\ttype = \"text\";\n\n\t\t\tfor (let i = collection.length - 1; i >= 0; i--){\n\t\t\t\tlet currentValue = value;\n\t\t\t\tconst rule = collection[i][0];\n\t\t\t\tconst handlers = view.conditions.handlers;\n\t\t\t\tlet handler;\n\n\t\t\t\tlet checkOrder = [\"text\", type, \"number\", \"date\"];\n\t\t\t\tcheckOrder = checkOrder.filter((v, i) => checkOrder.indexOf(v) == i);\n\n\t\t\t\tfor(let k = 0; k < checkOrder.length; k++){\n\t\t\t\t\tconst checkType = checkOrder[k];\n\n\t\t\t\t\thandler = handlers[checkType].find(obj => obj.id == rule);\n\t\t\t\t\tif(handler){\n\t\t\t\t\t\thandler = handler.handler;\n\t\t\t\t\t\tif(checkType == \"text\" && rule != \"equal\" && rule != \"notEqual\")\n\t\t\t\t\t\t\tcurrentValue = rendered;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet compare = collection[i][1];\n\t\t\t\tif(webix.isArray(compare))\n\t\t\t\t\tcompare = {\n\t\t\t\t\t\tstart: getCellValue(view, compare[0]),\n\t\t\t\t\t\tend: getCellValue(view, compare[1])\n\t\t\t\t\t};\n\t\t\t\telse\n\t\t\t\t\tcompare = getCellValue(view, compare);\n\n\t\t\t\tif(!css && handler && handler(currentValue, compare)){\n\t\t\t\t\tcss = collection[i][2];\n\t\t\t\t\tif(!span)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tsetSpanCss(view, row, column, collection[i][2], true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tsetSpanCss(view, row, column, collection[i][2], false);\n\t\t\t}\n\t\t}\n\t}\n\treturn css;\n}\n\n\nfunction addEmptyCollection(pull, row, column, state){\n\tstate._empty = false;\n\tif(!pull[row])\n\t\tpull[row] = {};\n\tif(!pull[row][column])\n\t\tpull[row][column] = [];\n\treturn pull[row][column];\n}\n\n\nfunction parse(data){\n\t//backward compatibility\n\tconst oldConditions = {\n\t\t\">\": \"greater\",\n\t\t\"<\": \"less\",\n\t\t\"=\": \"equal\",\n\t\t\"!=\": \"notEqual\",\n\t\t\"<>\": \"between\"\n\t};\n\n\tthis._empty = true;\n\tif (!data) return;\n\n\tlet i = data.length;\n\twhile(i--){\n\t\tconst c = data[i];\n\t\tconst collection = addEmptyCollection(this._pull,c[0],c[1],this);\n\t\tc[2] = oldConditions[ c[2] ] || c[2];\n\t\tcollection.push([c[2],c[3],c[4]]);\n\t}\n}\n\nfunction clear(){\n\tthis._pull = {};\n}\n\nfunction update(view, row, column, newData){\n\tvar collection = this.get(row, column);\n\tif(!collection)\n\t\taddEmptyCollection(this._pull, row, column, this);\n\n\tnewData.map(item => _normalizeValue(view, item) );\n\tthis._pull[row][column] = newData;\n}\n\nfunction get(rowId, columnId){\n\tif(!rowId)\n\t\treturn this._pull;\n\tif(!columnId)\n\t\treturn this._pull[rowId];\n\treturn this._pull[rowId]?this._pull[rowId][columnId]:null;\n}\n\nfunction add(view, rowId, columnId, condition, value, style){\n\tconst collection = addEmptyCollection(this._pull, rowId, columnId, this);\n\tcollection.push( _normalizeValue(view, [condition, value, style]) );\n}\n\nfunction remove(rowId, columnId){\n\tvar collection = this.get(rowId, columnId);\n\tif(collection)\n\t\tdelete this._pull[rowId][columnId];\n}\n\nfunction serialize(){\n\tvar column, condition, i, row,\n\t\tdata = [];\n\n\tfor( row in this._pull)\n\t\tfor( column in this._pull[row])\n\t\t\tfor(i=0; i < this._pull[row][column].length; i++){\n\t\t\t\tcondition = this._pull[row][column][i];\n\t\t\t\tdata.push([row,column, condition[0],condition[1],condition[2]]);\n\t\t\t}\n\n\treturn data;\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet conditions = data.conditions,\n\t\ti = conditions.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = conditions[i];\n\t\t\tif(name == \"row\" && row>= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete lock mark if row was deleted\n\t\t\t\t\t\tconditions.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tconditions[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tconditions.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tconditions[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function clearConditionalFormats(view, range){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tvar condition = view.conditions.get(cell.row, cell.column);\n\t\t\tif(condition)\n\t\t\t\t_changeCondition(\"remove\", cell.row, cell.column, condition, null, view);\t\t\t\t\n\t\t});\n\t\tview.refresh();\n\t});\n}\n\nexport function pasteCondition(view, extra, row, col, cutted){\n\tvar condition = extra.condition;\n\tvar collection = view.conditions.get(row,col);\n\t_changeCondition(\"update\", row, col, (collection||null), condition, view);\n\tif(cutted === 1)\n\t\t_changeCondition(\"remove\", extra.row, extra.col, condition, null, view);\n}\n\nexport function _changeCondition(name, row, column, oldCondition, newCondition, view){\n\tif (view.callEvent(\"onBeforeConditionSet\", [row, column, oldCondition, newCondition])){\n\t\tview.conditions[name].apply(view.conditions, [row, column, newCondition]);\n\t\tview.callEvent(\"onAfterConditionSet\", [row, column, oldCondition, newCondition]);\n\t}\n}\n\nfunction _normalizeValue(view, condition){\n\tconst val = condition[1];\n\tif(val[0] == \"=\")\n\t\tcondition[1] = view._mData.getStore().parse(val).source; //fixes formula\n\treturn condition;\n}","import * as cop from \"./operations/column_operations\";\nimport {getConditionCss} from \"./operations/conditional_formats\";\nimport * as nms from \"./helpers/column_names\";\nimport * as fmt from \"./operations/formats\";\n\nexport function init(view, extra){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar datatable = {\n\t\tview:\"datatable\", id:\"cells\", css:\"webix_ssheet_table webix_data_border wss_\"+view.$index,\n\t\theaderRowHeight: webix.skin.$name == \"contrast\" || webix.skin.$name == \"flat\" ? 24 : 20,\n\t\tspans: true,\n\t\tleftSplit: 1,\n\t\tareaselect:true,\n\t\tminColumnWidth:38,\n\t\teditable:true,\n\t\teditaction:(extra.liveEditor ? \"custom\" : \"dblclick\"),\n\t\tminRowHeight:1,\n\t\tnavigation:true\n\t};\n\n\tif (extra)\n\t\tdatatable = webix.extend(datatable, extra, true);\n\n\treturn datatable;\n}\n\nfunction ready(view){\n\tvar grid = view._table;\n\n\tvar showCommentHandler = webix.event(document.body, \"mousemove\", function(){\n\t\tvar thread;\n\t\treturn function(e) {\n\t\t\tclearTimeout(thread);\n\t\t\tthread = webix.delay(function(e){\n\t\t\t\tif(view.comments._activeComment.editStatus)\n\t\t\t\t\treturn;\n\n\t\t\t\tvar cell = grid.locate(e);\n\t\t\t\tvar visible = view.comments.commentsView && view.comments.commentsView.isVisible();\n\n\t\t\t\tif(cell && view.comments.get(cell.row, cell.column)){\n\t\t\t\t\tvar activeCell = view.comments._activeComment.cell;\n\t\t\t\t\tif((activeCell && (activeCell.row != cell.row || activeCell.column != cell.column)) || !visible)\n\t\t\t\t\t\tview.callEvent(\"onCommand\",[{id: \"add-comment\", cell, viewonly: true }]);\n\t\t\t\t}\n\t\t\t\telse if(visible && !view.comments.commentsView.$view.contains(e.target))\n\t\t\t\t\tview.callEvent(\"onCommentHide\", []);\n\t\t\t}, true, [e], 250);\n\t\t};\n\t}());\n\n\t//in grid math\n\tif (view.config.math){\n\t\tgrid.config.editMath = true;\n\t}\n\n\t//saving value after edit\n\tgrid.attachEvent(\"onBeforeEditStop\", (st, ed) => {\n\t\t//ignore empty cells\n\t\tif (st.old === webix.undefined && st.value === \"\") return;\n\n\t\tif (st.value != st.old){\n\t\t\tview.setCellValue(ed.row, ed.column, st.value);\n\t\t\tgrid.refresh();\n\t\t}\n\t\tst.value = st.old;\n\t});\n\n\tgrid.attachEvent(\"onEnter\", function(ev){\n\t\tif (grid.getEditor()){\n\t\t\twebix.delay(function(){\n\t\t\t\tgrid.moveSelection(\"down\");\n\t\t\t});\n\t\t}\n\t\twebix.html.preventEvent(ev);\n\t});\n\n\t//prevent editing of locked cells\n\tview.attachEvent(\"onBeforeEditStart\", (row, column) => !view.isCellLocked(row, column));\n\tgrid.attachEvent(\"onAfterEditStart\", ({row, column}) => {\n\t\tlet v = view.getCellValue(row, column);\n\n\t\tif(grid.$anyKey){\n\t\t\tgrid.$anyKey = false;\n\t\t\tv = \"\";\n\t\t}\n\n\t\tgrid.getEditor().setValue(v);\n\t});\n\tgrid.attachEvent(\"onBeforeEditStart\", (editor) => \n\t\tview.callEvent(\"onBeforeEditStart\", [editor.row, editor.column]) );\n\n\t//column drag event checking\n\tlet dragStartColumn;\n\tlet dragEndColumn;\n\n\t//column and row selection\n\tgrid.attachEvent(\"onBeforeSelect\", (id) => id.column != \"rowId\" );\n\tgrid.attachEvent(\"onBeforeBlockSelect\", (start, end, finalStep) => {\n\t\tcop.highlightColRow(\n\t\t\tfinalStep ? start : webix.copy(start),\n\t\t\tfinalStep ? end : webix.copy(end),\n\t\t\tview\n\t\t);\n\t});\n\n\tfunction highlightHeaders(){\n\t\tlet ids = grid.getSelectedId(true);\n\t\tif(ids.length){\n\t\t\tlet start = ids[0];\n\t\t\tlet end = ids[ids.length-1]?ids[ids.length-1]:ids[0];\n\t\t\tcop.highlightColRow(start, end, view);\n\t\t}\n\t\telse {\n\t\t\tlet data = {row:0, column:0};\n\t\t\tcop.highlightColRow(data, data, view);\n\t\t}\n\t}\n\n\tgrid.attachEvent(\"onSelectChange\", () => highlightHeaders());\n\tgrid.attachEvent(\"onAfterColumnShow\", () => {\n\t\twebix.delay(() => highlightHeaders());\n\t});\n\tgrid.attachEvent(\"onColumnResize\", () => {\n\t\twebix.delay(() => highlightHeaders());\n\t});\n\n\twebix.event(grid.$view.firstChild, \"mousedown\", e => {\n\t\tconst resizeColumn = grid.config.resizeColumn;\n\t\tconst col = grid.locate(e);\n\n\t\tif(col && col.cind){\n\t\t\tif(resizeColumn){\n\t\t\t\tconst dx = grid.getColumnConfig(col.column).width;\n\t\t\t\tconst pos = webix.html.posRelative(e);\n\t\t\t\tif(pos.x < resizeColumn.size || dx-pos.x < resizeColumn.size+1)\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tdragStartColumn = col.cind;\n\t\t}\n\t});\n\n\twebix.event(grid.$view.firstChild, \"mousemove\", e => {\n\t\tif(dragStartColumn){\n\t\t\tconst col = grid.locate(e);\n\n\t\t\tif(col){\n\t\t\t\tdragEndColumn = col.cind;\n\t\t\t\tcop.highlightColRow(\n\t\t\t\t\t{column: grid.columnId(dragStartColumn)},\n\t\t\t\t\t{column: grid.columnId(dragEndColumn||1)},\n\t\t\t\t\tview\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst selectColumnHandler = webix.event(document.body, \"mouseup\", () => {\n\t\tif(dragStartColumn){\n\t\t\tif(dragEndColumn != null){\n\t\t\t\tcop.selectColumn(\n\t\t\t\t\tgrid.columnId(dragStartColumn),\n\t\t\t\t\tview,\n\t\t\t\t\tgrid.columnId(dragEndColumn||1)\n\t\t\t\t);\n\t\t\t\tdragEndColumn = null;\n\t\t\t}\n\t\t\tdragStartColumn = null;\n\t\t}\n\t});\n\n\tgrid.attachEvent(\"onItemDblClick\", (id) => {\n\t\tif (id.column === \"rowId\")\n\t\t\tcop.adjustRow(id.row, view);\n\t});\n\n\tlet lastHeaderClick = 0;\n\tgrid.attachEvent(\"onHeaderClick\", (id, e) => {\n\t\tif(id.column == \"rowId\"){\n\t\t\tcop.selectAll(view);\n\t\t\treturn;\n\t\t}\n\t\tlet headerClick = new Date();\n\t\tlet dblClick = (headerClick - lastHeaderClick <= 300);\n\n\t\tif (dblClick) {\n\t\t\tcop.adjustColumn(id.column, view);\n\t\t} else {\n\t\t\tlastHeaderClick = headerClick;\n\t\t\tif (e.shiftKey) {\n\t\t\t\tcop.selectColumns(id.column, view);\n\t\t\t} else {\n\t\t\t\tcop.selectColumn(id.column, view);\n\t\t\t}\n\t\t}\n\t});\n\n\t//select rows by shift click\n\tvar lastClickedRow = null;\n\tgrid.attachEvent(\"onItemClick\", (cell, e) => {\n\t\tif (cell.column === \"rowId\") {\n\t\t\tif (!e.shiftKey)\n\t\t\t\tcop.selectRow(cell.row, view);\n\t\t\telse {\n\t\t\t\tif (!lastClickedRow)\n\t\t\t\t\tcop.selectRow(cell.row, view);\n\t\t\t\telse\n\t\t\t\t\tcop.selectRow(lastClickedRow, view, cell.row);\n\t\t\t}\n\t\t\tlastClickedRow = cell.row;\n\t\t}\n\t});\n\n\t//reset API\n\tview.attachEvent(\"onReset\", () => reset(view));\n\n\tview.attachEvent(\"onBeforeSheetShow\", () => grid.editStop());\n\n\tgrid.attachEvent(\"onBlur\", function(){\n\t\t//after focus moved out, check and if it is somewhere\n\t\t//on the spreadsheet controls them move focus back to datatable\n\t\twebix.delay(function(){\n\t\t\tvar target = document.activeElement;\n\n\t\t\tif (target && target.tagName == \"INPUT\") return;\n\n\t\t\tvar focus = webix.UIManager.getFocus();\n\t\t\tvar need_focus = focus &&\n\t\t\t\tfocus != grid &&\n\t\t\t\tfocus.getTopParentView &&\n\t\t\t\tfocus.getTopParentView() === view;\n\n\t\t\tif (need_focus)\n\t\t\t\twebix.UIManager.setFocus(grid);\n\n\t\t}, this, [], 100);\n\t});\n\n\tsetDefaultCss(view);\n\n\tview.attachEvent(\"onDestruct\", () => {\n\t\twebix.eventRemove(showCommentHandler);\n\t\twebix.eventRemove(selectColumnHandler);\n\t});\n}\n\nexport function cell_template(view, obj, common, _v, column, valueOnly){\n\tconst col = column.id;\n\tconst row = obj.id;\n\n\tif (!view._mPage) return \"\";\n\tconst cell = view._mPage.getCell(row-1, col-1);\n\n\tlet value = cell ? cell.value : \"\";\n\tconst format = cell ? cell.format : \"\";\n\n\tconst math = view.getCellValue(row, col);\n\tif(math != value){\n\t\tconst locale = webix.i18n.spreadsheet.table;\n\t\tif(value == \"#REF!\")\n\t\t\tvalue = locale[\"math-ref-error\"];\n\t\telse if(value == \"#ERROR\")\n\t\t\tvalue = locale[\"math-error\"];\n\t}\n\n\tlet css = \"\";\n\tconst text = (!value && value !== 0) || isNaN(value);\n\tconst invalidDate = fmt.checkFormat(format, \"date\") && fmt.isDateInvalid(value);\n\n\tlet extra = \"\";\n\tif (!valueOnly){\n\t\textra += view.comments.get(row, col) ? \"<div class='ssheet_commented_sign'></div>\" : \"\";\n\t\textra += view.getCellFilter(row, col) ? \"<div class='ssheet_filter_sign'></div>\" : \"\";\n\t}\n\n\t//text can be formatted only in case of string number format\n\tif(!invalidDate && (!text || fmt.checkFormat(format, \"string\"))){\n\t\tif (format){\n\t\t\tconst cell = { css:\"\" };\n\t\t\tconst helper = fmt.getFormat(format);\n\t\t\tif (helper){\n\t\t\t\tlet newValue = helper(value, cell);\n\n\t\t\t\tif(newValue != webix.i18n.spreadsheet.table[\"format-error\"]){\n\t\t\t\t\tif (cell.css)\n\t\t\t\t\t\tcss = `class=\"${cell.css}\"`;\n\t\t\t\t\tvalue = newValue;\n\t\t\t\t}\n\t\t\t\telse if(!text)\n\t\t\t\t\tvalue = value * 1;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tvalue = value * 1;\n\t}\n\n\t//print only cell values (td with position:relative ignores borders while printing)\n\tif(view._print && !(value || value === 0))\n\t\treturn \"\";\n\n\tif(webix.isUndefined(value) || value === null)\n\t\tvalue = \"\";\n\n\treturn `<div ${css}>${value}</div>${view._print ? \"\" : extra}`;\n}\n\nexport function reset(view){\n\tconst grid = view.$$(\"cells\");\n\tgrid.clearAll();\n\n\tconst columns = view.config.columnCount;\n\tconst rows = view.config.rowCount;\n\n\tconst cols = [{\n\t\tid:\"rowId\", header:\"\", width:40,\n\t\tcss:\"sheet_column_0\",\n\t\ttemplate:(el) => {\n\t\t\treturn el.id;\n\t\t}\n\t}];\n\n\tfor (let i=1; i<=columns; i++){\n\t\tcols.push({\n\t\t\tid:i,\n\t\t\teditor:\"text\",\n\t\t\theader:{\n\t\t\t\ttext: nms.encode[i]\n\t\t\t},\n\t\t\ttemplate:function(obj, common, value, column){\n\t\t\t\treturn cell_template(view, obj, common, value, column);\n\t\t\t},\n\t\t\tcssFormat:function(value, obj, row, column){\n\t\t\t\tconst rendered = getRenderedValue(view, row, column);\n\t\t\t\tconst cell = view._mPage.getCell(row-1, column-1);\n\t\t\t\tconst style = cell ? cell.style : \"\";\n\n\t\t\t\tconst conditional = getConditionCss(view, row, column, rendered);\n\n\t\t\t\treturn `${style} ${conditional}`;\n\t\t\t}\n\t\t});\n\t\tview.callEvent(\"onColumnInit\",[cols[i]]);\n\t}\n\tgrid.refreshColumns(cols);\n\n\tconst data = [];\n\tfor (let i=1; i<=rows; i++)\n\t\tdata.push({ id:i });\n\n\tgrid.parse(data);\n}\n\nexport function getRenderedValue(view, row, col){\n\tconst htmlFilter = /<[^>]*>/gi;\n\treturn cell_template(view, {id: row}, null, null, {id: col}, true).replace(htmlFilter, \"\");\n}\n\n// nowrap by default\nfunction setDefaultCss(view){\n\twebix.html.addStyle(\"#\"+view._table.$view.id+\".webix_dtable .webix_cell { white-space:nowrap;}\");\n}\n","import group from \"./operations/undo_group\";\nimport {selectAll} from \"./operations/column_operations\";\nimport {styleFormats} from \"./toolbar/buttons\";\n\nexport function init(view){\n\tconst grid = view.$$(\"cells\");\n\tconst key = webix.env.isMac ? \"command\" : \"ctrl\";\n\n\twebix.UIManager.addHotKey(key+\"-a\", () => { if(!grid.getEditor()) selectAll(view); }, grid);\n\n\tif(!view.config.readonly){\n\t\twebix.UIManager.addHotKey(\"any\", (view, ev) => {\n\t\t\tconst code = ev.which || ev.keyCode;\n\t\t\tconst f2 = code == 113;\n\n\t\t\t//ignore shift key, f1, f3 - f12 (f2 - edit)\n\t\t\tif (code == 16 || (code >= 112 && code <= 123 && !f2)) return;\n\n\t\t\tconst sel = view.getSelectedId(true);\n\t\t\tif (sel.length){\n\t\t\t\tif(!(view.config.liveEditor && f2))\n\t\t\t\t\tgrid.$anyKey = true;\n\t\t\t\tgrid.edit(sel[0]);\n\t\t\t}\n\t\t}, grid);\n\n\t\twebix.UIManager.addHotKey(\"enter\", (view) => {\n\t\t\tconst sel = view.getSelectedId(true);\n\t\t\tif (sel.length){\n\t\t\t\tif(!(view.config.liveEditor && !grid.callEvent(\"onBeforeLiveEditor\", [sel[0]])))\n\t\t\t\t\tgrid.edit(sel[0]);\n\t\t\t}\n\t\t}, grid);\n\n\t\twebix.UIManager.addHotKey(\"backspace\", () => del(view), grid);\n\t\twebix.UIManager.addHotKey(\"delete\", () => del(view), grid);\n\n\t\tvar redo = webix.env.isMac ? \"command-shift-z\" : \"ctrl-y\";\n\t\twebix.UIManager.addHotKey(redo, () => view.redo(), grid);\n\t\twebix.UIManager.addHotKey(key+\"-z\", () => view.undo(), grid);\n\n\t\twebix.UIManager.addHotKey(key+\"-b\", () => styleHotKey(view, \"font-weight\"), grid);\n\t\twebix.UIManager.addHotKey(key+\"-i\", () => styleHotKey(view, \"font-style\"), grid);\n\t\twebix.UIManager.addHotKey(key+\"-u\", (v, e) => ctrlU(view, e), grid);\n\t\twebix.UIManager.addHotKey(key+\"-p\", (v, e) => ctrlP(view, e), grid);\n\t}\n}\n\nfunction del(view) {\n\tif(!view.$$(\"cells\").getEditor())\n\t\tgroup.set(function(){\n\t\t\tview.eachSelectedCell((cell) => view.setCellValue(cell.row,cell.column, \"\"));\n\t\t\tview.refresh();\n\t\t});\n}\n\nfunction ctrlU(view, e) {\n\tstyleHotKey(view, \"text-decoration\");\n\treturn webix.html.preventEvent(e);\n}\nfunction ctrlP(view, e) {\n\tview.callEvent(\"onCommand\",[{id: \"print\"}]);\n\treturn webix.html.preventEvent(e);\n}\n\nfunction styleHotKey(view, attr) { \n\tvar cell = view.getSelectedId();\n\tif(cell){\n\t\tvar style = view.getStyle(cell.row, cell.column);\n\n\t\tvar elementOn = styleFormats[attr];\n\t\tvar elementOff = \"normal\";\n\n\t\tvar state = (style && style.props[attr] === elementOn)? elementOff : elementOn;\n\t\tview.callEvent(\"onStyleSet\", [attr, state]);\n\t}\n}","import {methods} from \"@xbs/muon\";\n\nlet methodsName = [];\nfor(let name in methods)\n\tmethodsName.push(name);\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\tview:\"toolbar\",\n\t\tcss:\"webix_ssheet_toolbar\",\n\t\telements:[\n\t\t\t{\n\t\t\t\tview:\"label\",\n\t\t\t\tlabel:webix.i18n.spreadsheet.liveEditor[\"edit\"],\n\t\t\t\twidth:60\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"live-editor\",\n\t\t\t\tdisabled:true,\n\t\t\t\tid:\"liveEditor\",\n\t\t\t\tsuggestData: methodsName\n\t\t\t}\n\t\t]\n\t};\n}\n\nfunction ready(view){\n\tconst editor = view.$$(\"liveEditor\");\n\n\t//block native editor, and move focus to the custom input\n\t//edit by key press\n\tview._table.attachEvent(\"onBeforeEditStart\", function(cell){\n\t\tconst mode = view._table.$anyKey;\n\t\tview._table.$anyKey = false;\n\n\t\treturn startEdit(this, cell, mode);\n\t});\n\t//edit by enter key\n\tview._table.attachEvent(\"onBeforeLiveEditor\", function(cell){\n\t\treturn startEdit(this, cell, false);\n\t});\n\t//edit by dbl-click\n\tview._table.attachEvent(\"onItemDblClick\", function(cell){\n\t\tif(view.getCellEditor(cell.row, cell.column))\n\t\t\tthis.edit(cell);\n\t\telse\n\t\t\tstartEdit(this, cell, false);\n\t});\n\n\tview._table.attachEvent(\"onAfterScroll\", function(){\n\t\tif(editor.$view.contains(document.activeElement))\n\t\t\teditor.paintValue();\n\t});\n\n\tview.attachEvent(\"onCellChange\", (r,c,v) => {\n\t\tvar cell = editor.config.activeCell;\n\t\tif (cell && cell.row == r && cell.column == c)\n\t\t\teditor.setValue(v);\n\t});\n\n\tview.attachEvent(\"onAfterSelect\", (data) => {\n\t\tif (!view.$handleSelection){\n\t\t\tlet cell = data[0];\n\t\t\tfillEditor(cell);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onChange\", (mode) => {\n\t\tif (mode == \"update\" && editor.isEnabled()){\n\t\t\tconst cell = editor.config.activeCell;\n\t\t\tif(cell && editor.getValue() != view.getCellValue(cell.row, cell.column)){\n\t\t\t\tdelete editor._update_range;\n\t\t\t\teditor.showActiveSheet();\n\t\t\t\teditor.updateCellValue();\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onBeforeSheetShow\", (name)=> {\n\t\tif(view._rangeDialog)\n\t\t\treturn;\n\t\tconst cell = editor.config.activeCell;\n\t\tif(cell){\n\t\t\tconst cursor = editor.getInputNode().selectionStart;\n\t\t\tconst val = editor.getValue();\n\t\t\tif(view.getCellValue(cell.row, cell.column) != val){\n\t\t\t\tif(!editor._activeMath)\n\t\t\t\t\teditor._activeMath = view.getActiveSheet();\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tif(name == editor._activeMath){\n\t\t\t\t\t\tview.$handleSelection = null;\n\t\t\t\t\t\tconst cell = editor.config.activeCell;\n\t\t\t\t\t\tview._table.select(cell.row, cell.column);\n\t\t\t\t\t}\n\n\t\t\t\t\teditor.setValue(val);\n\t\t\t\t\t//update highlight\n\t\t\t\t\teditor.refresh();\n\n\t\t\t\t\teditor.getInputNode().setSelectionRange(cursor, cursor);\n\t\t\t\t\teditor.paintValue();\n\n\t\t\t\t\tview.$handleSelection = function(a,b,st,en){ return pasteRange(st, en, a); };\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t\tclearEditor();\n\t\t}\n\t});\n\n\tview.attachEvent(\"onReset\", () => {\n\t\tif(!view._rangeDialog)\n\t\t\tview.$handleSelection = null;\n\t});\n\tview.$$(\"cells\").attachEvent(\"onFocus\", ()=>{\n\t\t//ignore table clipboard logic\n\t\tif(editor._activeMath){\n\t\t\twebix.delay(()=>editor.focus());\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterLoad\", () => clearEditor());\n\n\tview.attachEvent(\"onAction\", function(name, options){\n\t\tconst cell = editor.config.activeCell;\n\t\tconst isActiveCell = cell && cell.row == options.row && cell.column == options.column;\n\t\tif(isActiveCell && (name == \"lock\" || name == \"dropdown\"))\n\t\t\tdisableEditor(options.row, options.column);\n\t});\n\n\tview.attachEvent(\"onFormatChange\", (r, c) => updateEditor(r, c));\n\tview.attachEvent(\"onCellChange\", (r, c) => updateEditor(r, c));\n\n\tfunction updateEditor(row, column){\n\t\tconst activeCell = editor.config.activeCell;\n\t\tif(activeCell && activeCell.row == row && activeCell.column == column)\n\t\t\tfillEditor({row, column});\n\t}\n\n\tfunction startEdit(table, cell, clear){\n\t\t//do not interfere with custom editors\n\t\tif (!view.getCellEditor(cell.row, cell.column) && fillEditor(cell, clear)){\n\t\t\teditor.focus();\n\n\t\t\tif(!clear){\n\t\t\t\teditor.paintValue();\n\n\t\t\t\tconst input = editor.getInputNode();\n\t\t\t\tconst symbols = input.value.length;\n\t\t\t\tinput.setSelectionRange(symbols, symbols);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction disableEditor(row,column){\n\t\tconst disabled = view.getCellEditor(row, column) || view.isCellLocked(row, column);\n\t\tif(disabled)\n\t\t\teditor.disable();\n\t\telse\n\t\t\teditor.enable();\n\t\treturn disabled;\n\t}\n\n\tfunction fillEditor(cell, clear){\n\t\tconst disabled = disableEditor(cell.row, cell.column);\n\t\teditor.config.activeCell = cell;\n\t\teditor.setValue( clear ? \"\" : editor.getCellValue(cell.row, cell.column) );\n\n\t\tif(!view._rangeDialog)\n\t\t\tview.$handleSelection = disabled ? null : function(a,b,st,en){ return pasteRange(st, en, a); };\n\n\t\treturn !disabled;\n\t}\n\n\tfunction pasteRange(st, en, cell){\n\t\tconst updateRange = editor._update_range;\n\t\tlet cursor = editor.getInputNode().selectionStart;\n\n\t\tlet sheet = \"\";\n\t\tif(editor._activeMath){\n\t\t\tconst activeSheet = view.getActiveSheet();\n\t\t\tif(editor._activeMath != activeSheet)\n\t\t\t\tsheet = editor.prepareSheet(activeSheet);\n\t\t}\n\n\t\tlet range;\n\t\tif(st == en){\n\t\t\tconst colon = editor.getValue()[ (updateRange ? updateRange.pos : cursor)-1 ] == \":\";\n\t\t\trange = colon ? st : sheet+st;\n\t\t}\n\t\telse\n\t\t\trange = `${sheet+st}:${en}`;\n\n\t\tif(updateRange && updateRange.pos == cursor - updateRange.len){\n\t\t\teditor.setRange(range, true);\n\t\t\tcursor = editor._update_range.pos + range.length;\n\t\t}\n\t\telse if(editor.expectOperator()){\n\t\t\teditor.setRange(range);\n\t\t\tcursor += range.length;\n\t\t}\n\t\telse\n\t\t\treturn endEdit(cell);\n\n\t\teditor.focus();\n\t\teditor.getInputNode().setSelectionRange(cursor, cursor);\n\t\teditor.paintValue();\n\n\t\treturn false;\n\t}\n\n\tfunction endEdit(st){\n\t\tif (editor.isEnabled()){\n\t\t\tconst cell = editor.config.activeCell;\n\t\t\teditor.showActiveSheet();\n\t\t\teditor.updateCellValue(cell);\n\t\t\teditor.setValue(st ? view.getCellValue(st.row, st.column) : \"\");\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction clearEditor(){\n\t\teditor.define({activeCell:null});\n\t\teditor.setValue(\"\");\n\t\teditor.disable();\n\t}\n}\n","export function find(arr, func){\n\tvar result = findIndex(arr, func);\n\treturn arr[result];\n}\n\nexport function findIndex(arr, func){\n\tvar result = -1;\n\tfor(var i =0; result<0 && i < arr.length; i++){\n\t\tif(func(arr[i]))\n\t\t\tresult = i;\n\t}\n\treturn result;\n}\n\nexport function getDimension(data, spans, rows, cols){\n\tfor(let i=0; i<data.length; i++){\n\t\t// data[i] - [ row, column, value, style]\n\t\tlet line = data[i];\n\t\tif (line[0]>rows) rows=line[0];\n\t\tif (line[1]>cols) cols=line[1];\n\t}\n\n\tif(spans)\n\t\tfor(let i = 0; i < spans.length; i++){\n\t\t\t// spans[i] - [ row, column, colCount, rowCount ]\n\t\t\tconst spanEndRow = spans[i][0] + spans[i][3] - 1;\n\t\t\tconst spanEndCol = spans[i][1] + spans[i][2] - 1;\n\n\t\t\tif(spanEndRow > rows) rows = spanEndRow;\n\t\t\tif(spanEndCol > cols) cols = spanEndCol;\n\t\t}\n\n\treturn [rows*1, cols*1];\n}","export function init(view){\n\t//parsing initial data\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => _serialize(view, data, config));\n\n\t// undo\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif(type == \"value\")\n\t\t\t_undoValue(view, row, column, value);\n\t});\n}\n\nfunction _serialize(view, obj, config){\n\tvar math = !config || config.math!==false;\n\n\tvar grid = view.$$(\"cells\");\n\tvar state = grid.getState();\n\tvar columns = state.ids.concat(state.hidden);\n\n\t// remove \"rowId\" column\n\tcolumns.splice(columns.indexOf(\"rowId\"), 1);\n\n\tobj.data = getSheetData(view, math);\n\n\tobj.table = {\n\t\tfrozenColumns : (view._frozenColumns || 0),\n\t\tfrozenRows : (view._frozenRows || 0)\n\t};\n}\n\nfunction _parse(view, obj){\n\tconst grid = view.$$(\"cells\");\n\n\tconst tconfig = obj.table || { frozenColumns : 0, frozenRows : 0 };\n\tview._frozenColumns = view._frozenRows = 0;\n\tif (tconfig){\n\t\tif (!webix.isUndefined(tconfig.frozenColumns))\n\t\t\tview.freezeColumns(tconfig.frozenColumns);\n\t\tif (!webix.isUndefined(tconfig.frozenRows))\n\t\t\tview.freezeRows(tconfig.frozenRows);\n\t}\n\n\tif(obj.sizes)\n\t\tgrid.define(\"fixedRowHeight\", false);\n\n\tfor (let i = 0; i < obj.data.length; i++){\n\t\tconst [ row, column, value, , type ] = obj.data[i];\n\n\t\tview.ignoreUndo(()=>{\n\t\t\t//cell format can be updated via types module\n\t\t\tview.callEvent(\"onCellChange\", [row, column, value, type]);\n\t\t});\n\t}\n}\n\nfunction _undoValue(view, row, column, value){\n\tview.setCellValue(row, column, value);\n}\n\nexport function getSheetData(view, math, page){\n\tpage = page ? view._mData.getPage(page) : view._mPage;\n\treturn page.serialize(math)\n\t\t.map(arr =>{\n\t\t\treturn [ ++arr[0], ++arr[1], arr[2].value, arr[2].style||\"\", arr[2].type];\n\t\t})\n\t\t.filter(arr => {\n\t\t\treturn arr[2] || arr[2] === 0 || arr[3];\n\t\t});\n}","import * as arr from \"./helpers/array\";\nimport {getSheetData} from \"./operations/data\";\nimport {DataStore} from \"@xbs/muon\";\nimport {loadCell} from \"./operations/types\";\nimport {removeUnusedStyles} from \"./operations/styles\";\nimport {updateMaxColumn} from \"./helpers/column_names\";\n\nconst options = [\n\t\"rename-sheet\",\n\t\"remove-sheet\"\n];\n\nconst actionMap = {\n\t\"remove-sheet\": function(view){\n\t\tview.confirm({\n\t\t\ttext: webix.i18n.spreadsheet.labels[\"sheet-remove-confirm\"]\n\t\t}).then(()=>{\n\t\t\tremove(view, view._activeSheet);\n\t\t});\n\t},\n\t\"rename-sheet\": function(view){\n\t\tedit(view, view._activeSheet);\n\t},\n\t\"new-sheet\": function(view){\n\t\tadd(view);\n\t},\n\t\"copy-sheet\": function(view){\n\t\tcopy(view);\n\t}\n};\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n}\n\nexport function defaultBottom(view){\n\tvar readonly = view.config.readonly;\n\tvar tabWidth = view.config.sheetTabWidth;\n\tvar toolbar =  {\n\t\tview: \"toolbar\",\n\t\tid: \"bottom-toolbar\",\n\t\tcss: \"webix_ssheet_bottom_toolbar webix_layout_toolbar\",\n\t\tpaddingY: 0,\n\t\theight: 34,\n\t\telements:[\n\t\t\t{\n\t\t\t\tview: \"button\", type:\"htmlbutton\", width: 34, id: \"add-sheet\",\n\t\t\t\tlabel: \"<span class='webix_ssheet_icon_add_sheet'></span>\",\n\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"add-sheet\"]||\"\", hidden:readonly\n\t\t\t},\n\t\t\t{\n\t\t\t\tid:\"sheets\",\n\t\t\t\tview:\"sheets\",\n\t\t\t\twidth: 5 * tabWidth,\n\t\t\t\teditable:!readonly,\n\t\t\t\teditaction: \"dblclick\",\n\t\t\t\teditor:\"text\",\n\t\t\t\teditValue:\"value\",\n\t\t\t\ttype:{\n\t\t\t\t\twidth: tabWidth,\n\t\t\t\t\theight: 32,\n\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\treturn \"<div>\"+obj.value+\"</div>\"+\n\t\t\t\t\t\t\t(!readonly?\"<div class='webix_input_icon wxi-menu-down webix_ssheet_sheet_arrow'></div>\":\"\");\n\t\t\t\t\t},\n\t\t\t\t\t//remove skin selection css on dnd\n\t\t\t\t\tcss:\"ssheet_order_sheets\"\n\t\t\t\t},\n\t\t\t\tonClick:{\n\t\t\t\t\twebix_ssheet_sheet_arrow: function(e, id){\n\t\t\t\t\t\tinitSheetMenu(view, e, id);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonItemClick: function(id){\n\t\t\t\t\t\tif(id != view._activeSheet)\n\t\t\t\t\t\t\tview.showSheet(id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\", type:\"htmlbutton\", width: 34, id: \"prev-sheet\", disabled:true, hidden:true,\n\t\t\t\tlabel: \"<span class='webix_icon wxi-menu-left'></span>\", batch:\"pager\",\n\t\t\t\tclick:function(){scrollSheets(view, -1);}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\", type:\"htmlbutton\", width: 34, id: \"next-sheet\", hidden:true,\n\t\t\t\tlabel: \"<span class='webix_icon wxi-menu-right'></span>\", batch:\"pager\",\n\t\t\t\tclick:function(){scrollSheets(view, 1);}\n\t\t\t}\n\t\t]\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"bottom-toolbar\", toolbar]);\n\n\treturn toolbar;\n}\n\nfunction scrollSheets(view, direction){\n\tvar sheets = view.$$(\"sheets\");\n\tsheets.scrollTo(sheets.getScrollState().x+(direction*view.config.sheetTabWidth), 0);\n}\n\nfunction menuInit(view){\n\tvar data = [];\n\tfor(var i=0; i < options.length;i++)\n\t\tdata.push({id: options[i], value:webix.i18n.spreadsheet.menus[options[i]]||options[i]});\n\n\tvar menu =  {\n\t\tview: \"ssheet-suggest\",\n\t\tdata: data\n\t};\n\tview.callEvent(\"onViewInit\", [\"sheet-menu\", menu]);\n\treturn menu;\n}\n\nexport function reset(view, obj){\n\tconst tabs = view.$$(\"sheets\");\n\tif (tabs){\n\t\ttabs.clearAll();\n\t\tconst set = [];\n\t\tobj.sheets.forEach(function(sheet){\n\t\t\tset.push({id:sheet.name, value: sheet.name});\n\t\t});\n\t\ttabs.parse(set);\n\t}\n}\n\nfunction ready(view){\n\tprepare(view);\n\n\tif(view.$$(\"add-sheet\"))\n\t\tview.$$(\"add-sheet\").attachEvent(\"onItemClick\", function(){\n\t\t\tadd(view);\n\t\t});\n\n\tview.attachEvent(\"onAfterSheetShow\", (name) => selectSheet(view,name));\n\n\tview.attachEvent(\"onCommand\", function(command){\n\t\tif(actionMap[command.id])\n\t\t\tactionMap[command.id](this);\n\t});\n\n\tif(view.$$(\"sheets\")){\n\t\tview.$$(\"sheets\").data.attachEvent(\"onStoreUpdated\", () => changePagerVisability(view));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterScroll\", () => changePagerStatus(view));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterDrop\", (context) => dataOrder(view,context.start,context.index));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterEditStop\", (state) => rename(view,state.old,state.value));\n\t}\n}\n\nfunction initSheetMenu(view, e, id){\n\tif(!view.$sheetMenu){\n\t\tview.$sheetMenu = webix.ui(menuInit(view));\n\t\tview._destroy_with_me.push(view.$sheetMenu);\n\t\tview.$sheetMenu.attachEvent(\"onItemClick\", (id)=> callAction(view,id));\n\t}\n\n\tif(view.$sheetMenu.getItem(\"remove-sheet\"))\n\t\tif(view.$$(\"sheets\").count() == 1)\n\t\t\tview.$sheetMenu.disableItem(\"remove-sheet\");\n\t\telse\n\t\t\tview.$sheetMenu.enableItem(\"remove-sheet\");\n\tif(view.callEvent(\"onBeforeSheetMenu\", [id])){\n\t\tview.$sheetMenu.show(e);\n\t}\n}\n\nfunction changePagerStatus(view){\n\tconst sheets = view.$$(\"sheets\");\n\tconst scrollPos = sheets.getScrollState().x;\n\n\tif(scrollPos == 0){\n\t\tview.$$(\"prev-sheet\").disable();\n\t}\n\telse{\n\t\tview.$$(\"prev-sheet\").enable();\n\t\tvar tabWidth = view.config.sheetTabWidth;\n\t\tif(scrollPos == (sheets.count()-(sheets.config.width/tabWidth))*tabWidth){\n\t\t\tview.$$(\"next-sheet\").disable();\n\t\t\treturn;\n\t\t}\n\t}\n\tview.$$(\"next-sheet\").enable();\n}\n\nfunction changePagerVisability(view){\n\tvar toolbar = view.$$(\"bottom-toolbar\");\n\tvar sheets = view.$$(\"sheets\");\n\n\tif(sheets.count() <= (sheets.config.width/view.config.sheetTabWidth))\n\t\ttoolbar.showBatch(\"pager\", false);\n\telse\n\t\ttoolbar.showBatch(\"pager\");\n}\n\nfunction dataOrder(view, name, num){\n\tfor (let id in view._sheets) {\n\t\tif (view._sheets[id].name == name) {\n\t\t\tconst item = view._sheets.splice(id, 1);\n\t\t\tview._sheets.splice(num, 0, item[0]);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport function add(view, content){\n\tvar index, name, newIndex;\n\n\tindex = arr.findIndex(view._sheets, x => x.name == view._activeSheet);\n\tnewIndex = index>-1?index+1:view._sheets.length;\n\tname = getNewTitle(view);\n\tcontent = content || {data:[]};\n\tview._sheets.splice(newIndex, 0, {\n\t\tname: name,\n\t\tcontent: content\n\t});\n\n\tif(view.$$(\"sheets\"))\n\t\tview.$$(\"sheets\").add({id: name, value: name},newIndex);\n\n\tview._mData.addPage(name);\n\n\tparseToStore(view, name, content);\n\n\tview.showSheet(name);\n\tview.callEvent(\"onSheetAdd\", [name]);\n\treturn name;\n}\n\nfunction getNewTitle(view){\n\tvar index = view._sheets.length+1;\n\twhile(getSheet(view, (webix.i18n.spreadsheet.labels.sheet+index)))\n\t\tindex++;\n\tvar name = webix.i18n.spreadsheet.labels.sheet+index;\n\treturn name;\n}\n\nfunction selectSheet(view,name){\n\tif(view.$$(\"sheets\")){\n\t\tview.$$(\"sheets\").select(name);\n\t\tview.$$(\"sheets\").showItem(name);\n\t}\n}\n\nexport function edit(view,name){\n\tview.$$(\"sheets\").edit(name);\n}\n\nexport function remove(view,name){\n\tvar index, newSheet;\n\tif(view._sheets.length >1){\n\t\tindex = arr.findIndex(view._sheets,x => x.name == name);\n\t\tview._sheets.splice(index,1);\n\t\tview._mData.removePage(name);\n\t\tif(!view._sheets[index])\n\t\t\tindex = 0;\n\t\tnewSheet = \tview._sheets[index];\n\t\tview._activeSheet = null;\n\t\tif(view.$$(\"sheets\")){\n\t\t\tview.$$(\"sheets\").remove(name);\n\t\t\tview.$$(\"sheets\").refresh();\n\t\t}\n\t\tview.showSheet(newSheet.name);\n\t\tview.callEvent(\"onSheetRemove\", [name]);\n\t}\n}\n\nexport function rename(view,name,newName){\n\tif (name == newName) return;\n\n\t//correct sheet name\n\tvar i = 1;\n\twhile (!newName || getSheet(view, newName)){\n\t\tnewName = webix.i18n.spreadsheet.labels.sheet + i;\n\t\ti++;\n\t}\n\tnewName = newName.replace(/[*?:[\\]\\\\/]/g,\"\").substring(0, 31);\n\n\tvar sheet = getSheet(view, name);\n\tvar sheets = view.$$(\"sheets\");\n\n\tsheet.name = newName;\n\tif(view._activeSheet == name)\n\t\tview._activeSheet = newName;\n\n\tif(sheets){\n\t\tlet item = sheets.getItem(name);\n\t\titem.value = newName;\n\t\tsheets.data.changeId(name,newName);\n\t\tsheets.refresh(newName);\n\t}\n\n\tview._mData.renamePage(name, newName);\n\tview.callEvent(\"onSheetRename\", [name, newName]);\n}\n\nexport function serialize(view, obj, config){\n\tgetSheet(view, view._activeSheet).content = obj;\n\n\tconst sheets = webix.copy(view._sheets);\n\n\tconst math = !config || config.math!==false;\n\tconst compactStyles = config && config.compactStyles;\n\n\tsheets.forEach(sheet => {\n\t\tif(sheet.name != view._activeSheet){\n\t\t\tsheet.content.data = getSheetData(view, math, sheet.name);\n\t\t\tif(compactStyles)\n\t\t\t\tsheet.content.styles = removeUnusedStyles(sheet.content);\n\t\t\tsheet.content.ranges = view.ranges.serialize(sheet.name);\n\t\t}\n\t});\n\n\treturn sheets;\n}\n\nfunction parseToStore(view, name, obj){\n\tview.ranges.parse(obj.ranges, name);\n\n\tconst page = view._mData.getPage(name);\n\tconst data = webix.copy(obj.data).map((arr, index) => {\n\t\tconst cell = loadCell(view, obj, arr);\n\n\t\tconst linkRegex = /^=link\\(/i;\n\n\t\tif(typeof cell.value == \"string\" && linkRegex.test(cell.value)){\n\t\t\t// LINK is deprecated\n\t\t\tcell.value = cell.value.replace(linkRegex, \"=HYPERLINK(\");\n\t\t}\n\n\t\tconst item = obj.data[index];\n\n\t\t//cell value and type can be changed via types module\n\t\titem[2] = cell.value;\n\t\titem[3] = item[3] || \"\";\n\t\titem[4] = cell.type;\n\n\t\treturn [ --arr[0], --arr[1], {\n\t\t\tvalue: cell.value,\n\t\t\ttype: cell.type,\n\t\t\tstyle: item[3],\n\t\t\t$format: cell.$format\n\t\t}];\n\t});\n\n\tpage.parse(data, true);\n}\n\nexport function load(view, obj){\n\tview._loading_data = true;\n\tobj = webix.isArray(obj)?{sheets:obj}:obj;\n\n\tif(!obj.sheets && view._activeSheet){\n\t\t//loading into active sheet\n\t\tconst name = view._activeSheet;\n\t\tgetSheet(view, name).content = obj;\n\t\tparseToStore(view, name, obj);\n\t\trefresh(view, obj);\n\t} else {\n\t\t//creating new set of sheets\n\t\tprepare(view, obj);\n\t}\n\tview._loading_data = false;\n}\n\nexport function prepare(view, obj){\n\tif(!obj) obj = {data:[]}; \n\tif(!obj.sheets){\n\t\tobj = newSheet(obj);\n\t}\n\n\tlet name;\n\tview._activeSheet = \"\";\n\tview._sheets = obj.sheets;\n\tview._mData = new DataStore();\n\n\t// first add all pages then parse data in them\n\tobj.sheets.forEach(sheet => {\n\t\tview._mData.addPage(sheet.name);\n\t});\n\n\tobj.sheets.forEach((sheet, index) => {\n\t\tconst page = view._mData.getPage(sheet.name);\n\t\tconst content = sheet.content;\n\t\tconst sheetName = sheet.name;\n\n\t\tparseToStore(view, sheetName, content);\n\n\t\tif(index == 0){\n\t\t\tname = sheetName;\n\t\t\tview._mPage = page;\n\t\t}\n\t});\n\n\treset(view, obj);\n\tshow(view, name);\n}\n\nexport function newSheet(obj){\n\treturn {\n\t\tsheets:[{\n\t\t\tname: webix.i18n.spreadsheet.labels.sheet + 1,\n\t\t\tcontent: obj\n\t\t}]\n\t};\n}\n\nexport function show(view,name){\n\tif (name == view._activeSheet) return;\n\n\tif(view.callEvent(\"onBeforeSheetShow\", [name])){\n\t\tif (view._activeSheet)\n\t\t\tgetSheet(view, view._activeSheet).content = view.serialize();\n\n\t\tview._activeSheet = name;\n\t\tconst obj = getSheet(view, name).content;\n\n\t\tview._mPage = view._mData.getPage(name);\n\n\t\trefresh(view, obj);\n\n\t\tview.callEvent(\"onAfterSheetShow\", [name]);\n\t}\n}\n\nexport function getSheet(view, name){\n\treturn arr.find(view._sheets, x => x.name == name);\n}\n\nexport function eachSheet(view, callback){\n\tfor (var i=0; i<view._sheets.length; i++)\n\t\tcallback(view._sheets[i].name);\n}\n\nexport function getActive(view){\n\treturn view._activeSheet;\n}\n\nfunction refresh(view, obj){\n\tconst data = getSheetData(view);\n\n\tlet [rows, cols] = arr.getDimension(data, obj.spans, view.config.rowCount, view.config.columnCount);\n\n\tif (rows != view.config.rowCount || cols != view.config.columnCount){\n\t\tview.config.rowCount = rows;\n\t\tview.config.columnCount = cols;\n\t\tview._resetTable();\n\t}\n\n\tupdateMaxColumn(cols);\n\n\tview.callEvent(\"onReset\", []);\n\n\tview._loading_data = true;\n\tview.callEvent(\"onDataParse\", [obj]);\n\tview._loading_data = false;\n\n\tview._table.refresh();\n\tif(view.config.bottombar)\n\t\tview.$$(\"sheets\").refresh();\n}\n\nfunction copy(view){\n\tadd(view, view.serialize());\n}\n\nfunction callAction(view, id){\n\tif(!view.$sheetMenu.data.getMark(id, \"webix_disabled\"))\n\t\tactionMap[id](view);\n}\n\n","import \"../views/formlate\";\n\nexport class Dialog{\n\tconstructor(view){\n\t\tthis.view = view;\n\t}\n\t$init(){}\n\t$show(){}\n\t$hide(){}\n\topen(){\n\t\tif(!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.$dialog.attachEvent(\"onHide\", ()=> {\n\t\t\t\tthis.$hide();\n\t\t\t\twebix.UIManager.setFocus(this.view);\n\t\t\t});\n\t\t\tthis.$dialog.attachEvent(\"onShow\", ()=> {\n\t\t\t\twebix.UIManager.setFocus(this.$dialog);\n\t\t\t});\n\t\t}\n\n\t\tconst form = this.$dialog.getBody();\n\t\tthis.$dialog.show();\n\t\tif (this.$show(this.$dialog, form) === false)\n\t\t\tthis.close();\n\t}\n\tclose(){\n\t\tthis.$dialog.hide();\n\t}\n}","export function image(url){\n\treturn `=IMAGE(\"${url}\")`;\n}\n\nexport function chart(config){\n\tlet result = `=SPARKLINE(${config.range},\"${config.type}\"`;\n\tif (config.type === \"bar\")\n\t\tresult += `,\"${config.color}\",\"${config.negativeColor}\"`;\n\telse if(config.color)\n\t\tresult += `,\"${config.color}\"`;\n\treturn result+\")\";\n\n}\n\nexport function parseImage(value){\n\tif (value && value.indexOf(\"=IMAGE(\") === 0)\n\t\treturn {\n\t\t\turl: unescape(value.substr(7, value.length-8))\n\t\t};\n}\n\nexport function parseChart(value){\n\tif (value && value.indexOf(\"=SPARKLINE(\") === 0){\n\t\tlet text = value.substr(11, value.length-12).split(\",\");\n\t\treturn {\n\t\t\trange: text[0],\n\t\t\ttype: unescape(text[1]),\n\t\t\tcolor: unescape(text[2]),\n\t\t\tnegativeColor: unescape(text[3])\n\t\t};\n\t}\n}\n\nfunction unescape(text){\n\tif (!text) return \"\";\n\n\ttext = text.trim();\n\tif (text[0] === \"\\\"\") \n\t\ttext = text.substr(1);\n\tif (text[text.length-1] === \"\\\"\")\n\t\ttext = text.substr(0, text.length-1);\n\treturn text;\n}","import {Dialog} from \"./common\";\nimport {parseImage} from \"../mathematics/writer\";\n\nexport const action = \"add-image-cell\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tform.elements.preview.setHTML(\"\");\n\t\tform.elements.url.setValue(\"\");\n\n\t\t//sync state of dialog to data with  the selected cell\n\t\tlet value = this.view.getCellValue(this.cell.row, this.cell.column);\n\t\tlet data = parseImage(value);\n\t\tif (data && data.url)\n\t\t\tform.elements.url.setValue(data.url);\n\n\t\tform.elements.url.focus();\n\t}\n\t$init(){\n\t\tconst save = this.view.config.save;\n\t\tconst server = (save && save.images) || null;\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"image-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"url\",  placeholder:webix.i18n.spreadsheet.labels[\"image-url\"], on:{\n\t\t\t\t\t\t\"onChange\":(image) => this.showPreview(image)\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"label\", label:webix.i18n.spreadsheet.labels[\"image-or\"], align: \"center\"},\n\t\t\t\t\t{ view:\"uploader\", label:webix.i18n.spreadsheet.labels[\"image-upload\"], upload:server, on:{\n\t\t\t\t\t\tonBeforeFileAdd: function(file){\n\t\t\t\t\t\t\tif (!this.config.upload){\n\t\t\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\t\t\treader.onload = (e) => this.getFormView().elements.url.setValue(e.target.result);\n\t\t\t\t\t\t\t\treader.readAsDataURL(file.file);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis.getFormView().elements.preview.setHTML(\"\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonFileUpload: function(item, response){\n\t\t\t\t\t\t\tthis.getFormView().elements.url.setValue(response.imageURL);\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"formlate\", name:\"preview\", borderless: true, css: \"webix_ssheet_preview\", template:\"\", height:50 }\n\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst cell = this.cell;\n\t\tconst image = this.fillUrl(this.$dialog.getBody().elements.url.getValue());\n\t\tthis.view.addImage(cell.row, cell.column, image);\n\t\tthis.close();\n\t}\n\tfillUrl(url){\n\t\tif (!/^[/]|((https?:\\/|data:image)\\/)/i.test(url))\n\t\t\turl = \"http://\" + url;\n\t\treturn url;\n\t}\n\tshowPreview(image){\n\t\tif (image){\n\t\t\timage = webix.template.escape(this.fillUrl(image));\n\t\t\tthis.$dialog.queryView(\"form\").elements.preview.setHTML(\"<img class='webix_ssheet_cimage' src='\"+image+\"'></img>\");\n\t\t}\n\t}\n}","import * as box from \"./imagecell\";\n\nexport const action = \"add-image-top\";\n\nexport class DialogBox extends box.DialogBox{\n\topen(action){\n\t\tthis.config = action.config;\n\t\tthis.viewid = action.viewid;\n\n\t\tthis.view.callEvent(\"onUIEditStart\", [this.viewid, \"image\"]);\n\n\t\tbox.DialogBox.prototype.open.apply(this, arguments);\n\t}\n\t$hide(){\n\t\tthis.view.callEvent(\"onUIEditStop\", [this.viewid, \"image\"]);\n\t\tthis.config = this.viewid = null;\n\t}\n\t$init(){\n\t\tthis.view.attachEvent(\"onUIEditStart\", (id, type)=>{\n\t\t\tif(this.$dialog && this.$dialog.isVisible() && type != \"image\")\n\t\t\t\tthis.close();\n\t\t});\n\n\t\tthis.view.attachEvent(\"onCommand\", obj =>{\n\t\t\tif(obj.id == \"close-ui-editor\" && this.$dialog && this.$dialog.isVisible())\n\t\t\t\tthis.close();\n\t\t});\n\n\t\treturn box.DialogBox.prototype.$init.apply(this, arguments);\n\t}\n\t$show(box, form){\n\n\t\tform.elements.preview.setHTML(\"\");\n\t\tform.elements.url.setValue(\"\");\n\n\t\tif(this.config && this.config.data)\n\t\t\tform.elements.url.setValue(this.config.data);\n\n\t\tform.elements.url.focus();\n\t}\n\tokClick(){\n\t\tconst image = this.fillUrl(this.$dialog.getBody().elements.url.getValue());\n\t\tif(this.viewid)\n\t\t\tthis.view.views.update(this.viewid, image);\n\t\telse{\n\t\t\tconst id = this.view.views.add(null, null, \"image\", image);\n\t\t\tthis.view.views.highlight(id);\n\t\t}\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\nimport {range} from \"../helpers/column_names\";\nimport {parseChart} from \"../mathematics/writer\";\n\nexport const action = \"add-sparkline\";\n\nconst labels = webix.i18n.spreadsheet.labels;\n\nfunction getTypes(){\n\treturn  [\n\t\t{id:\"line\", value:labels[\"line-chart\"]},\n\t\t{id:\"spline\", value:labels[\"spline-chart\"]},\n\t\t{id:\"splineArea\", value:labels[\"splinearea-chart\"]},\n\t\t{id:\"area\", value:labels[\"area-chart\"]},\n\t\t{id:\"bar\", value:labels[\"bar-chart\"]},\n\t\t{id:\"pie\", value:labels[\"pie-chart\"]}\n\t];\n}\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tconst els = form.elements;\n\t\tthis.view.$handleSelection = function(st, end, a, b){\n\t\t\tels.range.setValue(a+\":\"+b);\n\t\t\treturn false;\n\t\t};\n\n\t\tels.range.setValue(\"\");\n\n\t\t//sync state of dialog to data with  the selected cell\n\t\tlet value = this.view.getCellValue(this.cell.row, this.cell.column);\n\t\tlet data = parseChart(value);\n\t\tif (data){\n\t\t\tform.blockEvent();\n\t\t\tels.type.setValue(data.type);\n\t\t\tels.range.setValue(data.range);\n\t\t\tif (data.color){\n\t\t\t\tels.color_def.setValue(data.color);\n\t\t\t\tels.color_pos.setValue(data.color);\t\t\n\t\t\t}\n\t\t\tif (data.negativeColor)\n\t\t\t\tels.color_neg.setValue(data.negativeColor);\n\t\t\tform.unblockEvent();\n\t\t\tthis.renderPreview();\n\t\t}\t\n\n\t\tels.range.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead:labels[\"sparkline-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\", visibleBatch:1, on:{ onChange : ()=> this.renderPreview() },  elements:[\n\t\t\t\t\t{view: \"richselect\", name:\"type\", label:labels[\"sparkline-type\"], value:\"line\", labelPosition:\"left\", suggest:{\n\t\t\t\t\t\tview:  \"ssheet-form-suggest\",\n\t\t\t\t\t\tdata:getTypes()\n\t\t\t\t\t}, on:{\n\t\t\t\t\t\tonChange: function(type){\n\t\t\t\t\t\t\tconst form = this.getFormView();\n\t\t\t\t\t\t\tswitch(type){\n\t\t\t\t\t\t\t\tcase \"pie\":\n\t\t\t\t\t\t\t\t\tform.showBatch(3);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"bar\":\n\t\t\t\t\t\t\t\t\tform.showBatch(2);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tform.showBatch(1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"text\", label:labels[\"sparkline-range\"], name:\"range\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-color\"], name:\"color_def\", id:\"add_sparkline_color\", value:\"#6666FF\", batch:\"1\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-positive\"], name:\"color_pos\", value:\"#6666FF\", batch:\"2\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-negative\"], name:\"color_neg\", value:\"#FF6666\", batch:\"2\"},\n\t\t\t\t\t{ view:\"formlate\", name:\"preview\", borderless:true, css:\"webix_ssheet_preview\", height:50 }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tcheckRange(text){\n\t\tif(text && range(text, this.view))\n\t\t\treturn true;\n\t\tthis.view.alert({text:labels[\"error-range\"]});\n\t}\n\tokClick(){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tdata.range = data.range.toUpperCase();\n\n\t\tif (data.range && this.checkRange(data.range)){\n\t\t\tconst config = this.sparkConfig(data);\n\n\t\t\tthis.view.addSparkline(this.cell.row, this.cell.column, config);\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\trenderPreview(){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tdata.range = data.range.toUpperCase();\n\n\t\tif (data.range && this.checkRange(data.range)){\n\t\t\tconst pos = range(data.range, this.view);\n\t\t\tlet i,\n\t\t\t\tvalues = this.view._mPage.getRange(pos[0]-1, pos[1]-1, pos[2]-1, pos[3]-1),\n\t\t\t\tconfig = this.sparkConfig();\n\t\t\tfor(i =0 ; i < values.length; i++)\n\t\t\t\tvalues[i] = values[i]||0;\n\t\t\tform.elements.preview.setValue(webix.Sparklines.getTemplate(config)(values, { width:200, height: 40 }));\n\t\t}\n\t\telse\n\t\t\tform.elements.preview.setValue(\"\");\n\t}\n\n\tsparkConfig(config){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tconfig = config || { type: data.type  };\n\t\tif (data.type === \"bar\"){\n\t\t\tconfig.color = data.color_pos;\n\t\t\tconfig.negativeColor = data.color_neg;\n\t\t}\n\t\telse if(form.elements.color_def.isVisible())\n\t\t\tconfig.color = data.color_def;\n\n\t\treturn config;\n\t}\n}","import {Dialog} from \"./common\";\nimport {isRange, toSheetRange} from \"../helpers/column_names\";\nimport {getLastCharIndex} from \"../mathematics/parser\";\n\nexport const action = \"add-range\";\n\nexport class DialogBox extends Dialog{\n\t$show(box){\n\t\tconst form = box.$$(\"form\");\n\n\t\tform.clear();\n\t\tform.clearValidation();\n\n\t\tconst elements = form.elements;\n\n\t\telements.name.focus();\n\n\t\tlet selectedCell = this.view.getSelectedRange();\n\t\tif(selectedCell)\n\t\t\tselectedCell = this.view.getActiveSheet()+\"!\"+selectedCell;\n\n\t\tform.setValues({\n\t\t\trange: selectedCell,\n\t\t\tscope: \"$global\"\n\t\t});\n\n\t\tthis._updateData();\n\n\t\tthis.view._rangeDialog = true;\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tform.elements.range.setValue(toSheetRange(a,b,this.view.getActiveSheet()));\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tthis.view._rangeDialog = null;\n\t}\n\tsaveClick(){\n\t\tconst view = this.view;\n\t\tconst form = this.$dialog.$$(\"form\");\n\t\tconst data = form.getValues();\n\n\t\tif(data.range){\n\t\t\tconst rangeParts = data.range.split(\"!\");\n\n\t\t\tif(rangeParts.length == 1)\n\t\t\t\trangeParts.unshift( view.getActiveSheet() );\n\n\t\t\tdata.range = rangeParts[0]+\"!\"+rangeParts[1].toUpperCase();\n\t\t}\n\n\t\tdata.name = data.name.toUpperCase();\n\n\t\tform.setValues(data);\n\n\t\tif (form.validate()){\n\t\t\tconst table = this.$dialog.$$(\"table\");\n\n\t\t\tif(data.id){\n\t\t\t\tconst oldData = table.getItem(data.id);\n\n\t\t\t\tview.ranges.remove(oldData.name, this._getScope(oldData));\n\t\t\t\ttable.updateItem(data.id, data);\n\t\t\t}\n\t\t\telse\n\t\t\t\ttable.add(data);\n\n\t\t\tview.ranges.add(\n\t\t\t\tdata.name,\n\t\t\t\tdata.range,\n\t\t\t\tthis._getScope(data)\n\t\t\t);\n\n\t\t\tview.refresh();\n\n\t\t\ttable.unselect();\n\t\t\tform.setValues({scope: \"$global\"});\n\t\t}\n\t}\n\t_getScope(data){\n\t\treturn data.scope == \"$global\" ? true : data.scope;\n\t}\n\tremoveRange(id){\n\t\tconst view = this.view;\n\t\tview.confirm({\n\t\t\ttext: webix.i18n.spreadsheet.labels[\"range-remove-confirm\"]\n\t\t}).then(()=>{\n\t\t\tconst table = this.$dialog.$$(\"table\");\n\t\t\tconst item = table.getItem(id);\n\n\t\t\tview.ranges.remove(item.name, this._getScope(item));\n\n\t\t\tview.refresh();\n\t\t\ttable.remove(id);\n\t\t});\n\t}\n\teditRange(id){\n\t\tconst form = this.$dialog.$$(\"form\");\n\t\tconst table = this.$dialog.$$(\"table\");\n\n\t\tform.clearValidation();\n\t\tconst item = webix.copy(table.getItem(id));\n\n\t\tform.setValues(item);\n\t}\n\t$init(){\n\t\tthis.view.attachEvent(\"onSheetRename\", (name, newName)=> this._updateData(name, newName));\n\t\tthis.view.attachEvent(\"onSheetRemove\", (name)=> this._updateData(name));\n\t\tthis.view.attachEvent(\"onSheetAdd\", ()=> this._updateData());\n\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst theform = {\n\t\t\tpadding:0,\n\t\t\ttype: \"clean\",\n\t\t\tcols:[\n\t\t\t\t{ view: \"ssheet-dialog-table\", id: \"table\", borderless:true, columns:[\n\t\t\t\t\t{ id:\"name\", header:locale[\"range-name\"], width: 120 },\n\t\t\t\t\t{ id:\"range\", header:locale[\"range-cells\"], width: 150 },\n\t\t\t\t\t{ id:\"scope\", header:locale[\"range-scope\"], width: 95, template: obj => {\n\t\t\t\t\t\treturn obj.scope == \"$global\" ? locale[\"range-global\"] : obj.scope;\n\t\t\t\t\t}},\n\t\t\t\t\t{ template:\"<span class='webix_icon ssheet_ranges_edit wxi-pencil'></span>\", width:44 },\n\t\t\t\t\t{ template:\"<span class='webix_icon ssheet_ranges_edit wxi-trash'></span>\", width:44 }\n\t\t\t\t],\n\t\t\t\tautowidth:true, height: 200, select:\"row\",\n\t\t\t\ton:{\n\t\t\t\t\tonBeforeSelect: id =>{\n\t\t\t\t\t\treturn id == this.$dialog.$$(\"form\").getValues().id;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonClick:{\n\t\t\t\t\t\"wxi-trash\":(ev, id) => this.removeRange(id),\n\t\t\t\t\t\"wxi-pencil\":(ev, id) => this.editRange(id)\n\t\t\t\t}},\n\t\t\t\t{ width: 270, view: \"form\", id:\"form\",\n\t\t\t\t\trules:{\n\t\t\t\t\t\tname: (_, obj)=> {\n\t\t\t\t\t\t\tconst notUnique = this.$dialog.$$(\"table\").find(item => {\n\t\t\t\t\t\t\t\treturn item.name == obj.name && item.scope == obj.scope && item.id != obj.id;\n\t\t\t\t\t\t\t}, true);\n\n\t\t\t\t\t\t\treturn !notUnique && !getLastCharIndex(obj.name);\n\t\t\t\t\t\t},\n\t\t\t\t\t\trange: isRange,\n\t\t\t\t\t\tscope: webix.rules.isNotEmpty\n\t\t\t\t\t},\n\t\t\t\t\telementsConfig:{\n\t\t\t\t\t\tlabelWidth: 95\n\t\t\t\t\t},\n\t\t\t\t\telements:[\n\t\t\t\t\t\t{ view: \"text\", name:\"name\", label: locale[\"range-name\"]},\n\t\t\t\t\t\t{ view: \"text\", name:\"range\", id:\"range\", label: locale[\"range-cells\"], on:{\n\t\t\t\t\t\t\tonFocus:()=>{\n\t\t\t\t\t\t\t\tconst value = this.$dialog.$$(\"range\").getValue();\n\t\t\t\t\t\t\t\tconst rangeParts = value.split(\"!\");\n\t\t\t\t\t\t\t\tif(rangeParts.length == 2 && this.view.getActiveSheet() != rangeParts[0])\n\t\t\t\t\t\t\t\t\tthis.view.showSheet(rangeParts[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ view: \"richselect\", name:\"scope\", id:\"sheets\", label: locale[\"range-scope\"], suggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tmove:true,\n\t\t\thead: webix.i18n.spreadsheet.labels[\"range-title\"],\n\t\t\tautoheight: true,\n\t\t\twidth: 800,\n\t\t\tposition: \"center\",\n\t\t\tbody: theform,\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.saveClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\t_updateData(name, newName){\n\t\tif(!this.$dialog.isVisible())\n\t\t\treturn;\n\n\t\tconst ranges = this.view._mData.getRanges();\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst table = this.$dialog.$$(\"table\");\n\t\tconst form = this.$dialog.$$(\"form\");\n\n\t\tlet editRange = table.getItem( form.getValues().id );\n\t\tif(editRange){\n\t\t\tlet rangeName = editRange.name;\n\n\t\t\tif(name == editRange.scope)\n\t\t\t\trangeName = newName ? newName+\"!\"+rangeName : null;\n\t\t\telse\n\t\t\t\trangeName = editRange.scope+\"!\"+rangeName;\n\n\t\t\teditRange = rangeName ? ranges.get(rangeName) : null;\n\t\t}\n\n\t\ttable.clearAll();\n\n\t\tconst allRanges = ranges.serialize();\n\t\tconst data = [];\n\n\t\tlet selectedId;\n\t\tfor(let i = 0; i < allRanges.length; i++){\n\t\t\tconst id = i+1;\n\t\t\tlet [name, range] = allRanges[i];\n \n\t\t\tif(editRange && ranges.get(name) == editRange)\n\t\t\t\tselectedId = id;\n\n\t\t\tconst nameParts = name.split(\"!\");\n\n\t\t\tdata.push({\n\t\t\t\tscope: nameParts.length == 1 ? \"$global\" : nameParts[0],\n\t\t\t\tname: nameParts[1] || nameParts[0],\n\t\t\t\trange,\n\t\t\t\tid\n\t\t\t});\n\t\t}\n\n\t\ttable.parse(data);\n\n\t\tform.setValues({id:selectedId}, true);\n\t\tif(selectedId)\n\t\t\ttable.select(selectedId);\n\n\t\tconst select = this.$dialog.$$(\"sheets\");\n\t\tconst selectList = select.getList();\n\n\t\tselectList.clearAll();\n\n\t\tconst sheets = [{\n\t\t\tid: \"$global\", value: locale[\"range-global\"]\n\t\t}];\n\t\tthis.view._sheets.forEach(sheet => {\n\t\t\tsheets.push({id:sheet.name, value: sheet.name});\n\t\t});\n\t\tselectList.parse(sheets);\n\n\t\tif(name){\n\t\t\tconst range = this.$dialog.$$(\"range\");\n\t\t\tconst rangeVal = range.getValue();\n\n\t\t\t//remove sheet\n\t\t\tnewName = newName || this.view.getActiveSheet();\n\n\t\t\tif(rangeVal.indexOf(name+\"!\") == 0)\n\t\t\t\trange.setValue((newName)+\"!\"+rangeVal.split(\"!\")[1]);\n\n\t\t\tif(select.getValue() == name)\n\t\t\t\tselect.setValue(newName);\n\t\t}\n\t}\n}","import {Dialog} from \"./common\";\nimport {range} from \"../helpers/column_names\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"add-dropdown\";\n\nexport class DialogBox extends Dialog{\n\t$show(){\n\t\tlet form = this.$dialog.$$(\"form\");\n\t\tthis.cell = this.view.getSelectedId(true);\n\t\tif (!this.cell.length)\n\t\t\treturn false;\n\n\t\tform.clear();\n\n\t\t//restore previosly selected range\n\t\tlet value = this.view.getCellEditor(this.cell[0].row, this.cell[0].column);\n\t\tif (value && value.options)\n\t\t\tform.elements.range.setValue(value.options);\n\n\t\tthis.view.$handleSelection = function(st, end, a, b){\n\t\t\tform.elements.range.setValue(a+\":\"+b);\n\t\t\treturn false;\n\t\t};\n\n\t\tform.elements.range.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\thead:webix.i18n.spreadsheet.labels[\"dropdown-title\"],\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0, view:\"form\", id:\"form\", rows:[\n\t\t\t\t\t{ view:\"text\", label:webix.i18n.spreadsheet.labels[\"dropdown-range\"], name:\"range\" }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst values = this.$dialog.$$(\"form\").elements.range.getValue();\n\n\t\tif (values){\n\t\t\tif(!range(values, this.view))\n\t\t\t\tthis.view.alert({text:webix.i18n.spreadsheet.labels[\"error-range\"]});\n\t\t\telse{\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tfor (let i = 0; i < this.cell.length; i++)\n\t\t\t\t\t\tthis.view.setCellEditor(this.cell[i].row, this.cell[i].column, { editor:\"ss_richselect\", options:values});\n\t\t\t\t}, this);\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tthis.close();\n\t}\n}","import {range as getRangePos} from \"../helpers/column_names\";\nimport {cell_template} from \"../table\";\n\nclass Ranges{\n\tconstructor(view){\n\t\tthis._master = view;\n\t}\n\tclear(scope){\n\t\tconst sheet = typeof scope == \"string\" ? scope : this._master.getActiveSheet();\n\t\tconst ranges = this.serialize(sheet);\n\t\tranges.forEach(range => {\n\t\t\tif(scope === true){\n\t\t\t\tif(range[2])\n\t\t\t\t\tthis.remove(range[0], scope);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse\n\t\t\t\tthis.remove(range[0], scope);\n\t\t});\n\t}\n\t_normalizeName(name, scope){\n\t\tif(scope !== true)\n\t\t\tname = (scope || this._master.getActiveSheet())+\"!\"+name;\n\t\treturn name;\n\t}\n\t_normalizeRange(range, scope){\n\t\tconst rangeParts = range.split(\"!\");\n\t\tif(rangeParts.length == 1)\n\t\t\trange = (typeof scope == \"string\" ? scope : this._master.getActiveSheet()) + \"!\" + range;\n\t\treturn range;\n\t}\n\tadd(name, range, scope){\n\t\tconst view = this._master;\n\n\t\tview.callEvent(\"onAfterRangeSet\", [name, range, scope]);\n\n\t\tname = this._normalizeName(name, scope);\n\n\t\tview._mData.getRanges().add(name, this._normalizeRange(range, scope));\n\t\tview.callEvent(\"onMathRefresh\", []);\n\t}\n\tgetCode(name, scope){\n\t\tname = this._normalizeName(name, scope);\n\n\t\tconst range = this._master._mData.getRanges().get(name);\n\t\tif(range)\n\t\t\treturn range.source;\n\t}\n\tremove(name, scope){\n\t\tname = this._normalizeName(name, scope);\n\n\t\tthis._master._mData.getRanges().remove(name);\n\t\tthis._master.callEvent(\"onMathRefresh\", []);\n\t}\n\tparse(data, sheet){\n\t\tif(!data)\n\t\t\treturn;\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst ranges = this._master._mData.getRanges();\n\t\t\tlet [name, range, globalRange] = data[i];\n\t\t\tname = this._normalizeName(name, globalRange||sheet);\n\n\t\t\tif(!ranges.get(name))\n\t\t\t\tranges.add(name, this._normalizeRange(range, sheet));\n\t\t}\n\t}\n\tserialize(sheet){\n\t\tsheet = sheet || this._master.getActiveSheet();\n\t\tconst allRanges = this._master._mData.getRanges().serialize();\n\t\tconst out = [];\n\n\t\tfor(let i = 0; i < allRanges.length; i++){\n\t\t\tconst arr = allRanges[i];\n\t\t\tconst nameParts = arr[0].split(\"!\");\n\t\t\tconst globalRange = nameParts.length == 1;\n\n\t\t\tif(globalRange || nameParts[0] == sheet)\n\t\t\t\tout.push([\n\t\t\t\t\tnameParts[ globalRange ? 0 : 1 ],\n\t\t\t\t\tarr[1],\n\t\t\t\t\tglobalRange\n\t\t\t\t]);\n\t\t}\n\n\t\treturn out;\n\t}\n\tgetRanges(sheet){\n\t\tconst data = this.serialize(sheet);\n\t\treturn data.map(arr => {\n\t\t\treturn {\n\t\t\t\tname: arr[0],\n\t\t\t\trange: arr[1],\n\t\t\t\tglobal: arr[2]\n\t\t\t};\n\t\t});\n\t}\n}\n\nexport function init(view) {\n\tview.ranges = new Ranges(view);\n\n\tview.attachEvent(\"onDataSerialize\", data => {\n\t\tdata.ranges = view.ranges.serialize();\n\t});\n}\n\nfunction nullFilter(){ \n\tconst locale = webix.i18n.spreadsheet.labels;\n\treturn { id:\"$empty\", value:\"\", $value:\"<span class='webix_ssheet_empty'>\"+locale[\"dropdown-empty\"]+\"</span>\" };\n}\n\nfunction getRange(view, r1, c1, r2, c2){\n\tconst out = [];\n\tconst activeSheet = view._mPage === this;\n\n\tfor (var i = r1-1; i <= r2-1; i++) {\n\t\tfor (var j = c1-1; j <= c2-1; j++){\n\t\t\tlet obj = this.getCell(i, j);\n\t\t\tlet cell;\n\n\t\t\tif(!obj)\n\t\t\t\tcell = {\n\t\t\t\t\tvalue: \"\"\n\t\t\t\t};\n\t\t\telse\n\t\t\t\tcell = webix.copy(obj);\n\n\t\t\tif(activeSheet)\n\t\t\t\tcell.$value = cell_template(view, {id: i+1}, null, null, {id:j+1}, true);\n\t\t\telse\n\t\t\t\tdelete cell.format;\n\n\t\t\tcell.id = cell.value;\n\t\t\tout.push(cell);\n\t\t}\n\t}\n\n\treturn out;\n}\n\nexport function rangeOptions(view, text, extra){\n\tlet values = [];\n\tif (typeof text == \"string\"){\n\t\tconst pos = getRangePos(text, view);\n\t\tif (pos){\n\t\t\tlet page = view._mPage;\n\t\t\tif(pos[4])\n\t\t\t\tpage = view._mData.getPage(pos[4]);\n\n\t\t\tvalues = page ? getRange.apply(page, [view, ...pos]) : [];\n\t\t}\n\t}\n\telse if (webix.isArray(text))\n\t\tfor (let i=0; i<text.length; i++){\n\t\t\tlet v = (text[i] || text[i] === 0) ? text[i] : \"\";\n\t\t\tv = (typeof v === \"object\") ? webix.copy(v) : { id:v, value:v };\n\t\t\tvalues.push(v);\n\t\t}\n\n\tif (extra){\n\t\tif (extra.unique){\n\t\t\tconst test = {};\n\t\t\tfor (let i=values.length-1; i>=0; i--){\n\t\t\t\tif (test[values[i].id])\n\t\t\t\t\tvalues.splice(i, 1);\n\t\t\t\telse\n\t\t\t\t\ttest[values[i].id] = true;\n\t\t\t}\n\t\t}\n\n\t\tlet empty = false;\n\t\tfor (let i=values.length-1; i>=0; i--){\n\t\t\tvalues[i].value = String(values[i].value);\n\t\t\tif (values[i].value === \"\"){\n\t\t\t\tvalues.splice(i, 1);\n\t\t\t\tempty = true;\n\t\t\t}\n\t\t}\n\n\t\tif (extra.order)\n\t\t\tvalues.sort(function(objA, objB){\n\t\t\t\tconst sorters = view.$$(\"cells\").data.sorting.as;\n\t\t\t\tconst a = objA.value;\n\t\t\t\tconst b = objB.value;\n\n\t\t\t\treturn webix.rules.isNumber(a) && webix.rules.isNumber(b) ? sorters.int(a, b) : sorters.string(a, b);\n\t\t\t});\n\n\t\tif (empty && extra.filter)\n\t\t\tvalues.unshift( nullFilter() );\n\n\t\tif (extra.empty)\n\t\t\tvalues.unshift({ id:\"$empty\", $empty:true, value:\"\" });\n\t}\n\treturn values;\n}","import group from \"./undo_group\";\nimport {getType} from \"./types\";\nimport {setSpanCss} from \"./spans\";\nimport {rangeOptions} from \"../mathematics/ranges\";\nimport {changeRange, eachRange, toRange} from \"../helpers/column_names\";\nimport {conditions} from \"../helpers/conditional\";\n\nexport function init(view){\n\tconst table = view._table;\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\treset(view);\n\n\ttable.on_click.ssheet_filter_sign = (e, id) => {\n\t\tconst filter = table._ssFilters[id.row][id.column];\n\t\tconst mode = filter.mode || getFilterMode(view, id.row, id.column);\n\n\t\tlet options = [];\n\t\tif (filter.options){\n\t\t\tif (typeof filter.options == \"string\")\n\t\t\t\toptions = rangeOptions(view, filter.options, { unique:true, order:true, filter:true });\n\t\t\telse if (webix.isArray(filter.options))\n\t\t\t\toptions = rangeOptions(view, filter.options, { filter:true });\n\t\t}\n\t\tview.callEvent(\"onCommand\", [{id:\"start-filter\", cell:id, mode, options, filter}]);\n\t};\n\ttable.on_dblclick.ssheet_filter_sign = () => false;\n\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"create-filter\")\n\t\t\ttoggleFilters(view);\n\t});\n\n\tlet refilter = false;\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type == \"filter\"){\n\t\t\tvalue = (typeof value == \"object\") ? value : null;\n\t\t\tview.setCellFilter(row, column, value);\n\t\t\trefilter = true;\n\t\t}\n\t\telse if (type == \"apply-filter\"){\n\t\t\tconst filter = view.getCellFilter(row, column);\n\n\t\t\tfilter.value = value;\n\t\t\tdelete filter.handler;\n\t\t\tif (value && value.condition){\n\t\t\t\tconst mode = filter.mode || getFilterMode(view, row, column);\n\t\t\t\tfilter.handler = getFilterFunction(mode, filter.value);\n\t\t\t}\n\t\t\trefilter = true;\n\n\t\t\t// update css\n\t\t\tconst add = value && isValueActive(value);\n\t\t\ttable[add?\"addCellCss\":\"removeCellCss\"](row, column, \"ss_filter_active\");\n\t\t\tsetSpanCss(view, row, column, \"ss_filter_active\", add);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterUndo\", () => {\n\t\tif (refilter){\n\t\t\tview.filterSpreadSheet();\n\t\t\trefilter = false;\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif (action == \"filter\"){\n\t\t\tsetSpanCss(view, p.row, p.column, \"ss_filter\", p.newValue);\n\t\t\tsetSpanCss(view, p.row, p.column, \"ss_filter_active\", (p.newValue && p.newValue.value && isValueActive(p.newValue.value)));\n\t\t\tmarkBarFilter(view);\n\t\t}\n\t\telse if (action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._table._ssFilters = {};\n\tmarkBarFilter(view);\n}\n\nexport function getFilters(table){\n\tconst filters = table._ssFilters;\n\tconst all = [];\n\tfor (let row in filters)\n\t\tfor (let column in filters[row])\n\t\t\tall.push(filters[row][column]);\n\treturn all;\n}\n\nexport function serialize(view,data){\n\tconst filters = getFilters(view._table);\n\tconst result = data.filters = [];\n\n\tfor (let i = 0; i<filters.length; i++){\n\t\tlet {row, column, options, mode, value} = filters[i];\n\t\tvalue = value && webix.copy(value);\n\t\tresult.push([row, column, {value, options, mode}]);\n\t}\n}\n\nexport function load(view,data){\n\tconst filters = data.filters;\n\n\tif (filters){\n\t\tfor (let i = 0; i < filters.length; i++){\n\t\t\tview.setCellFilter(filters[i][0], filters[i][1], (filters[i][2] || {options:\"\"}));\n\t\t}\n\t\tview.filterSpreadSheet();\n\t}\n}\n\nexport function clearFilters(view, range){\n\tlet refilter = false;\n\teachRange(range, view, function(view, cell){\n\t\tlet filter = view._table._ssFilters[cell.row];\n\t\tif (filter){\n\t\t\tif (filter[cell.column]){\n\t\t\t\trefilter = true;\n\t\t\t\tdelete filter[cell.column];\n\n\t\t\t\tview._table.removeCellCss(cell.row, cell.column, \"ss_filter\");\n\t\t\t\tview._table.removeCellCss(cell.row, cell.column, \"ss_filter_active\");\n\n\t\t\t\tsetSpanCss(view, cell.row, cell.column, \"ss_filter\", false);\n\t\t\t\tsetSpanCss(view, cell.row, cell.column, \"ss_filter_active\", false);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (refilter)\n\t\tview.filterSpreadSheet();\n}\n\nexport function isFilter(view, row, column){\n\tconst filters = view._table._ssFilters;\n\treturn filters[row] && !!filters[row][column];\n}\n\nexport function calibrateRange(view, row, column, range){\n\tif(!range)\n\t\trange = {end:{row:row}};\n\n\tif (range.end){\n\t\tvar endRow = range.end.row;\n\t\trange = getFilterRange(view, row, column, endRow);\n\t}\n\treturn range;\n}\n\nexport function isValueActive(value){\n\treturn !!(value.includes || (value.condition && value.condition.filter));\n}\n\nfunction isFilterExists(view){\n\tconst filters = view._table._ssFilters;\n\tfor (let row in filters)\n\t\tfor (let column in filters[row])\n\t\t\tif (filters[row][column]) return true;\n\treturn false;\n}\n\nfunction markBarFilter(view){\n\tconst value = isFilterExists(view);\n\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"create-filter\", value}]);\n}\n\n\nfunction getFilterRange(view, row, column, endRow){\n\tif (row === endRow){\n\t\tfor (endRow = row; endRow < view.config.rowCount; endRow++){\n\t\t\tif(!view.getCellValue(endRow+1, column))\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn toRange(row+1, column, endRow, column);\n}\n\nexport function getFilterMode(view, row, column){\n\tfor (let i=row+1; i<view.config.rowCount; i++){\n\t\tconst value = view.getCellValue(i, column);\n\n\t\tif (value || value === 0){\n\t\t\tconst type = getType(view, i, column);\n\t\t\treturn (type == \"number\" || type == \"date\") ? type : \"text\";\n\t\t}\n\t\telse if (value !== \"\")\n\t\t\tbreak;\n\t}\n\treturn \"text\";\n}\n\nfunction toggleFilters(view){\n\tconst range = view._table.getSelectArea();\n\n\tif (isFilterExists(view)){\n\t\tgroup.set(function(){\n\t\t\tview.removeFilters();\n\t\t});\n\t\tif (range)\n\t\t\tview._table.addSelectArea(range.start, range.end);\n\t}\n\telse if (range)\n\t\tgroup.set(function(){\n\t\t\tlet row = range.start.row;\n\t\t\tfor (let i=range.start.column; i<=range.end.column; i++){\n\t\t\t\tview.setCellFilter(row, i, { options:range });\n\t\t\t}\n\t\t});\n\tmarkBarFilter(view);\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tconst filters = data.filters;\n\n\tif (inc){\n\t\tfor(let i=filters.length-1; i>=0; i--){\n\t\t\tlet [row,column,filter] = filters[i];\n\t\t\tif (name == \"row\" && row >= start.row || name == \"column\" && column >= start.column){\n\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc){\t//delete filter mark if row was deleted\n\t\t\t\t\t\tfilters.splice(i,1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tfilters[i][0] = row*1 + inc;\n\t\t\t\t}\n\t\t\t\telse if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tfilters.splice(i, 1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else \n\t\t\t\t\t\tfilters[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t\tfilter.options = changeRange(filter.options, name, inc, start);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function pasteFilter(view, extra, row, col, cutted, translate){\n\tconst filter = extra.filter;\n\n\tfilter.options = changeRange(filter.options, \"row\", translate.row, {column:extra.col, row:extra.row});\n\tfilter.options = changeRange(filter.options, \"column\", translate.column, {column:extra.col, row:extra.row});\n\n\tdelete filter.value; delete filter.handler;\n\tview.setCellFilter(row, col, filter);\n}\n\nexport function getSingleOption(mode, type){\n\tconst c = conditions[mode];\n\tfor (let i=0; i<c.length; i++)\n\t\tif (c[i].id == type) return c[i];\n}\n\nexport function getConditions(name){\n\treturn webix.copy( conditions[name] );\n}\n\nexport function getFilterFunction(mode, value){\n\tconst { includes, condition } = value;\n\tconst opt = getSingleOption(mode, condition.type);\n\tconst handler = opt ? opt.handler : function(){ return true; };\n\n\tif (includes){\n\t\tfor (let i=0; i<includes.length; i++)\n\t\t\tincludes[i] = String(includes[i]);\n\t}\n\n\treturn function(value){\n\t\tif (includes){\n\t\t\treturn includes.indexOf(value) !== -1;\n\t\t} else {\n\t\t\treturn condition.filter === \"\" || handler(value, condition.filter);\n\t\t}\n\t};\n}","import {Dialog} from \"./common\";\nimport * as flt from \"../operations/filter\";\n\nexport const action = \"start-filter\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\tthis.cell = action.cell;\n\t\tthis.$mode = action.mode;\n\t\tthis.$filter = action.filter;\n\n\t\t// cell not provided\n\t\tif (!this.cell || \n\t\t\t// cell is locked\n\t\t\t(this.view.isCellLocked(this.cell.row, this.cell.column))){\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.$dialog.attachEvent(\"onHide\", () => this.$hide());\n\n\t\t\tconst table = this.view.$$(\"cells\");\n\t\t\ttable.attachEvent(\"onScrollY\", () => this.syncScroll());\n\t\t\ttable.attachEvent(\"onScrollX\", () => this.syncScroll());\n\t\t}\n\n\t\tif (this.$show(this.$filter.value, action.options) === false)\n\t\t\treturn this.close();\n\t\tthis.$dialog.show( this._getTargetNode() );\n\t}\n\t_getTargetNode(){\n\t\tconst table = this.view.$$(\"cells\");\n\t\tconst span = table.getSpan(this.cell.row, this.cell.column);\n\t\treturn span ? table.getSpanNode(this.cell) : table.getItemNode(this.cell);\n\t}\n\t$show(value, options){\n\t\tconst list = this.getList();\n\t\tconst filter = this.getFilter();\n\n\t\tif (filter.config.mode !== this.$mode){\n\t\t\tfilter.define(\"conditions\", this.getConditions(this.$mode));\n\t\t\tfilter.define(\"mode\", this.$mode);\n\t\t}\n\n\t\t// if the filter mode for the current column has been changed - reset the value\n\t\tconst type = value && value.conditions && value.conditions.type;\n\t\tif (type && !flt.getSingleOption(this.$mode, type))\n\t\t\tvalue = \"\";\n\n\t\tlist.clearAll();\n\t\tlist.data.importData(options);\n\n\t\t// filter data has been changed - reset value\n\t\tfilter.config.value = \"\";\n\t\tfilter.setValue( webix.copy(value||{}) );\n\t}\n\t$init(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn {\n\t\t\tview:\"popup\",\n\t\t\tcss:\"ssheet_filter\",\n\t\t\tpadding:7,\n\t\t\trelative:\"right\",\n\t\t\tbody:{\n\t\t\t\tmargin:4,\n\t\t\t\trows:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"filter\",\n\t\t\t\t\t\tfield:\"value\",\n\t\t\t\t\t\tmode:\"text\",\n\t\t\t\t\t\tconditions:this.getConditions(\"text\"),\n\t\t\t\t\t\tinputs:[\n\t\t\t\t\t\t\t\"text\",\n\t\t\t\t\t\t\t{ view:\"ssheet-datepicker\", timepicker:true, batch:\"datepicker\", on:{\n\t\t\t\t\t\t\t\tonChange:() => this.getFilter().applyFilter()\n\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t{ view:\"ssheet-daterangepicker\", timepicker:true, batch:\"daterangepicker\", on:{\n\t\t\t\t\t\t\t\tonChange:() => this.getFilter().applyFilter()\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttemplate:function(obj){\n\t\t\t\t\t\t\treturn obj.$value || obj.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{ },\n\t\t\t\t\t\t{ view:\"button\", label:locale[\"cancel\"], autowidth:true, css:\"webix_transparent\", on:{\n\t\t\t\t\t\t\t\"onItemClick\": () => this.close()\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ view:\"button\", label:locale[\"apply\"], autowidth:true, css:\"webix_secondary\", on:{\n\t\t\t\t\t\t\t\"onItemClick\": () => this.applyFilter()\n\t\t\t\t\t\t}},\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\tapplyFilter(){\n\t\tconst filter = this.getFilter();\n\t\tconst oldValue = this.$filter.value;\n\t\tconst value = this.$filter.value = filter.getValue();\n\t\tthis.$filter.handler = flt.getFilterFunction(this.$mode, value);\n\n\t\tthis.view.filterSpreadSheet();\n\t\tthis.view.callEvent(\"onAction\", [\"apply-filter\", { row:this.cell.row, column:this.cell.column, value:oldValue, newValue:value }]);\n\t\tthis.setCellStyle(this.cell.row, this.cell.column, \"ss_filter_active\", flt.isValueActive(value));\n\n\t\tthis.close();\n\t}\n\tsetCellStyle(row, column, css, add){\n\t\tconst table = this.view.$$(\"cells\");\n\t\tconst span = this.getSpan(table, row, column);\n\n\t\tif (span){\n\t\t\tif (add){\n\t\t\t\tif (span[3].indexOf(css) == -1)\n\t\t\t\t\tspan[3] += \" \" + css;\n\t\t\t} else {\n\t\t\t\tspan[3] = span[3].replace(\" \" + css, \"\");\n\t\t\t}\n\t\t}\n\t\ttable[add?\"addCellCss\":\"removeCellCss\"](row, column, css);\n\t}\n\tgetSpan(table, row, column){\n\t\tlet item = table.getSpan()[row];\n\t\tif (item)\n\t\t\treturn item[column];\n\t}\n\tgetList(){\n\t\treturn this.getFilter().getChildViews()[2];\n\t}\n\tgetFilter(){\n\t\treturn this.$dialog.getBody().getChildViews()[0];\n\t}\n\tsyncScroll(){\n\t\tif (this.$dialog.isVisible()){\n\t\t\tconst node = this._getTargetNode();\n\t\t\tconst table = this.view.$$(\"cells\");\n\n\t\t\tlet isHidden = false;\n\t\t\tif (node){\n\t\t\t\tconst nodeOffset = webix.html.offset( node );\n\t\t\t\tconst tableOffset = webix.html.offset( table.$view.getElementsByClassName(\"webix_ss_body\")[0] );\n\t\t\t\tconst ydiff = nodeOffset.y - tableOffset.y;\n\t\t\t\tconst xdiff = nodeOffset.x - tableOffset.x + nodeOffset.width;\n\n\t\t\t\tisHidden = (ydiff < 0 || ydiff+nodeOffset.height > tableOffset.height || \n\t\t\t\t\txdiff < 0 || xdiff-nodeOffset.width > tableOffset.width - webix.env.scrollSize);\n\t\t\t}\n\t\t\tif (!node || isHidden)\n\t\t\t\tthis.$dialog.show({x:-9999, y:-9999});\n\t\t\telse \n\t\t\t\tthis.$dialog.show(node);\n\t\t}\n\t}\n\tgetConditions(name){\n\t\tconst locale = webix.i18n.filter;\n\t\tconst conditions = flt.getConditions(name);\n\n\t\tfor (let i=0; i<conditions.length; i++)\n\t\t\tif (conditions[i].id)\n\t\t\t\tconditions[i].value = locale[conditions[i].id];\n\n\t\treturn conditions;\n\t}\n}","import {Dialog} from \"./common\";\nimport {getFormat} from \"../operations/styles\";\nimport * as fmt from \"../operations/formats\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"custom\";\n\nexport class DialogBox extends Dialog{\n\t$show(){\n\t\tthis.form = this.$dialog.$$(\"form\");\n\t\tthis.list = this.$dialog.$$(\"list\");\n\t\tthis.preview = this.$dialog.$$(\"preview\");\n\n\t\tthis.cell = this.view.getSelectedId(true);\n\t\tif (!this.cell.length)\n\t\t\treturn false;\n\n\t\tthis.fillForm(this.view);\n\n\t\tthis.view.$handleSelection = function(){\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\tconst i18n = webix.i18n.spreadsheet;\n\t\tconst labelsLocale = i18n.labels;\n\t\tconst formatsLocale = i18n.formats;\n\n\t\tconst docsLink = \"https://webix-guides.gitbook.io/spreadsheet-user-guide/formatting_numbers#custom-number-format\";\n\t\tconst delimiters = fmt.getDelimiters(\"int\");\n\n\t\tconst commonConfig = [\n\t\t\t{\n\t\t\t\tname:\"zeros\",\n\t\t\t\tview:\"counter\",\n\t\t\t\tcss:\"webix_ssheet_counter\",\n\t\t\t\tlabel:labelsLocale[\"decimal-places\"],\n\t\t\t\tvalue:0,\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"separator\",\n\t\t\t\tview:\"checkbox\",\n\t\t\t\tlabel:labelsLocale[\"separator\"],\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"richselect\",\n\t\t\t\tname:\"symbol\",\n\t\t\t\tlabel:labelsLocale[\"currency-symbol\"],\n\t\t\t\toptions:fmt.currencies,\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"formlist\",\n\t\t\t\tlabel:labelsLocale[\"negative\"],\n\t\t\t\theight: 160,\n\t\t\t\tname:\"negative\",\n\t\t\t\tbatch:\"common\",\n\t\t\t\tcss:\"webix_ssheet_format_negative\",\n\t\t\t\ttemplate: obj => {\n\t\t\t\t\tif(this.list){\n\t\t\t\t\t\tlet format = this.getFormat(obj.id);\n\t\t\t\t\t\tformat = fmt.format2code(format.fmt, format.delimiters);\n\t\t\t\t\t\tconst style = {css:\"\"};\n\t\t\t\t\t\tconst value = format(-1234.56789, style);\n\n\t\t\t\t\t\treturn \"<span class='\"+style.css+\"'>\"+value+\"</span>\";\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdata:[{id:1}, {id:2}, {id:3}, {id:4}]\n\t\t\t}\n\t\t];\n\n\t\tconst customConfig = [\n\t\t\t{\n\t\t\t\tview:\"text\",\n\t\t\t\tlabel: labelsLocale[\"format-pattern\"],\n\t\t\t\tname:\"format\",\n\t\t\t\tlabelPosition:\"top\",\n\t\t\t\tbatch:\"custom\",\n\t\t\t\tplaceholder:\"[>100]0\"+delimiters.groupSign+\"000\"+delimiters.decimalSign+\"00;[>0]None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"docs\",\n\t\t\t\ttemplate: \"<a href='\"+docsLink+\"' target='_blank' class = 'docs'>\"+labelsLocale[\"format-docs\"]+\"</a>\",\n\t\t\t\tborderless:true,\n\t\t\t\tbatch:\"custom\"\n\t\t\t}\n\t\t];\n\n\t\tconst dateConfig = [\n\t\t\t{\n\t\t\t\tname:\"date\",\n\t\t\t\tbatch:\"date\",\n\t\t\t\tview:\"formlist\",\n\t\t\t\tlabelWidth: 90,\n\t\t\t\theight: 160,\n\t\t\t\tlabel:labelsLocale[\"date-format\"],\n\t\t\t\tcss:\"webix_ssheet_format_date\",\n\t\t\t\ttemplate: obj => fmt.format2code(obj.value, delimiters)(45000),\n\t\t\t\tdata:[\n\t\t\t\t\tformatsLocale.dateFormat,\n\t\t\t\t\tformatsLocale.timeFormat,\n\t\t\t\t\tformatsLocale.fullDateFormat,\n\t\t\t\t\tformatsLocale.longDateFormat\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\twidth:460,\n\t\t\thead: labelsLocale[\"format-title\"],\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"list\",\n\t\t\t\t\t\tid:\"list\",\n\t\t\t\t\t\tcss:\"webix_ssheet_format_type\",\n\t\t\t\t\t\twidth:120,\n\t\t\t\t\t\tscroll:false,\n\t\t\t\t\t\tdata:this.getFormats(),\n\t\t\t\t\t\tselect:true,\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonSelectChange: (id)=>{\n\t\t\t\t\t\t\t\tthis.updateForm();\n\t\t\t\t\t\t\t\tswitch(id[0]){\n\t\t\t\t\t\t\t\t\tcase \"custom\":\n\t\t\t\t\t\t\t\t\tcase \"date\":\n\t\t\t\t\t\t\t\t\t\tthis.form.showBatch(id[0]);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:{\n\t\t\t\t\t\t\t\t\t\tconst elements = this.form.elements;\n\t\t\t\t\t\t\t\t\t\tthis.form.showBatch(\"common\");\n\n\t\t\t\t\t\t\t\t\t\telements.separator[ id[0] == \"percent\" ? \"hide\" : \"show\" ]();\n\t\t\t\t\t\t\t\t\t\telements.symbol[ id[0] == \"price\" ? \"show\" : \"hide\" ]();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"form\",\n\t\t\t\t\t\tid:\"form\",\n\t\t\t\t\t\theight:340,\n\t\t\t\t\t\tpaddingY:0,\n\t\t\t\t\t\tpaddingX:20,\n\t\t\t\t\t\telements:[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: \"preview\",\n\t\t\t\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\t\t\t\tif(obj.value == i18n.table[\"format-error\"])\n\t\t\t\t\t\t\t\t\t\treturn obj.value;\n\t\t\t\t\t\t\t\t\treturn \"<span class ='\"+obj.css+\"'>\"+obj.value+\"</span>\";\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_format_preview\",\n\t\t\t\t\t\t\t\tautoheight: true,\n\t\t\t\t\t\t\t\tborderless:true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t].concat(commonConfig, customConfig, dateConfig),\n\t\t\t\t\t\telementsConfig: {\n\t\t\t\t\t\t\tlabelWidth: 140\n\t\t\t\t\t\t},\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: () => this.updateForm()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.closeWin()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tlet type = this.list.getSelectedId();\n\t\tlet values = (type == \"custom\")?{format:this.form.getValues().format}:this.form.getValues();\n\t\tvalues.type = type;\n\n\t\tgroup.set(()=>{\n\t\t\tfor (let i = 0; i < this.cell.length; i++)\n\t\t\t\tfmt.addFormat(this.view, this.cell[i].row, this.cell[i].column, values.format, values);\n\t\t});\n\n\t\tthis.view.$$(\"cells\").refresh();\n\t\tthis.closeWin();\n\t}\n\tcloseWin(){\n\t\tconst format = getFormat(this.view, this.cell[0].row, this.cell[0].column);\n\t\tconst name = format || \"common\";\n\n\t\t//default format\n\t\tif(!fmt.isCustom(name))\n\t\t\tthis.view.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:name}]);\n\t\tthis.close();\n\t}\n\tgetFormat(negative){\n\t\tconst type = this.list.getSelectedId();\n\t\tlet values = this.form.getValues();\n\n\t\tvalues.negative = negative || values.negative;\n\t\tif(type != \"custom\"){\n\t\t\tif(type != \"date\")\n\t\t\t\tvalues.date = \"\";\n\n\t\t\tvalues = fmt.formToValues(type, values);\n\t\t\treturn {\n\t\t\t\tfmt: fmt.serializeFormat(values),\n\t\t\t\tdelimiters:fmt.getDelimiters(type)\n\t\t\t};\n\t\t}\n\t\telse\n\t\t\treturn {\n\t\t\t\tfmt: values.format,\n\t\t\t\tdelimiters: fmt.getDelimiters(type)\n\t\t\t};\n\t}\n\tfillForm(view){\n\t\tconst locale = webix.i18n.spreadsheet;\n\t\tconst format = getFormat(view, this.cell[0].row, this.cell[0].column);\n\t\tlet values = { zeros:0, separator: 0, negative: 1, date: locale.formats.dateFormat, symbol:fmt.currencies[0].value, format: \"\"};\n\t\tlet type;\n\n\t\tlet name = format || \"\";\n\n\t\tvalues.format = fmt.getFormatSource(name || \"price\");\n\n\t\tif(!name)\n\t\t\ttype = name = \"price\";\n\t\telse if(name == \"string\")\n\t\t\ttype = name = \"custom\";\n\t\telse\n\t\t\ttype = fmt.formatHelpers[name].values.type;\n\n\t\tif(type != \"custom\")\n\t\t\twebix.extend(values, fmt.formatHelpers[name].values, true);\n\n\t\tconst item = this.view.$$(\"cells\").getItem(this.cell[0].row);\n\t\tconst col = this.cell[0].column;\n\n\t\tthis.value = webix.isUndefined(item[col]) ? \"\" : item[col];\n\n\t\tthis.form.setValues(values);\n\t\tthis.list.select(type);\n\t\tthis.updateForm();\n\t}\n\tupdateForm(){\n\t\tconst form = this.form.elements;\n\t\tconst format = this.getFormat();\n\t\tlet value = this.value;\n\n\t\tconst isText = value === \"\" || isNaN(value);\n\n\t\tif(fmt.checkFormat(format, \"date\") && (isText || fmt.isDateInvalid(value)))\n\t\t\tvalue = 45000;\n\t\telse if(isText && !fmt.checkFormat(format, \"string\"))\n\t\t\tvalue = 1234.56789;\n\n\t\tlet style = {css:\"\"};\n\t\tvalue = fmt.format2code(format.fmt, format.delimiters)(value, style);\n\n\t\t//preview values\n\t\tthis.preview.parse({value:value, css:style.css});\n\t\tform.negative.refresh();\n\t\tform.date.refresh();\n\n\t\t//set new format string\n\t\tform.format.setValue(format.fmt);\n\t}\n\tgetFormats(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn [\n\t\t\t{id: \"price\", value: locale.currency},\n\t\t\t{id: \"int\", value: locale.number},\n\t\t\t{id: \"percent\", value: locale.percent},\n\t\t\t{id: \"date\", value: locale.date},\n\t\t\t{id: \"custom\", value: locale[\"custom-format\"]}\n\t\t];\n\t}\n}","import {Dialog} from \"./common\";\nimport {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {isDateInvalid} from \"../operations/formats\";\nimport {getDateEditFormat} from \"../operations/formats\";\nimport {getType} from \"../operations/types\";\n\nexport const action = \"conditional-format\";\n\nfunction getConditionStyle(data){\n\treturn data.map(item => {\n\t\titem.id = item.css;\n\t\treturn item;\n\t});\n}\n\nexport class DialogBox extends Dialog{\n\t_rulesToArr(){\n\t\tconst conditions = this.view.conditions.handlers;\n\t\treturn [\n\t\t\t{\n\t\t\t\tvalue: webix.i18n.spreadsheet.labels[\"common\"],\n\t\t\t\tdisabled:true,\n\t\t\t\t$css:\"webix_ssheet_cformats_type\"\n\t\t\t},\n\t\t\t...conditions.date, //number rules equal to date\n\t\t\t{\n\t\t\t\tvalue: webix.i18n.spreadsheet.labels[\"text\"],\n\t\t\t\tdisabled:true,\n\t\t\t\t$css:\"webix_ssheet_cformats_type\"\n\t\t\t},\n\t\t\t...conditions.text\n\t\t].map(rule => {\n\t\t\tif(!rule.value)\n\t\t\t\trule.value = webix.i18n.filter[ rule.id ];\n\t\t\treturn rule;\n\t\t});\n\t}\n\n\t_getCondition() {\n\t\tconst view = this.view;\n\t\tconst values = this._getDatalayout().getValue();\n\n\t\tconst data = [];\n\t\tvalues.forEach(v => {\n\t\t\tconst item = [v.condition];\n\t\t\tif (v.condition != \"between\" && v.condition != \"notBetween\")\n\t\t\t\titem.push(this._normalizeValue(v.value, v.condition));\n\t\t\telse\n\t\t\t\titem.push([\n\t\t\t\t\tthis._normalizeValue(v.value, v.condition),\n\t\t\t\t\tthis._normalizeValue(v.value2, v.condition)\n\t\t\t\t]);\n\n\t\t\titem.push(v.style);\n\t\t\tfor (let i=0; i<item.length; i++){\n\t\t\t\tif (item[i] === \"\" || (webix.isArray(item[i]) && item[i].indexOf(\"\") != -1))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdata.push(item);\n\t\t});\n\n\t\tview.callEvent(\"onConditionSet\", [data]);\n\t}\n\n\t_safeInt(a){\n\t\tconst num = parseFloat(a);\n\t\tif (num == a) return num;\n\t\treturn a;\n\t}\n\n\t_setCondition() {\n\t\tconst view = this.view;\n\t\tconst collection = view.conditions.get(this.cell.row, this.cell.column);\n\n\t\tconst data = [];\n\t\tif (collection) {\n\t\t\tcollection.forEach(item => {\n\t\t\t\tconst values = {};\n\t\t\t\tvalues.condition = item[0];\n\t\t\t\tif (webix.isArray(item[1])) {\n\t\t\t\t\tvalues.value = this._formatValue(item[1][0], values.condition);\n\t\t\t\t\tvalues.value2 = this._formatValue(item[1][1], values.condition);\n\t\t\t\t} else\n\t\t\t\t\tvalues.value = this._formatValue(item[1], values.condition);\n\n\t\t\t\tvalues.style = item[2];\n\t\t\t\tdata.push(values);\n\t\t\t});\n\t\t}\n\n\t\twhile (data.length < 3)\n\t\t\tdata.push({ });\n\n\t\tthis._getDatalayout().setValue(data);\n\t}\n\n\t_getDatalayout(){\n\t\treturn this.$dialog.getBody().getChildViews()[0].getChildViews()[1].getBody();\n\t}\n\n\t_formatValue(value, condition){\n\t\tif(!(condition && this._isNotDateRule(condition))){\n\t\t\tif(this.editFormat && value !== \"\" && value[0] != \"=\"){\n\t\t\t\tvalue = getJsDateFromExcel(value);\n\t\t\t\treturn this.editFormat(value);\n\t\t\t}\n\t\t}\n\t\treturn value.toString();\n\t}\n\n\t_normalizeValue(value, condition){\n\t\tif(!this._isNotDateRule(condition)){\n\t\t\tif(this.editFormat){\n\t\t\t\tif(isNaN(value)){\n\t\t\t\t\tif(value[0] != \"=\"){\n\t\t\t\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\t\t\t\tvalue = parser(value);\n\t\t\t\t\t\tvalue = isNaN(value) ? \"\" : getExcelDateFromJs(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tvalue = isDateInvalid(value) ? \"\" : value;\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = this._safeInt(value, 10);\n\t\t}\n\t\treturn value;\n\t}\n\n\t_isNotDateRule(condition){\n\t\tif(condition == \"equal\" || condition == \"notEqual\")\n\t\t\treturn false;\n\t\treturn this.view.conditions.handlers.text.find(obj => obj.id == condition);\n\t}\n\n\tokClick(){\n\t\tthis._getCondition();\n\t\tthis.close();\n\t}\n\n\t$show(){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tconst type = getType(this.view, this.cell.row, this.cell.column);\n\n\t\tif(type == \"date\")\n\t\t\tthis.editFormat = getDateEditFormat(this.view, this.cell.row, this.cell.column);\n\n\t\tthis.$dialog.queryView(\"text\", \"all\").forEach(view => {\n\t\t\tview.define({placeholder: type == \"date\" ? this._formatValue(45000) : \"\"});\n\t\t\tview.refresh();\n\t\t});\n\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tif (this.activeValue && a == b){\n\t\t\t\tthis.activeValue.setValue(\"=\"+a);\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tthis._setCondition();\n\t}\n\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tdelete this.editFormat;\n\t\tthis._getDatalayout().clearAll();\n\t}\n\n\tgetRows(data){\n\t\tconst dialog = this;\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tpadding: 0,\n\t\t\tborderless: true,\n\t\t\tcss:\"webix_ssheet_cformats\",\n\t\t\telements: [{\n\t\t\t\tmargin: 10,\n\t\t\t\tpadding: { right: 4 },\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\tname: \"style\",\n\t\t\t\t\t\twidth:120,\n\t\t\t\t\t\tplaceholder: webix.i18n.spreadsheet.labels[\"conditional-style\"],\n\t\t\t\t\t\tcss: \"webix_ssheet_cformat_select\",\n\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\tpadding:0,\n\t\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\t\tcss: \"webix_ssheet_cformat_list\",\n\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\ttemplate(obj) {\n\t\t\t\t\t\t\t\t\tconst css = \"webix_ssheet_cformat \"+obj.css;\n\t\t\t\t\t\t\t\t\treturn `<div class=\"${css}\">${obj.name}</div>`;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\tname: \"condition\",\n\t\t\t\t\t\tplaceholder: webix.i18n.spreadsheet.labels[\"conditional-operator\"],\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: function(newv) {\n\t\t\t\t\t\t\t\tconst elements = this.getFormView().elements;\n\n\t\t\t\t\t\t\t\tif (dialog.editFormat){\n\t\t\t\t\t\t\t\t\tif (dialog._isNotDateRule(newv))\n\t\t\t\t\t\t\t\t\t\telements.value.define({placeholder: \"\"});\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tconst value = dialog._normalizeValue(elements.value.getValue(), newv);\n\t\t\t\t\t\t\t\t\t\telements.value.setValue(dialog._formatValue(value, newv));\n\t\t\t\t\t\t\t\t\t\telements.value.define({placeholder: dialog._formatValue(45000)});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telements.value.refresh();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (newv == \"between\" || newv == \"notBetween\")\n\t\t\t\t\t\t\t\t\telements.value2.show();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\telements.value2.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: this._rulesToArr()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tthis.activeValue = current_view;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonBlur: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tlet value = current_view.getValue();\n\t\t\t\t\t\t\t\t\t\tif(value !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\tconst elements = current_view.getFormView().elements;\n\t\t\t\t\t\t\t\t\t\t\tconst condition = elements.condition.getValue();\n\t\t\t\t\t\t\t\t\t\t\tvalue = this._normalizeValue(value, condition);\n\t\t\t\t\t\t\t\t\t\t\tcurrent_view.setValue(this._formatValue(value, condition));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: \"value\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\tname: \"value2\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tthis.activeValue = current_view;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonBlur: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tlet value = current_view.getValue();\n\t\t\t\t\t\t\t\t\t\tif(value !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\tconst elements = current_view.getFormView().elements;\n\t\t\t\t\t\t\t\t\t\t\tconst condition = elements.condition.getValue();\n\t\t\t\t\t\t\t\t\t\t\tvalue = this._normalizeValue(value, condition);\n\t\t\t\t\t\t\t\t\t\t\tcurrent_view.setValue(this._formatValue(value, condition));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\thidden: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{ view:\"icon\", css:\"webix_ssheet_cformat_icon\", icon:\"wxi-trash\", click: vid => {\n\t\t\t\t\t\tconst form = webix.$$(vid).getFormView();\n\t\t\t\t\t\tconst dlayout = this._getDatalayout();\n\t\t\t\t\t\tdlayout.getValue();\t\t\t// save local changes before rendering\n\n\t\t\t\t\t\tconst index = dlayout.getChildViews().indexOf(form);\n\t\t\t\t\t\tdlayout.remove(dlayout.getIdByIndex(index));\n\n\t\t\t\t\t\tif (dlayout.count() < 3) dlayout.add({ });\n\t\t\t\t\t}}\n\t\t\t\t]}\n\t\t\t]};\n\t}\n\n\t$init(){\n\t\tconst margin = webix.skin.$active.layoutMargin.form;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"conditional-format\"],\n\t\t\tposition: \"center\",\n\t\t\twidth: 770,\n\t\t\tmove: true,\n\t\t\tmargin,\n\t\t\tbody: { margin:0, rows:[\n\t\t\t\t{\n\t\t\t\t\theight: 36,\n\t\t\t\t\tpadding: { left: 12 },\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{ view:\"label\", width: 131, label: webix.i18n.spreadsheet.labels.display },\n\t\t\t\t\t\t{ view:\"label\", width: 161, label: webix.i18n.spreadsheet.labels.condition },\n\t\t\t\t\t\t{ view:\"label\", label: webix.i18n.spreadsheet.labels.value },\n\t\t\t\t\t\t{ view:\"icon\", css:\"webix_ssheet_cformat_icon\", icon:\"wxi-plus-circle\",\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tconst dlayout = this._getDatalayout();\n\t\t\t\t\t\t\t\tdlayout.getValue();\t\t\t// save local changes before rendering\n\t\t\t\t\t\t\t\tdlayout.add({ });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ width: 4 + webix.env.scrollSize }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"scrollview\",\n\t\t\t\t\tmaxHeight: webix.skin.$active.inputHeight * 3 + 4,\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tscroll: \"y\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tview: \"datalayout\",\n\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\trows: [ this.getRows(getConditionStyle(this.view.config.conditionStyle)) ]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]},\n\t\t\ton: {\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"excel-export\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.view.$handleSelection = function(){\n\t\t\treturn false;\n\t\t};\n\n\t\tform.elements.sheets.setValue(this.getSheets());\n\t\tform.elements.filename.setValue(\"Data\");\n\t\tform.elements.filename.getInputNode().select();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"export-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"filename\",  placeholder:webix.i18n.spreadsheet.labels[\"export-name\"]},\n\t\t\t\t\t{ view:\"multicheckbox\", name:\"sheets\"}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tgetSheets(){\n\t\tconst view = this.view;\n\t\tconst sheets = view._sheets;\n\t\tlet value = [];\n\n\t\tfor(let i = 0; i < sheets.length; i++)\n\t\t\tvalue.push({\n\t\t\t\tname: sheets[i].name,\n\t\t\t\tactive: view._activeSheet === sheets[i].name ? 1 : 0\n\t\t\t});\n\n\t\treturn value;\n\t}\n\tokClick(){\n\t\tconst values = this.$dialog.getBody().getValues();\n\t\twebix.toExcel(this.view, values);\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"add-link\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tconst cell = this.view.getSelectedId();\n\t\tif(!cell)\n\t\t\treturn false;\n\t\tif (!this.restoreValue(form))\n\t\t\tform.clear();\n\t\tform.elements.name.focus();\n\t}\n\trestoreValue(form){\n\t\tconst cell = this.view.getSelectedId();\n\t\tif (cell){\n\t\t\tconst value = this.view.getCellValue(cell.row, cell.column);\n\t\t\tif (value && typeof value == \"string\" && value.indexOf(\"=HYPERLINK\") === 0){\n\t\t\t\tconst parts = value.split(\"\\\"\");\n\t\t\t\tform.setValues({\n\t\t\t\t\tname: (parts[3] || \"\"),\n\t\t\t\t\turl: (parts[1] || \"\")\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"link-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"name\",  placeholder:webix.i18n.spreadsheet.labels[\"link-name\"]},\n\t\t\t\t\t{ view:\"text\", name:\"url\",  placeholder:webix.i18n.spreadsheet.labels[\"link-url\"]}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\n\tokClick(){\n\t\tconst cell = this.view.getSelectedId();\n\t\tconst data = this.$dialog.getBody().getValues();\n\n\t\tlet text = \"\";\n\t\tif (data.url){\n\t\t\tdata.name = data.name || data.url;\n\t\t\tif (!/^https?:\\/\\//i.test(data.url))\n\t\t\t\tdata.url = \"http://\" + data.url;\n\t\t\ttext = `=HYPERLINK(\"${data.url}\",\"${data.name}\")`;\n\t\t}\n\n\t\tthis.view.setCellValue(cell.row, cell.column, text);\n\t\tthis.view.refresh();\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"print\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tform.setValues({\n\t\t\tdata:\"current\",\n\t\t\tpaper:\"A4\",\n\t\t\tfit:\"page\",\n\t\t\tmode:\"landscape\",\n\t\t\tsheetnames:1,\n\t\t\tmargin:0\n\t\t});\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"print-title\"],\n\t\t\tmove: true,\n\t\t\tmodal:true,\n\t\t\twidth:530, height:520,\n\t\t\tposition: \"center\",\n\t\t\tbuttons:false,\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ type:\"section\", template: webix.i18n.spreadsheet.labels[\"print-settings\"]},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{ view:\"radio\", name:\"data\",vertical:true, options:[\n\t\t\t\t\t\t\t{ id:\"current\", value:webix.i18n.spreadsheet.labels[\"current-sheet\"]},\n\t\t\t\t\t\t\t{ id:\"all\", value:webix.i18n.spreadsheet.labels[\"all-sheets\"]},\n\t\t\t\t\t\t\t{ id:\"selection\", value:webix.i18n.spreadsheet.labels[\"selection\"]}\n\t\t\t\t\t\t], on:{\n\t\t\t\t\t\t\tonChange:function(newv){\n\t\t\t\t\t\t\t\tif(newv == \"all\"){\n\t\t\t\t\t\t\t\t\tconst form = this.getFormView();\n\t\t\t\t\t\t\t\t\tform.elements.sheetnames.setValue(1);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ rows:[\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"sheetnames\", labelRight:webix.i18n.spreadsheet.labels[\"sheet-names\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"borderless\", labelRight:webix.i18n.spreadsheet.labels[\"borderless\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"skiprows\", labelRight:webix.i18n.spreadsheet.labels[\"skip-rows\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"margin\", labelRight:webix.i18n.spreadsheet.labels[\"margin\"]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{ type:\"section\", template: webix.i18n.spreadsheet.labels[\"print-paper\"]},\n\t\t\t\t\t{ view:\"radio\", name:\"paper\", options:[\n\t\t\t\t\t\t{ id:\"letter\", value:webix.i18n.spreadsheet.labels[\"page-letter\"]},\n\t\t\t\t\t\t{ id:\"A4\", value:webix.i18n.spreadsheet.labels[\"page-a4\"]},\n\t\t\t\t\t\t{ id:\"A3\", value:webix.i18n.spreadsheet.labels[\"page-a3\"]}\n\t\t\t\t\t]},\n\t\t\t\t\t{ type:\"section\", template: webix.i18n.spreadsheet.labels[\"print-layout\"]},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{view:\"radio\", name:\"fit\", options:[\n\t\t\t\t\t\t\t{ id:\"page\", value:webix.i18n.spreadsheet.labels[\"page-width\"]},\n\t\t\t\t\t\t\t{ id:\"data\", value:webix.i18n.spreadsheet.labels[\"page-actual\"]}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ width:25},\n\t\t\t\t\t\t{ view:\"radio\", width:220, name:\"mode\", options:[\n\t\t\t\t\t\t\t{ id:\"portrait\", value:webix.i18n.spreadsheet.labels[\"page-portrait\"]},\n\t\t\t\t\t\t\t{ id:\"landscape\", value:webix.i18n.spreadsheet.labels[\"page-landscape\"]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t{ },\n\t\t\t\t\t\t\t{ view: \"button\", css:\"ssheet_cancel_button\", hotkey:\"esc\",\n\t\t\t\t\t\t\t\tvalue: webix.i18n.spreadsheet.labels.cancel, autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.close()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"button\", value: webix.i18n.spreadsheet.labels.print, hotkey:\"enter\", autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.okClick()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst data = this.$dialog.getBody().getValues();\n\t\tdata.margin = data.margin?0:{};\n\t\tthis.close();\n\t\twebix.print(this.view, data);\n\t}\n}\n","import {Dialog} from \"./common\";\n\nexport const action = \"add-comment\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\t//we get cell only on hover commented cell\n\t\tthis.cell = action.cell ? action.cell : this.view.getSelectedId();\n\n\t\t// cell not provided\n\t\tif (!this.cell || \n\t\t\t// cell is locked and in the edit mode\n\t\t\t(this.view.isCellLocked(this.cell.row, this.cell.column) && !action.viewonly) ||\n\t\t\t// action blocked by user's code\n\t\t\t!(this.view.callEvent(\"onBeforeCommentShow\", [this.cell.row, this.cell.column, !action.viewonly]))){\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.view.comments._activeComment = {editStatus: !action.viewonly, cell: this.cell};\n\n\t\tif(!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.view.comments.commentsView = this.$dialog;\n\t\t\tthis.$dialog.attachEvent(\"onHide\", ()=>this.$hide());\n\t\t\tthis.view.attachEvent(\"onCommentHide\", ()=>this.$dialog.hide());\n\t\t}\n\n\t\tconst form = this.$dialog.getBody();\n\n\t\tconst span = this.view.$$(\"cells\").getSpan(this.cell.row, this.cell.column);\n\t\tconst item = span ? {row: this.cell.row, column:(span[1]*1+span[2]-1)} : this.cell;\n\n\t\twebix.delay(()=>{\n\t\t\tthis.$dialog.show(this.view.$$(\"cells\").getItemNode(item));\n\t\t\tthis._setComment();\n\t\t});\n\t\tif (this.$show(this.$dialog, form) === false)\n\t\t\tthis.close();\n\t}\n\t$show(){\n\t\tthis.textarea = this.$dialog.queryView({view:\"textarea\"});\n\t\tthis.template = this.$dialog.queryView({view:\"template\"});\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tcss:\"ssheet_comments\",\n\t\t\tminWidth:250,\n\t\t\tminHeight:150,\n\t\t\trelative:\"right\",\n\t\t\tresize:true,\n\t\t\ton:{\n\t\t\t\tonViewResize:()=>{\n\t\t\t\t\tthis.$dialog.hide();\n\t\t\t\t\tthis.$dialog.show();\n\t\t\t\t\tif(this.textarea.isVisible())\n\t\t\t\t\t\tthis.textarea.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tbody:{\n\t\t\t\tanimate:false,\n\t\t\t\tcells:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"template\",\n\t\t\t\t\t\tcss:\"ssheet_comment_view\",\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\tscroll:\"auto\",\n\t\t\t\t\t\tonClick:{\n\t\t\t\t\t\t\t\"ssheet_comment_view\":() => {\n\t\t\t\t\t\t\t\tif(!(this.view.config.readonly || this.view.isCellLocked(this.cell.row, this.cell.column)))\n\t\t\t\t\t\t\t\t\tthis.showInput(this.view.comments.get(this.cell.row, this.cell.column));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange:()=>{\n\t\t\t\t\t\t\t\tthis.addComment();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonFocus:()=>{\n\t\t\t\t\t\t\t\tthis.view.comments._activeComment = {editStatus: true, cell: this.cell};\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonBlur:()=>{\n\t\t\t\t\t\t\t\tthis.view.comments._activeComment = {};\n\t\t\t\t\t\t\t\tthis.$dialog.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\t_setComment(){\n\t\tconst comment = this.view.comments.get(this.cell.row, this.cell.column);\n\t\tif(this.view.comments._activeComment.editStatus)\n\t\t\tthis.showInput(comment);\n\t\telse\n\t\t\tthis.showTemplate(comment);\n\t}\n\tshowTemplate(text){\n\t\tthis.template.show();\n\t\tthis.template.setHTML(text);\n\t}\n\tshowInput(text){\n\t\tthis.view.$$(\"cells\").select(this.cell.row, this.cell.column);\n\t\twebix.delay(()=>{\n\t\t\tthis.changeTextarea(text);\n\t\t\tthis.textarea.show();\n\t\t\tthis.textarea.focus();\n\t\t});\n\t}\n\taddComment(){\n\t\tthis.view.comments.add(this.cell.row, this.cell.column, this.textarea.getValue());\n\t}\n\tchangeTextarea(text){\n\t\tthis.textarea.blockEvent();\n\t\tthis.textarea.setValue(text||\"\");\n\t\tthis.textarea.unblockEvent();\n\t}\n}","import {Dialog} from \"./common\";\nexport const action = \"resize\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\tthis.group = action.group;\n\t\tthis.header = action.value;\n\t\tDialog.prototype.open.apply(this, arguments);\n\t}\n\t$show(){\n\t\tconst sel = this.view.getSelectedId();\n\t\tif(!sel)\n\t\t\treturn false;\n\t\tthis.view.$handleSelection = ()=>{\n\t\t\treturn false;\n\t\t};\n\n\t\tconst elements = this.$dialog.getBody().elements;\n\t\tthis.type = elements[\"type\"];\n\t\tthis.size = elements[\"size\"];\n\n\t\tthis.$dialog.getHead().getChildViews()[0].setHTML(this.header);\n\t\tconst grid = this.view.$$(\"cells\");\n\n\t\tlet value;\n\t\tif(this.group == \"row\")\n\t\t\tvalue = grid.getItem(sel.row).$height || grid.config.rowHeight;\n\t\telse\n\t\t\tvalue = grid.getColumnConfig(sel.column).width || grid.config.columnWidth;\n\n\t\tthis.type.getOption(1).value = webix.i18n.spreadsheet.labels[this.group == \"row\" ? \"height\" : \"width\"];\n\t\tthis.type.setValue(1);\n\t\tthis.type.refresh();\n\n\t\tthis.size.setValue(value);\n\t\tthis.size.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\tokClick(){\n\t\tconst type = this.type.getValue();\n\n\t\tlet size = \"auto\";\n\t\tif(type == 1)\n\t\t\tsize = this.size.getValue()*1;\n\t\telse if(type == 3)\n\t\t\tsize = this.view.$$(\"cells\").config[this.group == \"row\" ? \"rowHeight\" : \"columnWidth\"];\n\n\t\tif(this.group == \"row\")\n\t\t\tthis.view.setRowHeight(null, size);\n\t\telse\n\t\t\tthis.view.setColumnWidth(null, size);\n\n\t\tthis.close();\n\t}\n\t$init(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\twidth: 300,\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"radio\", name:\"type\", vertical:true, optionHeight:40,\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange: id => {\n\t\t\t\t\t\t\t\tif(id == 1)\n\t\t\t\t\t\t\t\t\tthis.size.enable();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tthis.size.disable();\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t{id:1, value: \"\"},\n\t\t\t\t\t\t\t{id:2, value: locale[\"fit-content\"]},\n\t\t\t\t\t\t\t{id:3, value: locale[\"default-size\"]},\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{rows: [\n\t\t\t\t\t\t{view:\"text\", name: \"size\", width:120},\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n}","import * as imc from \"./imagecell\";\nimport * as imt from \"./imagetop\";\nimport * as asw from \"./sparkline\";\nimport * as rgs from \"./ranges\";\nimport * as dpd from \"./dropdown\";\nimport * as flt from \"./filter\";\nimport * as fmt from \"./format\";\nimport * as cnd from \"./conditional\";\nimport * as exp from \"./export\";\nimport * as lnk from \"./link\";\nimport * as pnt from \"./print\";\nimport * as cmt from \"./comments\";\nimport * as siz from \"./sizing\";\n\nconst bases = [ imt, imc, asw, rgs, dpd, flt, fmt, cnd, exp, lnk, pnt, cmt, siz ];\n\nexport function init(view){\n\tconst dialogs = {};\n\tconst viewBases = view.config.readonly ? [cmt] : bases;\n\n\tfor (let i = 0; i < viewBases.length; i++)\n\t\tdialogs[viewBases[i].action] = new viewBases[i].DialogBox(view);\n\n\tview.attachEvent(\"onCommand\", function(action){\n\t\tconst box = dialogs[action.id];\n\t\tif (box) box.open(action);\n\t});\n\n\tview.attachEvent(\"onAction\", function(id, values){\n\t\t//hide win when the external ui is removed\n\t\tif(id == \"add-view\" && !values.newValue){\n\t\t\tconst box = dialogs[\"add-image-top\"];\n\t\t\tif(box && box.viewid == values.row){\n\t\t\t\tbox.close();\n\t\t\t}\n\t\t}\n\t});\n}","import {isCellLocked} from \"./lock_cell\";\nimport group from \"./undo_group\";\n\n\nvar ignoreUndoReset = false;\n\nexport function init(view){\n\treset(view);\n\tundoHandlers(view);\n\tview.attachEvent(\"onHardReset\", () => reset(view));\n\tview.attachEvent(\"onAfterSheetShow\", () => reset(view));\n\t// styles\n\tview.attachEvent(\"onBeforeStyleChange\", (row, column, nstyle, ostyle) =>{\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"style\", row:row, column: column, value: ostyle, newValue: nstyle, group: group.value});\n\t});\n\t// editing\n\tview.attachEvent(\"onBeforeValueChange\", (row, column, nvalue, ovalue) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"value\", row:row, column: column, value: ovalue, newValue: nvalue, group: group.value});\n\t});\n\t// merge cells\n\tview.attachEvent(\"onBeforeSpan\", (row, column, value) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"span\", row:row, column: column, value: value, newValue:value, group: group.value});\n\t});\n\t// split cells\n\tview.attachEvent(\"onBeforeSplit\", (row, column, value) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"split\", row:row, column: column, value: value, newValue:value, group: group.value});\n\t});\n\t// Any abstract undo actions\n\tview.attachEvent(\"onAction\", (action, obj) =>\n\t\taddToHistory(\n\t\t\tview,\n\t\t\t{\n\t\t\t\taction: action,\n\t\t\t\trow: obj.row || null,\n\t\t\t\tcolumn: obj.column || null,\n\t\t\t\tvalue: obj.value || null,\n\t\t\t\tnewValue: obj.newValue || null,\n\t\t\t\tgroup: group.value\n\t\t\t}\n\t\t)\n\t);\n\n\t// column resize\n\tview.$$(\"cells\").attachEvent(\"onColumnResize\", (column, nvalue, ovalue) =>\n\t\taddToHistory(view, {action: \"c-resize\", row:0, column:column, value: ovalue, newValue: nvalue, group: group.value})\n\t);\n\t// column hide\n\tview.attachEvent(\"onColumnOperation\", (action, start, end) => {\n\t\tif (action.id !== \"add\" && action.id !== \"del\")\n\t\t\taddToHistory(view, { action:action, row:0, column:{ start, end } });\n\t});\n\t// row hide\n\tview.attachEvent(\"onRowOperation\", (action, start, end) => {\n\t\tif (action.id !== \"add\" && action.id !== \"del\")\n\t\t\taddToHistory(view, { action:action, row:{ start, end }, column:0 });\n\t});\n\t// row resize\n\tview.$$(\"cells\").attachEvent(\"onRowResize\", (row,  nvalue, ovalue) =>\n\t\taddToHistory(view, {action: \"r-resize\", row: row, column:0, value: ovalue, newValue: nvalue, group: group.value})\n\t);\n\n\t// condition formats\n\tview.attachEvent(\"onBeforeConditionSet\", (row, column, value, nvalue) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\n\t\tvalue = value ? webix.copy(value) : null;\n\t\taddToHistory(view, {action: \"condition\", row: row, column: column, value: value, newValue: nvalue, group: group.value});\n\t});\n\tview.$skipHistory = 0;\n}\n\nexport function undo(view){\n\trestoreHistory(view,-1);\n}\n\nexport function redo(view){\n\trestoreHistory(view,1);\n}\n\nexport function reset(view){\n\tif(!ignoreUndoReset){\n\t\tview._ssUndoHistory = [];\n\t\tview._ssUndoCursor = -1;\n\t}\n}\n\nfunction addToHistory(view, data){\n\tif(!view.$skipHistory && !view._loading_data){\n\t\t// remove futher history\n\t\tview._ssUndoHistory.splice(view._ssUndoCursor+1);\n\t\t// add to an array and increase cursor\n\t\tview._ssUndoHistory.push(data);\n\t\tview._ssUndoCursor++;\n\t}\n}\n\nexport function ignoreUndo(func, view){\n\tview.$skipHistory++;\n\ttry{\n\t\tfunc.call(view);\n\t}\n\tfinally {\n\t\tview.$skipHistory--;\n\t}\n}\n\nexport function ignoreReset(func){\n\tignoreUndoReset = true;\n\tfunc();\n\tignoreUndoReset = false;\n}\n\nfunction restoreHistory(view, step){\n\tvar data = view._ssUndoHistory[step>0?(view._ssUndoCursor+step):view._ssUndoCursor];\n\tif(data){\n\t\tvar value = step > 0 ? data.newValue : data.value;\n\t\tvar direction = step>0;\n\t\tvar params = [data.action, data.row, data.column, value, direction];\n\n\t\tview._ssUndoCursor += step;\n\n\t\t// group support\n\t\tvar group = data.group;\n\t\tvar prevData = view._ssUndoHistory[step>0?(view._ssUndoCursor+step):view._ssUndoCursor];\n\n\t\tignoreUndo(function(){\n\t\t\tview.callEvent(\"onUndo\", params);\n\t\t\tif (!group || !(prevData && group == prevData.group)){\n\t\t\t\tview.refresh();\n\t\t\t\tview.callEvent(\"onAfterUndo\", []);\n\t\t\t}\n\t\t},view);\n\n\t\tif(prevData && group && group == prevData.group){\n\t\t\trestoreHistory(view, step);\n\t\t}\n\t}\n}\n\nfunction undoHandlers(view){\n\tview.attachEvent(\"onUndo\", function(type, row, column, value) {\n\t\tswitch (type) {\n\t\t\tcase \"freeze-row\":\n\t\t\t\tview.freezeRows(value);\n\t\t\t\tbreak;\n\t\t\tcase \"freeze-column\":\n\t\t\t\tview.freezeColumns(value);\n\t\t\t\tbreak;\n\t\t}\n\t});\n}","import {range, toRange, changeRange, encode, isRange} from \"../helpers/column_names\";\nimport {ignoreUndo} from \"./undo\";\n\nexport function init(view){\n\tconst grid = view._table.$view.querySelector(\".webix_ss_center\");\n\n\tview.views = {\n\t\tregister:function(type, render, track){\n\t\t\tif(!this._types[type])\n\t\t\t\tthis._types[type] = { render:render, track:track };\n\t\t},\n\t\tmove: function(id, x, y){\n\t\t\tconst win = webix.$$(id);\n\t\t\tconst old = webix.copy(this._pull[id]);\n\t\t\tthis._pull[id].x = _correctPos(view, win, x, \"x\");\n\t\t\tthis._pull[id].y = _correctPos(view, win, y, \"y\");\n\t\t\tview.callEvent(\"onAction\", [\"move-view\", { row:id, newValue:webix.copy(this._pull[id]), value:old} ]);\n\t\t\t_showOne(view, win, this._pull[id]);\n\t\t},\n\t\tadd: function(x, y, type, data, config, id){\n\t\t\tconfig = config || {};\n\t\t\tif(type == \"chart\"){\n\t\t\t\tconfig = webix.extend(config, {\n\t\t\t\t\ttype: \"line\",\n\t\t\t\t\tdataSeries:\"columns\"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst height =  config.height || 300;\n\t\t\tconst width = config.width || 500;\n\n\t\t\tconst win = webix.ui({ \n\t\t\t\tid:id || \"$ssheet-ui\"+webix.uid(), // fixed id is for undo only\n\t\t\t\tview: \"ssheet-ui\",\n\t\t\t\tcontainer:grid, master:view._table.config.id,\n\t\t\t\twidth:width, height:height\n\t\t\t});\n\n\t\t\twin.attachEvent(\"onViewMoveEnd\", (x, y) => {\n\t\t\t\tconst state = view._table.getScrollState();\n\t\t\t\tthis.move(id, x, y+state.y);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewResize\", () => {\n\t\t\t\tconst conf =  this._pull[id];\n\t\t\t\tconst old = webix.copy(conf);\n\n\t\t\t\tconf.config.height = win.$height;\n\t\t\t\tconf.config.width = win.$width;\n\t\t\t\tview.callEvent(\"onAction\", [\"resize-view\", { row:id, newValue:webix.copy(conf), value:old } ]);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewEdit\", () => {\n\t\t\t\tconst config = this._pull[id];\n\t\t\t\tconst command = this._commands[config.type] || config.type;\n\t\t\t\tview.callEvent(\"onCommand\", [{ id:command, viewid:id, config }]);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewRemove\", () => this.remove(id));\n\n\t\t\tid = win.config.id;\n\n\t\t\tx = _correctPos(view, win, x, \"x\");\n\t\t\ty = _correctPos(view, win, y, \"y\");\n\n\t\t\tthis._pull[id] = { x, y, type, data, config };\n\t\t\tthis.update(id, data, config, true);\n\t\t\t_showOne(view, win, this._pull[id]);\n\n\t\t\treturn id; \n\t\t},\n\t\tremove: function(id){\n\t\t\tconst old = this._pull[id];\n\t\t\twebix.$$(id).close();\n\t\t\tdelete this._pull[id];\n\n\t\t\tview.callEvent(\"onAction\", [\"add-view\", { row:id, newValue:null, value:old } ]);\n\t\t},\n\t\tget:function(id){\n\t\t\treturn webix.$$(id).getBody();\n\t\t},\n\t\tgetConfig:function(id){\n\t\t\treturn this._pull[id];\n\t\t},\n\t\tupdate:function(id, data, config, inner){\n\t\t\tconst old = inner ? null : webix.copy(this._pull[id]);\n\t\t\tconst conf = this._pull[id];\n\t\t\tconst actions = this._types[conf.type];\n\n\t\t\tdata = data || config.data || \"\";\n\t\t\tconfig = config || {};\n\n\t\t\tdelete config.data;\n\n\t\t\tif(conf.type == \"chart\"){\n\t\t\t\tconst type = config.type;\n\t\t\t\tif(type && !_isPie(type) && !config.series){\n\t\t\t\t\tconst xAxis = config.xAxis && config.xAxis.range;\n\t\t\t\t\tconst legend = config.legend && config.legend.range;\n\n\t\t\t\t\tconst oldXaxis = old && old.config && old.config.xAxis && old.config.xAxis.fromData;\n\n\t\t\t\t\tconfig.series = _getSeries(view, data, config.dataSeries, {xAxis, legend}, oldXaxis);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst win = webix.$$(id);\n\n\t\t\tconst height = config.height || 300;\n\t\t\tconst width = config.width || 500;\n\n\t\t\tif(win.$width != width && win.$height != height){\n\t\t\t\twin.define({width, height});\n\t\t\t\twin.resize();\n\t\t\t}\n\n\t\t\tconf.data = data;\n\t\t\tconf.config = config;\n\n\t\t\tlet node = this.get(id);\n\n\t\t\tdata = _fromRange(view, conf);\n\n\t\t\tif(actions.render){\n\t\t\t\tconst renderConfig = webix.copy(conf);\n\n\t\t\t\t//clear width and height for inner view resizing\n\t\t\t\trenderConfig.config.width = renderConfig.config.height = 0;\n\n\t\t\t\tnode = actions.render(node, renderConfig, data);\n\t\t\t\t_processTables(node);\n\t\t\t}\n\n\t\t\tif(actions.track)\n\t\t\t\t_trackOne(view, node, actions.track, conf);\n\n\t\t\tview.callEvent(\"onAction\", [\"add-view\", { row:id, newValue:webix.copy(this._pull[id]), value:old} ]);\n\t\t},\n\t\thighlight:function(id){\n\t\t\tconst win = webix.$$(id);\n\t\t\tconst css = \"webix_ssheet_ui_focused\";\n\n\t\t\tconst oldWin = webix.$$(this._activeWin);\n\t\t\tif(oldWin && !oldWin.$destructed)\n\t\t\t\twebix.html.removeCss(oldWin.$view, css);\n\n\t\t\tif(win){\n\t\t\t\tthis._activeWin = id;\n\t\t\t\twebix.html.addCss(win.$view, css);\n\t\t\t}\n\t\t\telse\n\t\t\t\tdelete this._activeWin;\n\t\t},\n\t\t_commands:{\n\t\t\t\"image\":\"add-image-top\",\n\t\t\t\"chart\":\"add-chart\"\n\t\t},\n\t\t_types:{},\n\t\t_pull:{}\n\t};\n\n\t// handle events\n\tview._table.attachEvent(\"onResize\", () => _showAll(view) );\n\tview._table.attachEvent(\"onScrollY\", () => _showAll(view) );\n\tview._table.attachEvent(\"onScrollX\", () => _showAll(view) );\n\n\tview.attachEvent(\"onReset\", () => _reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tconst move = type === \"move-view\";\n\t\tif (move || type == \"resize-view\" || type === \"add-view\")\n\t\t\t_undoUI(view, move, row, value);\n\t});\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif(action == \"header-hide\")\n\t\t\t_showAll(view);\n\t\telse if(action == \"before-grid-change\")\n\t\t\t_updateData(view, p.name, p.inc, p.data, p.start);\n\t});\n\tview.attachEvent(\"onColumnOperation\", () =>  _showAll(view, true));\n\tview.attachEvent(\"onRowOperation\", () => _showAll(view, true));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => _serialize(view, data, config));\n\tview.attachEvent(\"onCellChange\", () => _trackAll(view));\n\tview.attachEvent(\"onMathRefresh\", () => _trackAll(view));\n\n\tview.attachEvent(\"onDestruct\", () => {\n\t\tfor(let i in view.views._pull) webix.$$(i).destructor();\n\t});\n\n\tlet editUIType;\n\twebix.attachEvent(\"onClick\", function(ev){\n\t\tlet focus = webix.$$(ev);\n\t\tif(focus && focus.config.externalUI)\n\t\t\tfocus = webix.$$(focus.config.externalUI);\n\n\t\tconst ui = focus && (focus.queryView(\"ssheet-ui\",\"self\") || focus.queryView(\"ssheet-ui\",\"parent\"));\n\n\t\tif(ui){\n\t\t\tview.views.highlight(ui);\n\t\t\tconst id = ui.config.id;\n\n\t\t\tif(editUIType){\n\t\t\t\tif(view.views.getConfig(id).type == editUIType)\n\t\t\t\t\tui.callEvent(\"onViewEdit\", []); //start editing if any editor is open\n\t\t\t\telse\n\t\t\t\t\tview.callEvent(\"onCommand\", [{ id:\"close-ui-editor\" }]);\n\t\t\t}\n\t\t}\n\t\telse if(!editUIType)\n\t\t\tview.views.highlight();\n\t});\n\n\tview.attachEvent(\"onUIEditStart\", function(id, type){\n\t\tview.views.highlight(id);\n\t\teditUIType = type;\n\t});\n\n\tview.attachEvent(\"onUIEditStop\", function(id, type){\n\t\tif(editUIType == type)\n\t\t\twebix.delay(()=>{ // after onClick handler (to save focus)\n\t\t\t\teditUIType = null;\n\t\t\t});\n\t});\n\n\t// set default views\n\tview.views.register(\"chart\", (node, conf, data) => {\n\t\tconst dataRange = _getNames(view, conf);\n\t\tconst config = _genChartConfig(conf, data, dataRange);\n\t\treturn webix.ui(config, node);\n\t}, (view, data) => {\n\t\tview.clearAll();\n\t\tview.parse(data);\n\t});\n\n\tview.views.register(\"image\", (node, conf, data) => {\n\t\tconst config = webix.extend({ css:\"webix_ssheet_bgimage\", template:`<img src=\"${data}\"/>` }, conf.config||{}, true );\n\t\treturn webix.ui(config, node);\n\t});\n}\n\nfunction _parse(view, data){\n\tconst views = data.views;\n\tif(views){\n\t\tignoreUndo(function(){\n\t\t\tviews.forEach(obj => view.views.add.apply(view.views, obj));\n\t\t}, view);\n\t}\n}\n\nfunction _serialize(view, data, config){\n\tdata.views = [];\n\tfor(let i in view.views._pull){\n\t\tconst conf = view.views._pull[i];\n\t\tconst one = [conf.x, conf.y, conf.type, conf.data, conf.config];\n\t\tif(config && config.viewIds)\n\t\t\tone.push(i);\n\t\tdata.views.push(one);\n\t}\n}\n\nlet thread;\nfunction _trackAll(view){\n\tclearTimeout(thread);\n\tthread = webix.delay(() => {\n\t\tconst ui = view.views;\n\t\tfor(let id in ui._pull){\n\t\t\tconst conf = ui._pull[id];\n\n\t\t\tconst viewMethods = ui._types[conf.type];\n\t\t\tconst render = viewMethods.render;\n\t\t\tconst track = viewMethods.track;\n\n\t\t\tif(track)\n\t\t\t\t_trackOne(view, ui.get(id), track, conf, render);\n\t\t}\n\t});\n}\n\nfunction _trackOne(view, node, track, conf, render){\n\tconst data = _fromRange(view, conf);\n\n\tif(conf.type == \"chart\"){\n\t\tif(render)\n\t\t\tnode = render(node, conf, data, true);\n\n\t\tconst config = conf.config;\n\t\tif(config && !_isPie(config.type))\n\t\t\t_removeLegend(data, conf, view);\n\t}\n\n\ttrack(node, data);\n}\n\nfunction _updateData(view, name, inc, data, start){\n\tconst views = data.views;\n\tfor(let i = 0; i < views.length; i++){\n\t\tif(_isRange(views[i][3])){\n\t\t\tconst series = views[i][4].series;\n\t\t\tif(series){\n\t\t\t\tseries.forEach(obj => {\n\t\t\t\t\tobj.range = changeRange(obj.range, name, inc, start);\n\t\t\t\t\tobj.active = changeRange(obj.active, name, inc, start);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst legend = views[i][4].legend && views[i][4].legend.range;\n\t\t\tif(legend)\n\t\t\t\tviews[i][4].legend.range = _getDataParts(legend).map(range => changeRange(range, name, inc, start)).join(\",\");\n\n\t\t\tconst xAxis = views[i][4].xAxis && views[i][4].xAxis.range;\n\t\t\tif(xAxis)\n\t\t\t\tviews[i][4].xAxis.range = changeRange(xAxis, name, inc, start);\n\n\t\t\tviews[i][3] = _getDataParts(views[i][3]).map(range => changeRange(range, name, inc, start)).join(\",\");\n\t\t}\n\t}\n}\n\nfunction _showAll(view, pos){\n\t//close possibly open menus of embedded ui\n\twebix.callEvent(\"onClick\", []);\n\n\tfor(let id in view.views._pull){\n\t\tconst win = webix.$$(id);\n\t\tconst conf = view.views._pull[id];\n\t\tif(pos){\n\t\t\tconf.x = _correctPos(view, win, conf.x, \"x\");\n\t\t\tconf.y = _correctPos(view, win, conf.y, \"y\");\n\t\t}\n\t\t_showOne(view, win, conf);\n\t}\n}\n\nfunction _showOne(view, win, conf){\n\tconst state = view._table.getScrollState();\n\n\twin.show({\n\t\tx:conf.x,\n\t\ty:conf.y-state.y\n\t});\n}\n\nfunction _correctPos(view, win, v, type){\n\tif(!v && v !==0 )\n\t\tv = view._table.getScrollState()[type]+50;\n\telse{\n\t\tconst size = type == \"x\" ? _getWidth(view)-win.$width : _getHeight(view)-win.$height;\n\t\tv = Math.min(Math.max(v, 0), size);\n\t}\t\n\treturn v;\n}\n\nfunction _reset(view){\n\tignoreUndo(function(){\n\t\tfor(let id in view.views._pull)\n\t\t\tview.views.remove(id);\n\t}, view);\n}\n\nfunction _undoUI(view, move, id, value){\n\tif(value){\n\t\tconst {x, y, type, data, config} = value;\n\t\tif(view.views._pull[id]){\n\t\t\tif(move)\n\t\t\t\tview.views.move(id, x, y);\n\t\t\telse\n\t\t\t\tview.views.update(id, data, config);\n\t\t}\n\t\telse\n\t\t\tview.views.add(x, y, type, data, config, id);\n\n\t\tconst editor = view.$$(\"chartEditor\");\n\t\tif(editor && editor.viewId == id)\n\t\t\teditor.queryView(\"form\").setValues(config);\n\t}\n\telse\n\t\tview.views.remove(id);\n}\n\nfunction _getWidth(view){\n\tlet width = 0;\n\tview._table.eachColumn(function(id){\n\t\tif(id !== \"rowId\")\n\t\t\twidth += this.getColumnConfig(id).width;\n\t});\n\treturn width;\n}\n\nfunction _getHeight(view){\n\tlet height = 0;\n\tview._table.data.each(function(obj){\n\t\theight += obj.$height || webix.skin.$active.rowHeight;\n\t});\n\treturn height;\n}\n\n//disable datatables not to interfere with ss table events\nfunction _processTables(node){\n\tconst query = function(view){\n\t\treturn view.name == \"datatable\" || view.name == \"treetable\";\n\t};\n\tlet tables = node.queryView(query, \"self\");\n\tif(tables) tables = [tables];\n\telse tables = node.queryView(query, \"all\");\n\ttables.forEach((dt) => dt.disable());\n}\n\n/* chart-specific helpers */\n\nfunction _genChartConfig(conf, data, dataRange){\n\tconst htmlFilter = /<[^>]*>/gi;\n\tlet config = webix.copy(conf.config);\n\n\tconfig = _normalizeConfig(config);\n\n\tconst scale = config.scale.lines;\n\tconst scaleColor = config.scale.color || undefined;\n\n\tconst type = config.type;\n\n\tif(_isPie(type))\n\t\tdelete config.series;\n\n\tconst legendConfig = config.legend;\n\tlet legendRange = !legendConfig.fromData && legendConfig.range;\n\tif(legendRange){\n\t\tconst switchDirection =  config.dataSeries == \"rows\";\n\t\tlegendRange = _getParts(legendConfig.range, switchDirection, dataRange);\n\t}\n\n\tconst legend = {\n\t\theight:24,\n\t\talign: legendConfig.align || \"center\",\n\t\tvalign: legendConfig.valign || \"bottom\"\n\t};\n\n\tlegend.layout = legend.valign == \"middle\" ? \"y\" : \"x\";\n\n\tif(_isPie(type))\n\t\t_pieConfig(data, config, legend, legendRange);\n\telse if(config.series){\n\t\tlegend.values = [];\n\n\t\tconst lines = config.series;\n\t\tconfig.series = [];\n\n\t\tconst xAxis = config.xAxis;\n\t\tif(xAxis.fromData)\n\t\t\txAxis.range = legendRange ? Object.keys(data[0]).filter(line => legendRange.indexOf(line) == -1)[0] : \"data0\";\n\t\telse if(xAxis.range)\n\t\t\txAxis.range = dataRange[xAxis.range];\n\n\t\tfor(let i = 0; i < lines.length; i++){\n\t\t\tconst color = lines[i].color;\n\t\t\tconst item = dataRange[lines[i].range];\n\n\t\t\tif(item != xAxis.range){\n\t\t\t\tconst s = {\n\t\t\t\t\tvalue:`#${item}#`,\n\t\t\t\t\tlabel: lines[i].label ? `#${item}#` : \"\",\n\t\t\t\t\ttooltip:{\n\t\t\t\t\t\ttemplate: lines[i].tooltip ? `#${item}#` : \"\"\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tif(type == \"radar\" || type == \"line\" || type == \"spline\"){\n\t\t\t\t\ts.line = { color:color };\n\t\t\t\t\ts.item = { borderColor:color, type:lines[i].marker };\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\ts.color = color;\n\t\t\t\tif(type == \"area\" || type == \"splineArea\")\n\t\t\t\t\ts.alpha = 0.7;\n\n\t\t\t\tif(data[0] && (legendRange || legendConfig.fromData)){\n\t\t\t\t\tconst val = legendRange ? data[0][legendRange[i]] : data[0][item];\n\t\t\t\t\tconst text = (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t\t\tlegend.values.push({text, color});\n\t\t\t\t}\n\n\t\t\t\tconfig.series.push(s);\n\t\t\t}\n\t\t}\n\n\t\tconfig.xAxis = {\n\t\t\ttemplate: obj => {\n\t\t\t\tconst val = obj[xAxis.range];\n\t\t\t\treturn (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t},\n\t\t\ttitle: config.xAxis.title,\n\t\t\tlineColor: scaleColor,\n\t\t\tcolor: scaleColor,\n\t\t\tlines: scale\n\t\t};\n\n\t\tif(legend.values.length)\n\t\t\tconfig.legend = legend;\n\t\telse\n\t\t\tdelete config.legend;\n\t}\n\n\tconfig.yAxis = config.yAxis||{};\n\tfor(let property in config.yAxis)\n\t\tif(config.yAxis[property] === \"\")\n\t\t\tdelete config.yAxis[property];\n\n\tconfig.yAxis = webix.extend(config.yAxis, {\n\t\tlineColor: scaleColor,\n\t\tcolor: scaleColor,\n\t\tlines: scale,\n\t\tlineShape: config.scale.circle ? \"arc\" : \"default\"\n\t});\n\n\treturn webix.extend({\n\t\tview:\"chart\",\n\t\tpadding:{\n\t\t\tleft:80\n\t\t}\n\t}, config, true);\n}\n\nfunction _pieConfig(data, config, legend, legendRange){\n\tconst htmlFilter = /<[^>]*>/gi;\n\tfor(var i in data[0]){\n\t\tif(config.legend.fromData){\n\t\t\tlegend.template = obj => {\n\t\t\t\tconst val = obj[i];\n\t\t\t\treturn (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t}; //data0\n\t\t\tconfig.value = `#${i.replace(\"0\", \"1\")}#`; //data1\n\t\t}\n\t\telse{\n\t\t\tif(config.legend.range)\n\t\t\t\tlegend.template = obj => {\n\t\t\t\t\tconst val = obj[legendRange[0]];\n\t\t\t\t\treturn (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t\t};\n\t\t\tconfig.value = `#${i}#`;\n\t\t}\n\t\tbreak; \n\t}\n\tif(legend.template)\n\t\tconfig.legend = legend;\n\telse\n\t\tdelete config.legend;\n\n\tif(config.pieInnerText)\n\t\tconfig.pieInnerText = config.value;\n}\n\nfunction _isRange(data){\n\treturn typeof data == \"string\" && data.indexOf(\"data:image\") === -1;\n}\n\nfunction _fromRange(view, conf){\n\tlet data = conf.data;\n\n\tif(/^(http|data:image|\\/)/i.test(data))\n\t\treturn data;\n\n\tconst arr = [];\n\tif(data){\n\t\tconst config = conf.config;\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tlet lastIndex = 0;\n\n\t\tdata = _getDataParts(data);\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst cells = _isRange(data[i]) ? range(data[i], view) : null;\n\t\t\tif(cells){\n\t\t\t\tconst page = cells[4] ? view._mData.getPage(cells[4]) : view._mPage;\n\t\t\t\tcells[5] = lastIndex;\n\n\t\t\t\tif(page){\n\t\t\t\t\tconst subdata = switchDirection ? getRangeRows.apply(page, cells) : getRangeCols.apply(page, cells);\n\t\t\t\t\tlastIndex += subdata[2];\n\t\t\t\t\tfor(let i = 0; i < subdata[0].length; i++){\n\t\t\t\t\t\tif(!arr[i])\n\t\t\t\t\t\t\tarr[i] = {};\n\t\t\t\t\t\twebix.extend(arr[i], subdata[0][i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn arr;\n}\n\nfunction _removeLegend(arr, conf, view){\n\tconst config = conf.config;\n\tif(typeof(config.legend) != \"object\")\n\t\tconfig.legend = {fromData: !!config.legend};\n\n\tconst legend = config.legend;\n\n\tif(legend.fromData)\n\t\tarr.shift();\n\telse if(legend.range){\n\t\tconst names = _getNames(view, conf);\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tconst legendRange = _getParts(legend.range, switchDirection, names);\n\t\tfor (let i = 0; i < legendRange.length; i++){\n\t\t\tconst item = legendRange[i];\n\t\t\tdelete arr[0][item];\n\t\t}\n\t}\n}\n\nfunction _getNames(view, conf){\n\tlet data = conf.data;\n\n\tif(/^(http|data:image|\\/)/i.test(data))\n\t\treturn;\n\n\tlet names = {};\n\tif(data){\n\t\tconst config = conf.config;\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tlet lastIndex = 0;\n\n\t\tdata = _getDataParts(data);\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst cells = _isRange(data[i]) ? range(data[i], view) : null;\n\t\t\tif(cells){\n\t\t\t\tconst page = cells[4] ? view._mData.getPage(cells[4]) : view._mPage;\n\t\t\t\tcells[5] = lastIndex;\n\n\t\t\t\tif(page){\n\t\t\t\t\tconst subdata = switchDirection ? getRangeRows.apply(page, cells) : getRangeCols.apply(page, cells);\n\t\t\t\t\tlastIndex += subdata[2];\n\t\t\t\t\twebix.extend(names, subdata[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn names;\n}\n\nexport function _getDataParts(data){\n\treturn data.replace(/\\s/g, \"\").split(\",\");\n}\n\nexport function _isPie(type){\n\treturn /pie|donut/.test(type);\n}\n\nexport function _getSeries(view, data, dataSeries, active, oldXaxis){\n\tconst dir = dataSeries == \"rows\";\n\tlet vals = [];\n\n\tif(data){\n\t\tlet xAxis = [];\n\t\tlet legend = [];\n\t\tlet activeVals = [];\n\n\t\tif(active){\n\t\t\tif(active.legend)\n\t\t\t\tlegend = _getParts(active.legend, dir);\n\t\t\tif(active.xAxis)\n\t\t\t\txAxis = _getParts(active.xAxis, dir);\n\t\t\tif(active.series)\n\t\t\t\tactiveVals = active.series.filter(val => legend.indexOf(val.range) == -1 && xAxis.indexOf(val.range) == -1);\n\t\t}\n\n\t\tdata = _getDataParts(data);\n\t\tlet colorIndex = 0;\n\t\tlet firstRange = 1;\n\t\tdata.forEach(subdata => {\n\t\t\tconst series = isRange(subdata) ? range(subdata, view) : null;\n\t\t\tif(series){\n\t\t\t\tconst start = dir ? series[0] : series[1];\n\t\t\t\tconst end = dir ? series[2] : series[3];\n\n\t\t\t\tlet inActiveSeries;\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tconst range = dir ? toRange(i, series[1], i, series[3], series[4]) : toRange(series[0], i, series[2], i, series[4]);\n\t\t\t\t\tconst seria = activeVals.find(val => val.range == range && (!val.active || val.active == subdata));\n\n\t\t\t\t\tif(seria){\n\t\t\t\t\t\tif(!seria.active)\n\t\t\t\t\t\t\tseria.active = subdata;\n\t\t\t\t\t\tinActiveSeries = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tconst range = dir ? toRange(i, series[1], i, series[3], series[4]) : toRange(series[0], i, series[2], i, series[4]);\n\t\t\t\t\tif(legend.indexOf(range) != -1 || xAxis.indexOf(range) != -1)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tconst activeVal = activeVals.filter(val => val.range == range && val.active == subdata)[0];\n\n\t\t\t\t\tif(inActiveSeries && !activeVal && !(oldXaxis && firstRange && i == start))\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tvals.push(activeVal || {\n\t\t\t\t\t\tactive: subdata,\n\t\t\t\t\t\trange,\n\t\t\t\t\t\tmarker: \"square\",\n\t\t\t\t\t\ttooltip: 1,\n\t\t\t\t\t\tcolor: _getColor(colorIndex)\n\t\t\t\t\t});\n\n\t\t\t\t\tcolorIndex++;\n\t\t\t\t}\n\t\t\t\tfirstRange = 0;\n\t\t\t}\n\t\t});\n\t}\n\treturn vals;\n}\n\nexport function _getParts(ranges, dir, dataRange){\n\tconst parts = [];\n\n\tranges = _getDataParts(ranges);\n\tranges.forEach(subRange => {\n\t\tsubRange = isRange(subRange) ? range(subRange) : null;\n\t\tif(subRange){\n\t\t\tconst start = dir ? subRange[0] : subRange[1];\n\t\t\tconst end = dir ? subRange[2] : subRange[3];\n\n\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\tconst range = dir ?\n\t\t\t\t\ttoRange(i, subRange[1], i, subRange[3], subRange[4]):\n\t\t\t\t\ttoRange(subRange[0], i, subRange[2], i, subRange[4]);\n\n\t\t\t\tparts.push(dataRange ? dataRange[range] : range);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn parts;\n}\n\nexport function _normalizeConfig(config){\n\tif(typeof(config.xAxis) != \"object\")\n\t\tconfig.xAxis = {fromData: !!config.xAxis};\n\n\tif(typeof(config.legend) != \"object\")\n\t\tconfig.legend = {fromData: !!config.legend};\n\n\tconfig.legend = webix.extend(config.legend, {\n\t\tlayout:\"x\",\n\t\talign:\"center\",\n\t\tvalign:\"bottom\"\n\t});\n\n\tif(!config.scale)\n\t\tconfig.scale = {\n\t\t\tlines:1\n\t\t};\n\n\treturn config;\n}\n\nfunction _getColor(index){\n\tconst colors = [\n\t\t\"#e06666\", \"#6aa84f\", \"#3c78d8\", \"#e69138\", \"#783f04\", \"#134f5c\", \"#674ea7\", \"#c27ba0\"\n\t];\n\treturn colors[index%colors.length];\n}\n\nfunction getRangeCols(r1,c1,r2,c2,sheetName,lastIndex){\n\tconst data = [];\n\tconst rangeToData = {};\n\tfor (let i = r1, rind = 0; i <= r2; i++, rind++){\n\t\tdata[rind] = {};\n\t\tfor (let j = c1, cind = lastIndex; j <= c2; j++, cind++){\n\t\t\tif(i == r2){\n\t\t\t\trangeToData[`${sheetName ? sheetName+\"!\" : \"\"}${encode[j]}${r1}:${encode[j]}${r2}`] = `data${cind}`;\n\t\t\t\tlastIndex++;\n\t\t\t}\n\t\t\tdata[rind][`data${cind}`] = this.getValue(i-1,j-1);\n\t\t}\n\t}\n\treturn [data, rangeToData, lastIndex];\n}\n\nfunction getRangeRows(r1,c1,r2,c2,sheetName,lastIndex){\n\tconst data = [];\n\tconst rangeToData = {};\n\tfor (let i = c1, cind = 0; i <= c2; i++, cind++){\n\t\tdata[cind] = {};\n\t\tfor (let j = r1, rind = lastIndex; j <= r2; j++, rind++){\n\t\t\tif(i == c2){\n\t\t\t\trangeToData[`${sheetName ? sheetName+\"!\" : \"\"}${encode[c1]}${j}:${encode[c2]}${j}`] = `data${rind}`;\n\t\t\t\tlastIndex++;\n\t\t\t}\n\t\t\tdata[cind][`data${rind}`] = this.getValue(j-1,i-1);\n\t\t}\n\t}\n\treturn [data, rangeToData, lastIndex];\n}","import {range, toRange} from \"./helpers/column_names\";\nimport {_getSeries, _isPie, _normalizeConfig, _getDataParts} from \"./operations/views\";\n\nconst labels = webix.i18n.spreadsheet.labels;\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\tconst activeSkin = webix.skin.$active;\n\tconst padding = activeSkin.dataPadding-2;\n\tconst margin = activeSkin.layoutMargin.form;\n\n\treturn {\n\t\twidth:440,\n\t\thidden: true,\n\t\tid:\"chartEditor\",\n\t\tcss:\"ssheet_chart\",\n\t\trows:[\n\t\t\t{\n\t\t\t\theight: activeSkin.barHeight,\n\t\t\t\tcss: \"ssheet_chart_wizard_head\",\n\t\t\t\tpadding:{ left: 2 },\n\t\t\t\tcols: [\n\t\t\t\t\t{ view: \"icon\", hotkey:\"esc\", icon:\"webix_ssheet_icon ssi-arrow-left\", click: () => closeEditor(view)  },\n\t\t\t\t\t{ type:\"header\", borderless:true, template: labels[\"chart-edit\"] }\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"form\",\n\t\t\t\tcomplexData:true,\n\t\t\t\tborderless: true,\n\t\t\t\tpadding:{\n\t\t\t\t\ttop: 0\n\t\t\t\t},\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth:180\n\t\t\t\t},\n\t\t\t\telements:[{\n\t\t\t\t\tview:\"tabview\",\n\t\t\t\t\tid:\"chartTabs\",\n\t\t\t\t\tcells:[\n\t\t\t\t\t\t{ id:\"common\", borderless:true, type:\"form\", paddingX:0, header:labels[\"chart-common\"], rows:[\n\t\t\t\t\t\t\t{view:\"scrollview\", body:{\n\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\taddRichselect(\"type\", \"chart-type\", getTypes()),\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"stacked-chart\"], name:\"stacked\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-pie-3d\"], name:\"3D\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-range\"], name:\"range\"},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-col-xAxis\"], name:\"xAxis.fromData\", batch:\"axis\"},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-pie-text\"], name:\"pieInnerText\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-row-legend\"], name:\"legend.fromData\"},\n\t\t\t\t\t\t\t\t\t{ view:\"radio\", label:labels[\"chart-data-from\"], name:\"dataSeries\", vertical:true, options:[\n\t\t\t\t\t\t\t\t\t\t{id:\"columns\", value:labels[\"chart-columns\"]},\n\t\t\t\t\t\t\t\t\t\t{id:\"rows\", value:labels[\"chart-rows\"]}\n\t\t\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ id:\"advanced\", borderless:true, type:\"form\", paddingX:0, padding:{bottom:0}, header:labels[\"chart-series\"], rows:[\n\t\t\t\t\t\t\t{ view: \"ssheet-series\", name:\"series\" },\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ id:\"extras\", borderless:true, type:\"form\", paddingX:0, header:labels[\"chart-extras\"], rows:[\n\t\t\t\t\t\t\t{view:\"scrollview\", body:{\n\t\t\t\t\t\t\t\tview: \"accordion\",\n\t\t\t\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_accordion\",\n\t\t\t\t\t\t\t\tmulti: true,\n\t\t\t\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-legend\"], body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view: \"text\", label:labels[\"chart-legend-range\"], name:\"legend.range\"},\n\t\t\t\t\t\t\t\t\t\t\taddRichselect(\"legend.align\", \"chart-legend-align\", getLegendAlign()),\n\t\t\t\t\t\t\t\t\t\t\taddRichselect(\"legend.valign\", \"chart-legend-valign\", getLegendValign())\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-scale\"], batch:\"axis\", id:\"scale\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-lines\"], name:\"scale.lines\", batch:\"axis\"},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-radar-circle\"], name:\"scale.circle\", hidden:true},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"chart-scale-color\"], name:\"scale.color\", batch:\"axis\"}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-x-axis\"], batch:\"axis\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-xAxis-range\"], name:\"xAxis.range\", range:true, batch:\"axis\" },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-xAxis-title\"], name:\"xAxis.title\", batch:\"axisTitle\" },\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-y-axis\"], batch:\"axis\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-title\"], name:\"yAxis.title\", batch:\"axisTitle\" },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-origin\"], name:\"origin\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"label\", label:labels[\"chart-yAxis-note\"], css:\"ssheet_note\", height:20},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-start\"], name:\"yAxis.start\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-end\"], name:\"yAxis.end\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-step\"], name:\"yAxis.step\", batch:\"axis\", attributes:{ type:\"number\" } }\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]\n\t\t\t\t}]\n\t\t\t}\n\t\t]\n\t};\n}\n\nfunction ready(view){\n\tconst chartEditor = view.$$(\"chartEditor\");\n\tconst form = chartEditor.queryView(\"form\");\n\tconst elements = form.elements;\n\n\tview.attachEvent(\"onCommand\", action => {\n\t\tif(action.id == \"add-chart\"){\n\t\t\tconst config = action.config;\n\t\t\tlet values = config && config.config || {};\n\n\t\t\tchartEditor.show();\n\n\t\t\tview.$handleSelection = function(st, end, a, b){\n\t\t\t\tconst focus = webix.UIManager.getFocus();\n\n\t\t\t\tif(chartEditor.queryView(view => view == focus)){\n\t\t\t\t\tif(focus == elements.range || focus == elements[\"legend.range\"]){\n\t\t\t\t\t\tlet val = focus.getValue();\n\t\t\t\t\t\tconst last = val.lastIndexOf(\",\");\n\n\t\t\t\t\t\tval = last == -1 ? \"\" : val.substring(0, last + 1);\n\t\t\t\t\t\tfocus.setValue(val + a+\":\"+b);\n\t\t\t\t\t}\n\t\t\t\t\telse if(focus.config.range)\n\t\t\t\t\t\tfocus.setValue(a+\":\"+b);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tform.clear();\n\t\t\tview.$$(\"chartTabs\").setValue(\"common\");\n\n\t\t\tvalues = _normalizeConfig(values);\n\n\t\t\tvalues.range = config ? config.data : view.getSelectedRange();\n\t\t\tchartEditor.viewId = action.viewid ? action.viewid : view.views.add(null, null, \"chart\", values.range, values);\n\n\t\t\tview.callEvent(\"onUIEditStart\", [chartEditor.viewId, \"chart\"]);\n\n\t\t\tupdateValign(values.legend.align);\n\t\t\tupdateAlign(values.legend.valign);\n\t\t\tupdateType(values.type);\n\n\t\t\tform.setValues(inValues(values));\n\n\t\t\tif(values.legend.fromData)\n\t\t\t\tupdateLegendRange(values.legend.fromData);\n\t\t\tif(values.xAxis.fromData)\n\t\t\t\tupdateXaxisRange(values.xAxis.fromData);\n\n\t\t\tupdateSeries();\n\n\t\t\tform.queryView(\"accordionitem\", \"all\").forEach(view => view.expand());\n\n\t\t\telements.range.focus();\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUIEditStart\", (id, type)=>{\n\t\tif(chartEditor.isVisible() && type != \"chart\")\n\t\t\tcloseEditor(view);\n\t});\n\n\tview.attachEvent(\"onCommand\", obj =>{\n\t\tif(obj.id == \"close-ui-editor\" && chartEditor.isVisible())\n\t\t\tcloseEditor(view);\n\t});\n\n\tview.attachEvent(\"onAction\", (id, values) => {\n\t\tif(id == \"add-view\" && !values.newValue){\n\t\t\tif(chartEditor.isVisible() && chartEditor.viewId == values.row)\n\t\t\t\tcloseEditor(view);\n\t\t}\n\t});\n\n\tform.attachEvent(\"onChange\", function(val, oldVal){\n\t\tconst source = this.$eventSource;\n\n\t\t//upper case ranges\n\t\tif(source === elements.range || source === elements[\"xAxis.range\"] || source === elements[\"legend.range\"]){\n\t\t\tconst parts = val.split(\"!\");\n\t\t\tconst upper = parts.length == 2 ? parts[0]+\"!\"+parts[1].toUpperCase() : val.toUpperCase();\n\n\t\t\tif(val != upper){\n\t\t\t\tval = upper;\n\t\t\t\tsetSilentValue(source, upper);\n\t\t\t}\n\t\t}\n\n\t\tswitch (source){\n\t\t\tcase elements.type:\n\t\t\t\tupdateType(val);\n\t\t\t\tbreak;\n\t\t\tcase elements.range:\n\t\t\tcase elements.dataSeries:\n\t\t\t\tif(this.$eventSource == elements.dataSeries)\n\t\t\t\t\tswitchRowsCols();\n\t\t\t\tif(elements[\"legend.fromData\"].getValue())\n\t\t\t\t\thandlePieLegend();\n\t\t\t\tif(elements[\"xAxis.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"xAxis.range\"], getLeftColumn());\n\t\t\t\tupdateSeries();\n\t\t\t\tbreak;\n\t\t\tcase elements[\"xAxis.fromData\"]:\n\t\t\t\tupdateXaxisRange(val);\n\t\t\t\tupdateSeries(oldVal);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.fromData\"]:\n\t\t\t\tupdateLegendRange(val);\n\t\t\t\tupdateSeries();\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.align\"]:\n\t\t\t\tupdateValign(val);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.valign\"]:\n\t\t\t\tupdateAlign(val);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"xAxis.range\"]:\n\t\t\t\tif(elements[\"xAxis.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"xAxis.fromData\"]);\n\t\t\t\tupdateRange(val, oldVal);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.range\"]:\n\t\t\t\tif(elements[\"legend.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"legend.fromData\"]);\n\t\t\t\tupdateRange(val, oldVal);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst config = outValues(form.getValues());\n\t\tview.views.update(chartEditor.viewId, config.range, config);\n\t});\n\n\telements.series.attachEvent(\"onRangeChange\", updateRange);\n\n\tfunction handlePieLegend(){\n\t\tif(elements[\"legend.fromData\"].getValue()){\n\t\t\tconst handler = _isPie(elements.type.getValue()) ? getLeftColumn : getTopRow;\n\t\t\tsetSilentValue(elements[\"legend.range\"], handler());\n\t\t}\n\t}\n\n\tfunction updateLegendRange(val){\n\t\tif(val){\n\t\t\tconst legendRange = elements[\"legend.range\"].getValue();\n\t\t\tupdateRange(\"\", legendRange);\n\t\t}\n\n\t\tconst handler = _isPie(elements.type.getValue()) ? getLeftColumn : getTopRow;\n\t\tval = val ? handler() : \"\";\n\n\t\tsetSilentValue(elements[\"legend.range\"], val);\n\t}\n\n\tfunction updateXaxisRange(val){\n\t\tif(val){\n\t\t\tconst xAxisRange = elements[\"xAxis.range\"].getValue();\n\t\t\tupdateRange(\"\", xAxisRange);\n\t\t}\n\n\t\tval = val ? getLeftColumn() : \"\";\n\n\t\tsetSilentValue(elements[\"xAxis.range\"], val);\n\t}\n\n\tfunction setSilentValue(element, val){\n\t\telement.blockEvent();\n\t\telement.setValue(val);\n\t\telement.unblockEvent();\n\t}\n\n\tfunction getLeftColumn(){\n\t\tconst data = elements.range.getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\t\tconst legendRange = elements[\"legend.range\"].getValue();\n\t\tlet leftColumn = \"\";\n\n\t\tconst series = _getSeries(view, data, dataSeries, {legend: legendRange || \"\"});\n\n\t\tif(series.length)\n\t\t\tleftColumn = series[0].range;\n\n\t\treturn leftColumn;\n\t}\n\n\tfunction getTopRow(){\n\t\tconst data = _getDataParts(elements.range.getValue());\n\t\tconst dir = elements.dataSeries.getValue() == \"rows\";\n\t\tconst xAxisRange = _getDataParts(elements[\"xAxis.range\"].getValue());\n\t\tlet topRow = [];\n\n\t\tdata.forEach(subdata => {\n\t\t\tif(xAxisRange.indexOf(subdata) == -1){\n\t\t\t\tconst part = range(subdata, view);\n\t\t\t\tif(part){\n\t\t\t\t\tconst range = dir ?\n\t\t\t\t\t\ttoRange(part[0], part[1], part[2], part[1], part[4]) :\n\t\t\t\t\t\ttoRange(part[0], part[1], part[0], part[3], part[4]);\n\n\t\t\t\t\tif(data.indexOf(range) == -1)\n\t\t\t\t\t\ttopRow.push(range);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn topRow.join(\",\");\n\t}\n\n\tfunction updateRange(val, oldVal){\n\t\tlet data = elements.range.getValue();\n\n\t\tconst legend = elements[\"legend.range\"].getValue();\n\t\tconst xAxis = elements[\"xAxis.range\"].getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\n\t\tconst series = _getSeries(view, data, dataSeries, {legend, xAxis});\n\n\t\toldVal = _getDataParts(oldVal);\n\n\t\tdata = _getDataParts(data).filter(val => oldVal.indexOf(val) == -1);\n\n\t\tif(val){\n\t\t\tval = _getDataParts(val);\n\t\t\tval.forEach(range => {\n\t\t\t\tconst exist = series.filter(obj => obj.range == range);\n\t\t\t\tif(!exist.length)\n\t\t\t\t\tdata.push(range);\n\t\t\t});\n\t\t}\n\n\t\tsetSilentValue(elements.range, data.join(\",\"));\n\t}\n\n\tfunction updateAlign(val){\n\t\tconst align = elements[\"legend.align\"];\n\t\tconst list = align.getList();\n\n\t\tif(val == \"middle\"){\n\t\t\tif(list.exists(\"center\"))\n\t\t\t\tlist.remove(\"center\");\n\t\t}\n\t\telse if(!list.exists(\"center\"))\n\t\t\tlist.add({id:\"center\", value:labels[\"chart-legend-center\"]}, 1);\n\t}\n\n\tfunction updateValign(val){\n\t\tconst align = elements[\"legend.valign\"];\n\t\tconst list = align.getList();\n\n\t\tif(val == \"center\"){\n\t\t\tif(list.exists(\"middle\"))\n\t\t\t\tlist.remove(\"middle\");\n\t\t}\n\t\telse if(!list.exists(\"middle\"))\n\t\t\tlist.add({id:\"middle\", value:labels[\"chart-legend-middle\"]}, 1);\n\t}\n\n\tfunction updateType(val){\n\t\tconst tabs = view.$$(\"chartTabs\").getTabbar();\n\t\tswitchRowsCols();\n\t\thandlePieLegend();\n\n\t\tconst series = elements.series;\n\t\tconst markersVisible = val == \"radar\" || val == \"line\" || val == \"spline\";\n\t\tseries.hideSubviews(\"marker\", markersVisible);\n\t\tseries.hideSubviews(\"label\", markersVisible || val == \"bar\");\n\n\t\tif(val == \"area\" || val == \"bar\") elements.stacked.show();\n\t\telse hideField(elements.stacked);\n\n\t\tif(val == \"radar\")\n\t\t\telements[\"scale.circle\"].show();\n\t\telse\n\t\t\thideField(elements[\"scale.circle\"]);\n\n\t\tif(val == \"pie\")\n\t\t\telements[\"3D\"].show();\n\t\telse\n\t\t\thideField(elements[\"3D\"]);\n\n\t\tif(_isPie(val)){\n\t\t\thideBatch(\"axis\");\n\t\t\telements.pieInnerText.show();\n\t\t\ttabs.hideOption(\"advanced\");\n\t\t}\n\t\telse{\n\t\t\thideBatch(\"axis\", true);\n\t\t\thideField(elements.pieInnerText);\n\t\t\ttabs.showOption(\"advanced\");\n\t\t}\n\n\t\tif(_isPie(val) || val == \"radar\")\n\t\t\thideBatch(\"axisTitle\");\n\t\telse\n\t\t\thideBatch(\"axisTitle\", true);\n\t}\n\n\tfunction updateSeries(oldXaxis){\n\t\tlet data = elements.range.getValue();\n\n\t\tlet series = elements.series.getValue();\n\t\tconst legend = elements[\"legend.range\"].getValue();\n\t\tconst xAxis = elements[\"xAxis.range\"].getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\n\t\tseries = _getSeries(view, data, dataSeries, {series, legend, xAxis}, oldXaxis);\n\n\t\telements.series.setValue(series);\n\t}\n\n\tfunction switchRowsCols(){\n\t\tconst dir = elements.dataSeries.getValue() == \"rows\";\n\t\tconst pie = _isPie(elements.type.getValue());\n\t\tif((!pie && dir) || (!dir && pie)){\n\t\t\telements[\"legend.fromData\"].define(\"label\", labels[\"chart-col-legend\"]);\n\t\t\telements[\"xAxis.fromData\"].define(\"label\", labels[\"chart-row-xAxis\"]);\n\t\t}\n\t\telse{\n\t\t\telements[\"legend.fromData\"].define(\"label\", labels[\"chart-row-legend\"]);\n\t\t\telements[\"xAxis.fromData\"].define(\"label\", labels[\"chart-col-xAxis\"]);\n\t\t}\n\t\telements[\"legend.fromData\"].refresh();\n\t\telements[\"xAxis.fromData\"].refresh();\n\t}\n\n\tfunction hideField(field){\n\t\tif(field.setValue)\n\t\t\tsetSilentValue(field);\n\t\tfield.hide();\n\t}\n\n\tfunction hideBatch(batch, visible){\n\t\tform.queryView({batch:batch}, \"all\").forEach(field => {\n\t\t\tif(visible)\n\t\t\t\tfield.show();\n\t\t\telse\n\t\t\t\thideField(field);\n\t\t});\n\t}\n\n\tfunction inValues(values){\n\t\tif(/stacked|3D/.test(values.type))\n\t\t\tvalues.type = values.type.replace(/stacked|3D/, \"\").toLowerCase();\n\t\treturn values;\n\t}\n\n\tfunction outValues(values){\n\t\tif(values.stacked)\n\t\t\tvalues.type = \"stacked\"+values.type.charAt(0).toUpperCase()+values.type.substr(1);\n\t\telse if(values[\"3D\"])\n\t\t\tvalues.type += \"3D\";\n\n\t\treturn values;\n\t}\n}\n\nfunction closeEditor(view){\n\tconst chartEditor = view.$$(\"chartEditor\");\n\tview.callEvent(\"onUIEditStop\", [chartEditor.viewId, \"chart\"]);\n\tchartEditor.viewId = null;\n\tview.$handleSelection = null;\n\tchartEditor.hide();\n}\n\nfunction addRichselect(name, label, data){\n\treturn { view: \"richselect\", name:name, label:labels[label], suggest:{\n\t\tview: \"ssheet-form-suggest\",\n\t\tdata: data\n\t}};\n}\n\nfunction getTypes(){\n\treturn [\n\t\t{id:\"line\", value:labels[\"line-chart\"]},\n\t\t{id:\"spline\", value:labels[\"spline-chart\"]},\n\t\t{id:\"splineArea\", value:labels[\"splinearea-chart\"]},\n\t\t{id:\"area\", value:labels[\"area-chart\"]},\n\t\t{id:\"bar\", value:labels[\"bar-chart\"]},\n\t\t{id:\"radar\", value:labels[\"radar-chart\"]},\n\t\t{id:\"pie\", value:labels[\"pie-chart\"]},\n\t\t{id:\"donut\", value:labels[\"donut-chart\"]}\n\t];\n}\n\nfunction getLegendAlign(){\n\treturn [\n\t\t{id:\"left\", value:labels[\"chart-legend-left\"]},\n\t\t{id:\"center\", value:labels[\"chart-legend-center\"]},\n\t\t{id:\"right\", value:labels[\"chart-legend-right\"]}\n\t];\n}\n\nfunction getLegendValign(){\n\treturn [\n\t\t{id:\"top\", value:labels[\"chart-legend-top\"]},\n\t\t{id:\"middle\", value:labels[\"chart-legend-middle\"]},\n\t\t{id:\"bottom\", value:labels[\"chart-legend-bottom\"]}\n\t];\n}","import {ignoreReset, ignoreUndo}  from \"../operations/undo\";\nimport group  from \"../operations/undo_group\";\nimport {adjustSpan}  from \"../operations/spans\";\nimport {updateMaxColumn} from \"../helpers/column_names\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (action, start, end) => {\n\t\tif (action.id == \"add\" || action.id == \"del\"){\n\t\t\tvar area = view._table.getSelectArea();\n\t\t\tif(area && !(start && end)){\n\t\t\t\tstart = area.start;\n\t\t\t\tend = area.end;\n\t\t\t}\n\n\t\t\tif (start && end){\n\t\t\t\tif(action.group == \"column\" && action.id == \"add\")\n\t\t\t\t\tupdateMaxColumn(view.config.columnCount + (end.column - start.column) + 1);\n\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tprocess(action, start, end, view);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"grid-change\"){\n\t\t\tloadChangedData(view, value);\n\t\t}\n\t});\n}\n\nfunction process(action, start, end, view) {\n\tlet select = view._table.getSelectArea();\n\tconst state = view._table.getScrollState();\n\n\tconst oldData = view.serialize({math: true, viewIds:true});\n\tconst newData = webix.copy(oldData);\n\tconst data = {value:oldData, newValue:newData};\n\n\tconst spanData = [];\n\tconst spans = newData.spans;\n\tfor (let i in spans){\n\t\tconst span = adjustSpan(spans[i], action, start, end, view, newData.data, spanData);\n\t\tif (span[2] <= 0 || span[3] <= 0)\n\t\t\tspans.splice(i, 1);\n\t}\n\n\tconst values = getUpdateValues(action, start, end);\n\tignoreUndo(function(){\n\t\tview.callEvent(\"onAction\", [\"before-grid-change\", {\n\t\t\tname: values.name,\n\t\t\tinc: values.inc,\n\t\t\tdata: newData,\n\t\t\tstart: start\n\t\t}]);\n\t},view);\n\n\tif (action.group == \"column\"){\n\t\tif (action.id == \"add\")\n\t\t\t_addColumn(action, start, end, view);\n\t\telse if (action.id == \"del\")\n\t\t\t_delColumn(action, start, end, view);\n\t}\n\telse if (action.group == \"row\") {\n\t\tif (action.id == \"add\")\n\t\t\t_addRow(action, start, end, view);\n\t\telse if (action.id == \"del\")\n\t\t\t_delRow(action, start, end, view);\n\t}\n\n\t// muon updates data and ranges\n\tconst updatedData = view.serialize({math: true});\n\tnewData.data = updatedData.data;\n\tnewData.ranges = updatedData.ranges;\n\n\tspanData.forEach(item => {\n\t\tnewData.data.push(item);\n\t});\n\n\tview.callEvent(\"onAction\", [\"grid-change\", data]);\n\n\tignoreUndo(function() {\n\t\tloadChangedData(view, newData);\n\t\tview._table.scrollTo(state.x, state.y);\n\t},view);\n\n\tif (select){\n\t\tselect = fixSelectArea(select, view.config);\n\t\tif (select)\n\t\t\tview.$$(\"cells\").addSelectArea(select.start, select.end);\n\t}\n}\n\nfunction fixSelectArea(select, config){\n\tconst rows = config.rowCount;\n\tconst cols = config.columnCount;\n\tif (select.start.row*1 > rows) select.start.row = rows;\n\tif (select.end.row*1 > rows) select.end.row = rows;\n\tif (select.start.column*1 > cols) select.start.column = cols;\n\tif (select.end.column*1 > cols) select.end.column = cols;\n\n\treturn select;\n}\n\nfunction loadChangedData(view, data){\n\t// data loading resets undo history, and\n\t// we need to preserve it\n\tignoreReset(function(){\n\t\tview.$handleSelection = null;\n\t\tview.parse(data);\n\t});\n}\n\nfunction getUpdateValues( action, start, end){\n\tvar name = action.group,\n\t\tinc = action.id==\"add\"?1:(action.id==\"del\"?-1:0);\n\n\tif(inc) {\n\t\t// span support\n\t\tif (name == \"row\")\n\t\t\tinc += inc * (end.row - start.row);\n\t\tif (name == \"column\")\n\t\t\tinc += inc * (end.column - start.column);\n\t}\n\treturn {name: name, inc: inc};\n}\n\nfunction _addColumn(action, start, end, view) {\n\tlet count = end.column - start.column + 1;\n\n\tview._mPage.addColumn(start.column-1, count);\n\tview.config.columnCount += count;\n\n\tview.callEvent(\"onColumnOperation\", [action, start, end]); //add item to history\n}\n\nfunction _delColumn(action, start, end, view) {\n\tlet count = end.column - start.column + 1;\n\n\tif (view.config.columnCount === count){\n\t\tif (start.column == end.column)\n\t\t\treturn; //deleting last column, ignoring\n\t\t//prevent deleting all columns\n\t\tend.column--;\n\t\tcount--;\n\t}\n\n\tview._mPage.removeColumn(start.column-1, count);\n\tview.config.columnCount -= count;\n\n\tview.callEvent(\"onColumnOperation\", [action, start, end]);\n}\n\nfunction _addRow(action, start, end, view) {\n\tlet count = end.row - start.row + 1;\n\n\tview._mPage.addRow(start.row-1, count);\n\tview.config.rowCount += count;\n\n\tview.callEvent(\"onRowOperation\", [action, start, end]);\n}\n\nfunction _delRow(action, start, end, view) {\n\tlet count = end.row - start.row + 1;\n\n\tif (view.config.rowCount === count){\n\t\tif (start.row == end.row)\n\t\t\treturn; //deleting last column, ignoring\n\t\t//prevent deleting all columns\n\t\tend.row--;\n\t\tcount--;\n\t}\n\n\tview._mPage.removeRow(start.row-1, count);\n\tview.config.rowCount -= count;\n\n\tview.callEvent(\"onRowOperation\", [action, start, end]);\n}","import group from \"./undo_group\";\nimport {setSpanCss} from \"./spans\";\nimport {rangeOptions} from \"../mathematics/ranges\";\nimport * as fmt from \"../operations/formats\";\nimport {changeRange, eachRange} from \"../helpers/column_names\";\n\nexport function init(view){\n\tconst table = view._table;\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\treset(view);\n\n\ttable.attachEvent(\"onBeforeEditStart\", function(id){\n\t\tlet col = this.getColumnConfig(id.column);\n\t\tif (this._ssEditors[id.row]){\n\t\t\tlet ed = this._ssEditors[id.row][id.column];\n\t\t\tif (ed){\n\t\t\t\twebix.extend(col, ed, true);\n\t\t\t\twebix.extend(col, {row: view.getRow(id.row)}, true);\n\t\t\t\tif (ed.options){\n\t\t\t\t\tif (typeof ed.options == \"string\")\n\t\t\t\t\t\tcol.options = rangeOptions(view, ed.options, { unique:true, order:true, empty:true });\n\t\t\t\t\telse if (webix.isArray(ed.options))\n\t\t\t\t\t\tcol.options = rangeOptions(view, ed.options, { empty:true });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t// update format if editor supports this feature\n\ttable.attachEvent(\"onBeforeEditStop\", function(state, editor, ignore){\n\t\tif (!ignore && editor.getFormat){\n\t\t\tconst value = editor.getValue();\n\t\t\tlet format = editor.getFormat(value);\n\n\t\t\tgroup.set(function(){\n\t\t\t\tview.setCellValue(editor.row, editor.column, value);\n\t\t\t\tif (format){\n\t\t\t\t\tfmt.addFormat(view, editor.row, editor.column, fmt.getFormatSource(format));\n\t\t\t\t} else\n\t\t\t\t\tfmt.removeFormat(view, editor.row, editor.column);\n\t\t\t});\n\n\t\t\tconst cell = view.getSelectedId();\n\t\t\tif (cell && cell.row == editor.row && cell.column == editor.column){\n\t\t\t\tformat = format || \"common\";\n\t\t\t\tformat = fmt.isCustom(format) ? \"custom\" : format;\n\t\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:format}]);\n\t\t\t}\n\t\t}\n\t});\n\n\ttable.attachEvent(\"onAfterEditStop\", function(state, editor){\n\t\tconst col = this.getColumnConfig(editor.column);\n\n\t\tcol.editor = \"text\";\n\t\tdelete col.popup; delete col.$popup; delete col.row;\n\t});\n\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type == \"dropdown\")\n\t\t\tview.setCellEditor(row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif (action == \"dropdown\"){\n\t\t\tsetSpanCss(view, p.row, p.column, \"ss_editor\", p.newValue);\n\t\t}\n\t\telse if (action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._table._ssEditors = {};\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\ttblEditors = view._table._ssEditors,\n\t\teditors = [];\n\n\tfor (row in tblEditors){\n\t\tfor (column in tblEditors[row])\n\t\t\teditors.push([row, column, tblEditors[row][column]]);\n\t}\n\tdata.editors = editors;\n}\n\nexport function load(view,data){\n\tconst editors = data.editors;\n\n\tif (editors)\n\t\tfor (let i=0; i<editors.length; i++)\n\t\t\tview.setCellEditor.apply(view, editors[i]);\n}\n\nexport function clearEditors(view, range){\n\tview._table.editStop();\n\teachRange(range, view, function(view, cell){\n\t\tlet editor = view._table._ssEditors[cell.row];\n\t\tif (editor){\n\t\t\tif (editor[cell.column]){\n\t\t\t\tdelete editor[cell.column];\n\t\t\t\tview._table.removeCellCss(cell.row, cell.column, \"ss_editor\");\n\t\t\t\tsetSpanCss(view, cell.row, cell.column, \"ss_editor\", false);\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function isEditor(view, row, column){\n\tconst editor = view._table._ssEditors;\n\treturn editor[row] && !!editor[row][column];\n}\n\n// called on column/row add, delete, hide,show\nfunction updatePosition(view, name, inc, data, start){\n\tconst editors = data.editors;\n\n\tif (inc){\n\t\t// create new editors\n\t\tfor(let i=editors.length-1; i>=0; i--){\n\t\t\tlet [row,column,editor] = editors[i];\n\t\t\tif (name == \"row\" && row >= start.row || name == \"column\" && column >= start.column){\n\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc){\t//delete editor mark if row was deleted\n\t\t\t\t\t\teditors.splice(i,1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\teditors[i][0] = row*1 + inc;\n\t\t\t\t}\n\t\t\t\telse if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\teditors.splice(i, 1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else \n\t\t\t\t\t\teditors[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t\teditor.options = changeRange(editor.options, name, inc, start);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function pasteDropdown(view, extra, row, col, cutted){\n\tconst editor = extra.dropdown;\n\n\tview.setCellEditor(row, col, editor);\n\tif (cutted === 1)\n\t\tview.setCellEditor(extra.row, extra.col, {});\n}","import group from \"./undo_group\";\nimport {pasteCondition} from \"../operations/conditional_formats\";\nimport {pasteDropdown} from \"../operations/dropdown\";\nimport {pasteFilter} from \"../operations/filter\";\nimport {pasteSpan} from \"../operations/spans\";\n\nvar styledata, clipdata, origin, cutted, updateFilters;\n\nexport function init(view){\n\tconst clipboard = view.config.clipboard;\n\tif(clipboard === false)\n\t\treturn;\n\n\twebix.clipbuffer.init();\n\n\tconst keyC = 67; //keyboard 'c' code\n\tconst keyX = 88; //keyboard 'x' code\n\tvar grid = view.$$(\"cells\");\n\n\tgrid.attachEvent(\"onAfterAreaAdd\", () => _sel_to_clip(view));\n\n\tgrid.attachEvent(\"onKeyPress\", (code, e) => {\n\t\tif((code === keyC || code === keyX) && (e.ctrlKey || e.metaKey) && grid.getSelectedId()){\n\t\t\tstyledata = _get_sel_style(view, grid);\n\t\t\tclipdata = document.querySelector(\".webix_clipbuffer\").value;\n\t\t\torigin = grid.getSelectArea();\n\t\t\tcutted = (code === keyX)*1;\n\t\t\tif(cutted && Object.keys(view._table._ssFilters).length !== 0)\n\t\t\t\tupdateFilters = allFiltersInZone(view._table._ssFilters, origin, view.config.columnCount);\n\t\t}\n\t});\n\n\tif (!view.config.readonly) {\n\t\tgrid.attachEvent(\"onPaste\", (text) => {\n\t\t\t_clip_to_sel(view, grid, text);\n\t\t});\n\t}\n}\n\nfunction _sel_to_clip(view){\n\tconst grid = view.$$(\"cells\");\n\tif(grid.getSelectedId())\n\t\twebix.delay(()=>{\n\t\t\tconst data = [];\n\t\t\tgrid.mapSelection(function(value, row, col, row_ind) {\n\t\t\t\tvalue = view._mPage.getValue(row-1, col-1);\n\t\t\t\tconst delimiter = view.config.clipboardDecimalDelimiter;\n\t\t\t\tif(!webix.isUndefined(delimiter))\n\t\t\t\t\tvalue = _updateDelimiter(value, delimiter);\n\t\t\t\tif (!data[row_ind]) data[row_ind] = [];\n\t\t\t\tdata[row_ind].push(value);\n\t\t\t});\n\t\t\tconst clipdata = webix.csv.stringify(data, grid.config.delimiter);\n\n\t\t\tdocument.querySelector(\".webix_clipbuffer\").focus();\n\n\t\t\twebix.clipbuffer.set(clipdata);\n\t\t\twebix.UIManager.setFocus(grid);\n\t\t});\n}\n\nfunction _updateDelimiter(value, clipboardDecimalDelimiter) {\n\tif(webix.rules.isNumber(value))\n\t\tvalue = value.toString().replace(\".\", clipboardDecimalDelimiter);\n\treturn value;\n}\n\nfunction _clip_to_sel(view, grid, text){\n\tvar leftTop = grid.getSelectArea();\n\tif (!leftTop) return;\n\tvar start = leftTop.start;\n\tvar fromSheet = text === clipdata;\n\n\tvar data = fromSheet ? styledata : webix.csv.parse(text, grid.config.delimiter);\n\tif(!fromSheet && view.config.clipboardDecimalDelimiter)\n\t\tdata = _changeDelimiter(data, view.config.clipboardDecimalDelimiter);\n\n\tvar translate = { id:\"move\", column:0, row: 0, cut:cutted };\n\tif (fromSheet){\n\t\ttranslate.column = start.column - origin.start.column;\n\t\ttranslate.row = start.row - origin.start.row;\n\t} else {\n\t\tcutted = 0;\n\t}\n\n\tgroup.set(function(){\n\t\tif (updateFilters)\n\t\t\tview.removeFilters();\n\n\t\t_add_row_col(view, start, data);\n\n\t\tif (cutted === 1) {\n\t\t\tfor (let row = origin.start.row; row <= origin.end.row; row++) {\n\t\t\t\tfor (let column = origin.start.column; column <= origin.end.column; column++) {\n\t\t\t\t\tview.setCellValue(row, column, null);\n\t\t\t\t\tview.setStyle(row, column, null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (data.length == 1 && data[0].length == 1 && !updateFilters) {\n\t\t\tview.eachSelectedCell(function(cell) {\n\t\t\t\tvar subtrans = {\n\t\t\t\t\tid: \"move\",\n\t\t\t\t\tcolumn: translate.column + cell.column * 1 - start.column,\n\t\t\t\t\trow: translate.row + cell.row * 1 - start.row,\n\t\t\t\t\tcut:cutted\n\t\t\t\t};\n\t\t\t\t_clipboardToTable(view, cell.row, cell.column, data[0][0], fromSheet, subtrans);\n\t\t\t});\n\t\t} else {\n\t\t\tgrid.mapCells(\n\t\t\t\tstart.row,\n\t\t\t\tstart.column,\n\t\t\t\tdata.length,\n\t\t\t\tnull,\n\t\t\t\tfunction(value, row, col, row_ind, col_ind) {\n\t\t\t\t\tif (data[row_ind] && data[row_ind].length > col_ind) {\n\t\t\t\t\t\tvar cdata = data[row_ind][col_ind];\n\t\t\t\t\t\t_clipboardToTable(view, row, col, cdata, fromSheet, translate);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\n\t\tif (cutted === 1){\n\t\t\t//cut and cleared\n\t\t\tcutted = 2;\n\t\t\tupdateFilters = false;\n\t\t}\n\t});\n\t\n\tview.refresh();\n}\n\nfunction _clipboardToTable(view, row, col, cdata, fromSheet, translate){\n\tlet newValue = cdata;\n\n\tif (typeof cdata === \"object\"){\n\t\tif (cdata.math){\n\t\t\tif(translate.cut)\n\t\t\t\tnewValue = cdata.math;\n\t\t\telse\n\t\t\t\tnewValue = view._mData.getStore().transposeMath(cdata.math, translate.row, translate.column);\n\t\t}\n\t\telse\n\t\t\tnewValue = cdata.text;\n\n\t\tif(cdata.style && cdata.style.props){\n\t\t\tconst style = view.addStyle(cdata.style.props);\n\t\t\tview.setStyle(row, col, style);\n\t\t}\n\n\t\tconst extra = cdata.extra;\n\t\tif(extra){\n\t\t\tif(extra.condition)\n\t\t\t\tpasteCondition(view, extra, row, col, cutted);\n\t\t\tif(extra.dropdown)\n\t\t\t\tpasteDropdown(view, extra, row, col, cutted, translate);\n\t\t\tif(extra.filter && updateFilters)\n\t\t\t\tpasteFilter(view, extra, row, col, cutted, translate);\n\t\t}\n\t\tpasteSpan(view, extra, row, col, cutted, translate);\n\t}\n\n\tview.setCellValue(row, col, newValue);\n}\n\nfunction _get_sel_style(view, grid){\n\tvar data = [];\n\tvar row, last;\n\n\tgrid.mapSelection(function(value, id, col) {\n\t\tif (id != last){\n\t\t\trow = []; data.push(row);\n\t\t\tlast = id;\n\t\t}\n\n\t\tvar math =  view._mPage.getValue(id-1, col-1, true);\n\t\tmath = math && math[0] == \"=\" ? math : null;\n\t\tvalue = view._mPage.getValue(id-1, col-1);\n\t\tvar obj = { text:value, math, style:view.getStyle(id, col) };\n\n\t\tvar condition = view.conditions.get(id,col);\n\t\tvar editor = view.getCellEditor(id, col);\n\t\tvar filter = view.getCellFilter(id, col);\n\t\tvar span = view._table.getSpan(id, col);\n\n\t\tif (editor || filter || condition || span){\n\t\t\tvar extra = { row:id, col:col };\n\t\t\tif (condition) extra.condition = condition;\n\t\t\tif (editor) extra.dropdown = editor;\n\t\t\tif (filter) extra.filter = filter;\n\t\t\tif (span) extra.span = span;\n\t\t\tobj.extra = extra;\n\t\t}\n\n\t\trow.push(obj);\n\t\treturn value;\n\t});\n\n\treturn data;\n}\n\nfunction allFiltersInZone(extra, origin, columnCount){\n\tvar filters = Object.keys(extra);\n\tvar startRow = Math.min.apply(null, filters);\n\tvar endRow = Math.max.apply(null, filters);\n\tvar startCol = columnCount;\n\tvar endCol = 1;\n\n\tfor (var i = startRow; i <= endRow; i++){\n\t\tif(extra[i]){\n\t\t\tvar columns = Object.keys(extra[i]);\n\t\t\tstartCol = Math.min(startCol, Math.min.apply(null, columns));\n\t\t\tendCol = Math.max(endCol, Math.max.apply(null, columns));\n\t\t}\n\t}\n\n\tif(origin.start.row <= startRow && origin.end.row >= endRow && origin.start.column <= startCol && origin.end.column >= endCol)\n\t\treturn true;\n\telse\n\t\treturn false;\n}\n//dynamically increase rows and columns according to pasted data size\nfunction _add_row_col(view, start, data){\n\tvar maxRow = start.row + data.length - 1;\n\tvar maxCol = start.column + data[0].length - 1;\n\n\tif(maxRow > view.config.rowCount || maxCol > view.config.columnCount){\n\t\tvar action = { id:\"add\" };\n\t\tif (maxRow > view.config.rowCount) {\n\t\t\taction.group = \"row\";\n\t\t\tview.callEvent(\"onCommand\", [\n\t\t\t\taction, \n\t\t\t\t{ row: view.config.rowCount + 1 }, \n\t\t\t\t{ row: maxRow }\n\t\t\t]);\n\t\t}\n\t\tif (maxCol > view.config.columnCount) {\n\t\t\taction.group = \"column\";\n\t\t\tview.callEvent(\"onCommand\", [\n\t\t\t\taction, \n\t\t\t\t{ column: view.config.columnCount + 1 },\n\t\t\t\t{ column: maxCol }\n\t\t\t]);\n\t\t}\n\t}\n}\n\nfunction _changeDelimiter(data, clipboardDecimalDelimiter){\n\tfor(var i = 0; i < data.length; i++)\n\t\tfor(var k = 0; k < data[i].length; k++){\n\t\t\tvar record = data[i][k].toString().replace(clipboardDecimalDelimiter, \".\");\n\t\t\tif(webix.rules.isNumber(record))\n\t\t\t\tdata[i][k] = record;\n\t\t}\n\treturn data;\n}","export function init(view) {\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tif (action.id == \"show\" || action.id == \"hide\"){\n\t\t\tconst sel = view._table.getSelectArea();\n\t\t\tif (sel)\n\t\t\t\tprocess(action, webix.copy(sel.start), webix.copy(sel.end), view);\n\t\t}\n\t});\n\treset(view);\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value, direction) => {\n\t\tif ((action.id == \"hide\" || action.id == \"show\") && (action.group == \"column\" || action.group == \"row\")){\n\t\t\tlet type = action.id;\n\t\t\tif (!direction)\n\t\t\t\ttype = type == \"hide\" ? \"show\" : \"hide\";\n\t\t\tconst obj = (row || column);\n\t\t\tprocess({ id: type, group: action.group }, obj.start, obj.end, view, true);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onHardReset\", () => reset(view));\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\t_updatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nexport function reset(view, mode) {\n\tif(mode) view[\"_hidden_\"+mode+\"_hash\"] = {};\n\telse{\n\t\tview._hidden_cols_hash = {};\n\t\tview._hidden_rows_hash = {};\n\t\tview.filterSpreadSheet();\n\t}\n}\n\nfunction getIds(id){\n\treturn webix.isArray(id) ? id : [id, id];\n}\n\nexport function isColumnVisible(view, column){\n\treturn !view._hidden_cols_hash[column];\n}\n\nexport function setState(view, indexes, state, type){\n\t// hide\n\tif(!indexes){\n\t\tconst sel = view.getSelectedId(true);\n\t\tconst action = {\n\t\t\tid: state === false ? \"show\" : \"hide\",\n\t\t\tgroup: type\n\t\t};\n\n\t\tif(sel.length)\n\t\t\tview.callEvent(\"onCommand\", [action, sel[0], sel[sel.length-1]]);\n\t}\n\telse {\n\t\tconst ids = getIds(indexes);\n\t\tconst hidden = type == \"row\" ? view._hidden_rows_hash : view._hidden_cols_hash;\n\n\t\tif (!hidden[ids[0]] && (webix.isUndefined(state) || state)){\n\t\t\t(type == \"row\" ? _hideRow : _hideColumn)({id: \"hide\", group: type}, {[type]: ids[0]}, {[type]: ids[1]}, view);\n\t\t}\n\t\t// show\n\t\telse if (hidden[ids[0]] && (webix.isUndefined(state) || !state)) {\n\t\t\tconst inc = ids[0] > 1 ? 1 : -1;\n\t\t\t(type == \"row\" ? _showRow : _showColumn)({id: \"hide\", group: type}, {[type]: ids[0] + inc}, {[type]: ids[1] + inc}, view);\n\t\t}\n\t}\n}\n\nexport function isRowVisible(view, row){\n\treturn !view._hidden_rows_hash[row];\n}\n\nexport function serialize(view, data){\n\tlet hrows  = []; let hcols = [];\n\tfor(let r in view._hidden_rows_hash) hrows.push(r);\n\tfor(let c in view._hidden_cols_hash) hcols.push(c);\n\n\tif(hrows.length || hcols.length)\t\n\t\tdata.table.hidden = {};\n\tif(hrows.length)\n\t\tdata.table.hidden.row = hrows;\n\tif(hcols.length)\n\t\tdata.table.hidden.column = hcols;\n}\n\nexport function load(view, data){\n\treset(view);\n\t\n\tif(!webix.isUndefined(data.table) && !webix.isUndefined(data.table.hidden)){\n\t\tconst hidden = data.table.hidden;\n\n\t\tif(hidden.row && hidden.row.length){\n\t\t\tfor(let r = 0; r < hidden.row.length; r++)\n\t\t\t\t_hideRow({id:\"hide\", group:\"row\"}, {row:hidden.row[r]}, {row:hidden.row[r]}, view, true);\n\t\t}\n\n\t\tif(hidden.column && hidden.column.length){\n\t\t\tfor(let c = 0; c < hidden.column.length; c++)\n\t\t\t\t_hideColumn({id:\"hide\", group:\"column\"}, {column:hidden.column[c]}, {column:hidden.column[c]}, view, true);\n\t\t}\n\t}\n}\n\nfunction process(action) {\n\tif (action.group == \"column\"){\n\t\tif (action.id == \"show\")\n\t\t\t_showColumn.apply(this, arguments);\n\t\telse if (action.id == \"hide\")\n\t\t\t_hideColumn.apply(this, arguments);\n\t} else if (action.group == \"row\") {\n\t\tif (action.id == \"show\")\n\t\t\t_showRow.apply(this, arguments);\n\t\telse if (action.id == \"hide\")\n\t\t\t_hideRow.apply(this, arguments);\n\t}\n}\n\nfunction _showColumn(action, start, end, view, silent) {\n\tlet i = end.column;\n\tconst grid = view.$$(\"cells\");\n\n\twhile (i >= start.column) {\n\t\tlet id = i;\n\t\tif (!silent)\n\t\t\tid = view._hidden_cols_hash[i*1-1] || view._hidden_cols_hash[i*1+1] || false;\n\n\t\tif (id !== false) {\n\t\t\tdelete view._hidden_cols_hash[id];\n\t\t\tlet cell = grid.getColumnConfig(id - 1 || \"rowId\").header[0];\n\t\t\tcell.css = cell.css.replace(\"webix_ssheet_hide_column\", \"\");\n\t\t\tgrid.showColumn(id);\n\t\t\tstart.column = start.column < id ? start.column : id;\n\t\t\tend.column = end.column > id ? end.column : id;\n\n\t\t\tif (!silent)\n\t\t\t\tview.callEvent(\"onColumnOperation\", [action, { column: id }, { column:id }, null]);\n\t\t}\n\t\ti--;\n\t}\n\n\tconst split = view._frozenColumns;\n\tif(split && split >= start.column && split <= end.column){\n\t\tview.freezeColumns(0); // remove freeze (split is equal with current frozen col)\n\t\tview.freezeColumns(split); // if col was freezed on hidden column - move it\n\t}\n}\n\nfunction _showRow(action, start, end, view, silent) {\n\tlet i = end.row;\n\tconst grid = view.$$(\"cells\");\n\n\tconst split = view._frozenRows;\n\tif(split){\n\t\t//Frozen rows ignore filtering applied to the datatable\n\t\tview.freezeRows(0);\n\t}\n\n\twhile (i >= start.row) {\n\t\tlet id = i;\n\t\tif (!silent)\n\t\t\tid = view._hidden_rows_hash[i*1-1] || view._hidden_rows_hash[i*1+1] || false;\n\n\t\tif (id !== false) {\n\t\t\tdelete view._hidden_rows_hash[id];\n\t\t\tif (id - 1 === 0) {\n\t\t\t\tlet cell = grid.getColumnConfig(\"rowId\").header[0];\n\t\t\t\tcell.css = cell.css.replace(\"webix_ssheet_hide_row\", \"\");\n\t\t\t\tgrid.refreshColumns();\n\t\t\t} else {\n\t\t\t\tgrid.removeCellCss(id - 1, \"rowId\", \"webix_ssheet_hide_row\");\n\t\t\t}\n\t\t\tif (!silent)\n\t\t\t\tview.callEvent(\"onRowOperation\", [action, { row: id }, { row: id }, null]);\n\t\t}\n\t\ti--;\n\t}\n\n\tview.filterSpreadSheet();\n\n\tif(split)\n\t\tview.freezeRows(split);\n}\n\nfunction _hideColumn(action, start, end, view, silent) {\n\tconst grid = view.$$(\"cells\");\n\tlet i = end.column;\n\tview.$handleSelection = null;\n\tgrid.unselect();\n\n\tif (end.column<1 || start.column<1){\n\t\tdelete view._hidden_cols_hash[start.column];\n\t\treturn;\n\t}\n\twhile (i >= start.column) {\n\t\tif(grid.getColumnIndex(i) != -1){\n\t\t\tview._hidden_cols_hash[i] = i;\n\n\t\t\tlet cell = grid.getColumnConfig(i - 1 || \"rowId\").header[0];\n\t\t\tcell.css = (cell.css || \"\") + \" webix_ssheet_hide_column\";\n\n\t\t\tgrid.hideColumn(i);\n\t\t}\n\t\ti--;\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onColumnOperation\", [action, start, end, null]);\n}\n\nfunction _hideRow(action, start, end, view, silent) {\n\tif (end.row<1 || start.row<1){\n\t\tdelete view._hidden_rows_hash[start.row];\n\t\treturn;\n\t}\n\n\tconst split = view._frozenRows;\n\tif(split){\n\t\t//Frozen rows ignore filtering applied to the datatable\n\t\tview.freezeRows(0);\n\t}\n\n\tconst grid = view.$$(\"cells\");\n\tlet i = end.row;\n\n\twhile (i >= start.row) {\n\t\tview._hidden_rows_hash[i] = i;\n\n\t\tif (i - 1 === 0) {\n\t\t\tlet cell = grid.getColumnConfig(\"rowId\").header[0];\n\t\t\tcell.css = (cell.css || \"\") + \" webix_ssheet_hide_row\";\n\t\t\tgrid.refreshColumns();\n\t\t}\n\t\telse\n\t\t\tgrid.addCellCss(i - 1, \"rowId\", \"webix_ssheet_hide_row\");\n\n\t\ti--;\n\t}\n\n\tview.filterSpreadSheet();\n\n\tif(split)\n\t\tview.freezeRows(split);\n\n\tif (!silent)\n\t\tview.callEvent(\"onRowOperation\", [action, start, end, null]);\n}\n\nfunction _updatePosition(view, name, inc, data, start){\n\tif(data.table && data.table.hidden && data.table.hidden[name] && data.table.hidden[name].length){\n\t\tif(name ===\"column\") reset(view, \"cols\");\n\t\tif(name === \"row\") reset(view, \"rows\");\n\n\t\tlet s = start[name], e = s + inc;\n\t\tif(s > e) [s, e] = [e, s];\n\n\t\tfor(let i = s; i < e; i++){\n\t\t\tfor(let h = 0; h < data.table.hidden[name].length; h++){\n\t\t\t\tif(data.table.hidden[name][h] >= i)\n\t\t\t\t\tdata.table.hidden[name][h] = data.table.hidden[name][h]*1+(inc>0 ? 1: -1);\n\t\t\t}\n\t\t}\n\t}\n}","import {getStyle, getTextSize} from \"./styles\";\nimport {save} from \"./save\";\n\nexport function init(view){\n\n\tif (view.config.resizeCell){\n\t\tvar grid = view.$$(\"cells\");\n\t\tgrid.define(\"resizeRow\", { headerOnly: true, size: 10 });\n\t\tgrid.define(\"resizeColumn\", { headerOnly: true, size: 10 });\n\t\tgrid.define(\"fixedRowHeight\", false);\n\n\t\tgrid.attachEvent(\"onRowResize\", (id) => {\n\t\t\tview.$$(\"cells\").refreshSelectArea();\n\t\t\tsave(view, \"sizes\", { row: id, column: 0, size: view.$$(\"cells\").getItem(id).$height });\n\t\t});\n\t\tgrid.attachEvent(\"onColumnResize\", (id) => {\n\t\t\tview.$$(\"cells\").refreshSelectArea();\n\t\t\tsave(view, \"sizes\", { row: 0, column: id, size: view.getColumn(id).width });\n\t\t});\n\n\t\t// undo\n\t\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\t\tif(type == \"c-resize\" || type == \"r-resize\")\n\t\t\t\t_undoResize(view, row, column, value);\n\t\t});\n\t}\n\n\tview.attachEvent(\"onDataParse\", (data) => {\n\t\tload(view,data);\n\t});\n\n\t\n\tview.attachEvent(\"onDataSerialize\", (data) => {\n\t\tserialize(view,data);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\tview.attachEvent(\"onBeforeStyleChange\", function(row, column, n, o){\n\t\tif (o && o.props.wrap === \"wrap\" && (!n || n.props.wrap != o.props.wrap)){\n\t\t\tdelete view._table.getItem(row).$height;\n\t\t}\n\t});\n\tview.attachEvent(\"onStyleChange\", _adjustRowHeight);\n\tview.attachEvent(\"onCellChange\",  _adjustRowHeight);\n}\n\nfunction serialize(view,data){\n\tvar sizes = [];\n\tvar grid = view.$$(\"cells\");\n\tvar columns = grid.getState().order;\n\tvar order = grid.data.order;\n\n\tvar defWidth = grid.config.columnWidth;\n\tvar defHeight = grid.config.rowHeight;\n\n\tfor (let i = 1; i < columns.length; i++){\n\t\tvar width = grid.getColumnConfig(columns[i]).width;\n\t\tif (width && width != defWidth)\n\t\t\tsizes.push([0, i, width]);\n\t}\n\n\tfor (let i = 0; i < order.length; i++){\n\t\tvar height = grid.getItem(order[i]).$height;\n\t\tif (height && height != defHeight)\n\t\t\tsizes.push([order[i]*1, 0, height]);\n\t}\n\t\n\tdata.sizes = sizes;\n}\n\nfunction load(view,data){\n\tif (data.sizes){\n\t\tfor (let i=0; i<data.sizes.length; i++){\n\t\t\tconst size = data.sizes[i];\n\t\t\tif (size[0]*1 !== 0){\n\t\t\t\tconst row = view.$$(\"cells\").getItem(size[0]);\n\t\t\t\tif(row) row.$height = size[2]*1;\n\t\t\t} else {\n\t\t\t\tconst col = view.getColumn(size[1]);\n\t\t\t\tif(col) col.width = size[2]*1;\n\t\t\t}\n\t\t}\n\t\tif (data.sizes.length)\n\t\t\tview.refresh(true);\n\t}\n}\n\nfunction _undoResize(view, row, column, value){\n\tif(row){\n\t\tview.$$(\"cells\").getItem(row).$height = value;\n\t\tsave(view, \"sizes\", { row:row, column: 0, size: value });\n\t}\n\telse{\n\t\tview._table.setColumnWidth(column, value);\n\t}\n\t// update area selection\n\tview._table.refreshSelectArea();\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet i,\n\t\tsizes = data.sizes,\n\t\tnsizes = [];\n\n\tif(inc){\n\t\tfor(i = sizes.length - 1; i >= 0; i--){\n\t\t\tlet [row, column, size] = sizes[i];\n\n\t\t\tif(row && name == \"row\" && row >= start.row){\n\t\t\t\tif(inc < 0 && row < start.row - inc)\n\t\t\t\t\tcontinue;\n\t\t\t\tnsizes.push([row*1 + inc, column, size]);\n\t\t\t}\n\t\t\telse if(column && name == \"column\" && column >= start.column){\n\t\t\t\tif(inc < 0 && column < start.column - inc)\n\t\t\t\t\tcontinue;\n\t\t\t\tnsizes.push([row, column*1 + inc, size]);\n\t\t\t}\n\t\t\telse\n\t\t\t\tnsizes.push(sizes[i]);\n\t\t}\n\n\t\tif(inc > 0){\n\t\t\t//col/row add: set sizes according to the selected area\n\t\t\tif(name == \"column\"){\n\t\t\t\tfor(let i = 0; i < inc; i++){\n\t\t\t\t\tconst size = sizes.find(arr => arr[1] == start.column + i);\n\t\t\t\t\tif(size)\n\t\t\t\t\t\tnsizes.push([0, start.column + i, size[2]]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tfor(let i = 0; i < inc; i++){\n\t\t\t\t\tconst size = sizes.find(arr => arr[0] == start.row + i);\n\t\t\t\t\tif(size)\n\t\t\t\t\t\tnsizes.push([start.row + i, 0, size[2]]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdata.sizes = nsizes;\n\t}\n}\n\nfunction _adjustRowHeight(row, column){\n\tconst view = this;\n\tlet style = getStyle(view, {row:row, column:column});\n\n\t//changing styles or content of wrapped cell -> resize the related row\n\tif (style && style.props.wrap){\n\t\tlet item = view._table.getItem(row);\n\t\tlet height = item.$height || view._table.config.rowHeight;\n\n\t\tview._table.eachColumn(function(col, config){\n\t\t\tlet style = getStyle(view, {row:row, column:col});\n\t\t\t//include only cells with active wrap into calculation \n\t\t\tif(style && style.props && style.props.wrap === \"wrap\"){\n\t\t\t\tlet text = this.getText(row, col);\n\t\t\t\tlet baseWidth = config.width;\n\n\t\t\t\tconst span = view._table.getSpan(row, col);\n\t\t\t\tif(span)\n\t\t\t\t\tbaseWidth = view._table.getSpanNode({row:span[0], column:span[1]}).offsetWidth;\n\n\t\t\t\tif(view.getCellEditor(row, col) || view.getCellFilter(row, col))\n\t\t\t\t\tbaseWidth += 20;\n\n\t\t\t\theight = Math.max(height, getTextSize(view, text, style.id, baseWidth).height);\n\t\t\t}\n\t\t});\n\n\t\titem.$height  = height;\n\t}\n}\n","import {encode} from \"../helpers/column_names\";\n\nexport function init(view){\n\tvar table = view._table;\n\n\tvar bs = 0;\n\ttable.attachEvent(\"onAreaDrag\", () => bs = new Date());\n\ttable.attachEvent(\"onBeforeAreaRemove\", function(){\n\t\t//[FIXME] currently we don't have enough info to know\n\t\t//is user selects new area, and removing need to be blocked\n\t\t//or is it some API which attempts to remove the area\n\t\tif (view.$handleSelection && (new Date() - bs)<500) return false;\n\t});\n\n\ttable.attachEvent(\"onBeforeAreaAdd\", (area) => {\n\t\t//[FIXME] \n\t\t//block selection of row-id column\n\t\t//temporary fix, we need to fire onBeforeBlockSelect when selection moves\n\t\t//so the common onBeforeBlockSelect handler will block rowId selection\n\t\tif (area.start.column == \"rowId\") return false;\n\n\t\t//if we have an active editor, we need to close it on block selection\n\t\t//ignore, when selecting the editor's cell\n\t\tvar editor = table.getEditor();\n\t\tif (editor && (\n\t\t\teditor.row != area.start.row || editor.column != area.start.column ||\n\t\t\teditor.row != area.start.row || editor.column != area.start.column ))\n\t\t\ttable.editStop();\n\n\t\tif (!view.$handleSelection) return true;\n\t\t\n\n\t\tlet blockStart = encode[area.start.column] + area.start.row;\n\t\tlet blockEnd = encode[area.end.column] + area.end.row;\n\n\t\tvar res = view.$handleSelection(area.start, area.end, blockStart, blockEnd);\n\n\t\tif (res !== false){\n\t\t\tview.$handleSelection = null;\n\t\t\ttable.removeSelectArea();\n\t\t}\n\n\t\treturn res;\n\t});\n\n\twebix.event(table.$view, \"mousedown\", function(e){\n\t\tif (view.$handleSelection)\n\t\t\treturn webix.html.preventEvent(e);\n\t});\n}\n","export function expandSelection(r, view){\n\tlet maxY = view.config.rowCount;\n\tlet maxX = view.config.columnCount;\n\tlet table = view._table;\n\n\tlet nr1 = r.start.row, nr2 = r.end.row, nc1 = r.start.column, nc2 = r.end.column;\n\n\tfor (let i=nr1-1; i>0; i--){\n\t\tif (getValue(i, r.start.column, table))\n\t\t\tnr1 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nr2+1; i<maxY; i++){\n\t\tif (getValue(i, r.end.column, table))\n\t\t\tnr2 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nc1-1; i>0; i--){\n\t\tif (getValue(r.start.row, i, table))\n\t\t\tnc1 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nc2+1; i<maxX; i++){\n\t\tif (getValue(r.end.row, i, table))\n\t\t\tnc2 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tlet newrange = { start:{ row:nr1, column:nc1 } , end:{ row: nr2, column: nc2 }};\n\tif (nr1 != r.start.row || nr2 != r.end.row || nc1 != r.start.column || nc2 != r.end.column){\n\t\tview._table.addSelectArea(newrange.start, newrange.end);\n\t}\n\n\treturn newrange;\n}\n\nfunction getValue(r,c, table){\n\tvar value = table.getItem(r)[c];\n\tif(value === undefined || value === \"\"){\n\t\treturn false;\n\t} else {\n\t\treturn true;\n\t}\n}","import {expandSelection} from \"../helpers/expand_selection\";\nimport {rangeObj} from \"../helpers/column_names\";\nimport group from \"./undo_group\";\nimport {_changeCondition} from \"./conditional_formats\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"sort-asc\" || cm.id === \"sort-desc\")\n\t\t\tsortRange(view, null, cm.id.replace(\"sort-\",\"\"));\n\t});\n}\n\nconst sorters = {\n\t\"int\":function(dir, key){\n\t\treturn (a,b) => {\n\t\t\tif (!b[key]) return -1;\n\t\t\tif (!a[key]) return 1;\n\n\t\t\tlet c = parseFloat(a[key]) || dir*Infinity;\n\t\t\tlet d = parseFloat(b[key]) || dir*Infinity;\n\t\t\treturn (c > d ? 1 : (c == d ? 0 : -1))*dir;\n\t\t};\n\t},\n\t\"str\":function(dir, key){\n\t\treturn (a,b) => {\n\t\t\tif (!b[key]) return -1;\n\t\t\tif (!a[key]) return 1;\n\n\t\t\tlet c = a[key].toString().toLowerCase();\n\t\t\tlet d = b[key].toString().toLowerCase();\n\t\t\treturn (c > d ? 1 : (c == d ? 0 : -1))*dir;  \n\t\t};\n\t}\n};\n\nexport function sortRange(view, range, dir){\n\trange = range || view._table.getSelectArea();\n\n\tif (range){\n\t\trange = rangeObj(range, view);\n\t\tlet fullrange = range;\n\t\tif (range.start.row === range.end.row)\n\t\t\tfullrange = expandSelection(range, view);\n\n\t\tconst key = view.getCellValue(range.start.row, range.start.column, false);\n\t\tconst type = isNaN(parseFloat(key)) ? \"str\" : \"int\";\n\n\t\tdir = (!dir || dir === \"asc\") ? 1 : -1;\n\t\tgroup.set(()=>\n\t\t\tsort(fullrange, range.start.column, type, dir, view)\n\t\t);\n\t}\n}\n\nfunction sort(range, by, type, dir, view){\n\tfor (let column = range.start.column; column <= range.end.column; column++){\n\t\t//get all selected column values\n\t\tconst values = [];\n\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\t\tif(view.isRowVisible(row)){\n\t\t\t\tconst value = view.getCellValue(row, column, false);\n\t\t\t\tconst style = view.getStyle(row, column);\n\n\t\t\t\tlet math = view.getCellValue(row, column);\n\t\t\t\tmath = math && math[0] == \"=\" ? math : null;\n\n\t\t\t\tconst conditions = view.conditions.get(row,column);\n\t\t\t\tif(conditions)\n\t\t\t\t\t_changeCondition(\"remove\", row, column, conditions, null, view);\n\n\t\t\t\tvalues.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tstyle,\n\t\t\t\t\tmath,\n\t\t\t\t\trow,\n\t\t\t\t\tconditions\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//sort them\n\t\tvalues.sort(sorters[type](dir, \"value\"));\n\n\t\t//set new values to original column\n\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\t\tif(view.isRowVisible(row)){\n\t\t\t\tconst element = values.shift();\n\n\t\t\t\tview.setStyle(row, column, (element.style || null));\n\t\t\t\tif(element.conditions)\n\t\t\t\t\t_changeCondition(\"update\", row, column, null, element.conditions, view);\n\n\t\t\t\tif (!element.math) view.setCellValue(row, column, element.value);\n\t\t\t\telse {\n\t\t\t\t\tconst newMath = view._mData.getStore().transposeMath(element.math, row - element.row, 0);\n\t\t\t\t\tview.setCellValue(row, column, newMath);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tview.refresh();\n}","import {split} from \"./parser\";\n\nfunction updateSheetNames(view, formula, oldName, newName){\n\tif(formula.indexOf(\"!\") == -1)\n\t\treturn formula;\n\n\tconst stack = split(formula, view, true);\n\tfor(let i = 0; i < stack.length; i++){\n\t\tif(webix.isArray(stack[i])){\n\t\t\tconst thisSheet = stack[i][0] === oldName;\n\t\t\tlet sheet = thisSheet ? newName : stack[i][0];\n\t\t\tif(sheet.indexOf(\" \") != -1)\n\t\t\t\tsheet = `'${sheet}'`;\n\t\t\tstack[i] = `${sheet}!${stack[i][1]}`;\n\t\t}\n\t}\n\treturn stack.join(\"\");\n}\n\nfunction isFormula(val){\n\treturn typeof val == \"string\" && val[0] == \"=\";\n}\n\nexport function init(view){\n\tview.attachEvent(\"onSheetRename\", (name, newName) => {\n\t\tview._sheets.forEach(sheet => {\n\t\t\tconst activeSheet = sheet.name == view.getActiveSheet();\n\t\t\tif(activeSheet)\n\t\t\t\tsheet.content = view.serialize(); //actual data\n\n\t\t\tif(sheet.content.editors){\n\t\t\t\tsheet.content.editors.forEach(value => {\n\t\t\t\t\tconst options = value[2].options;\n\t\t\t\t\tif(options){\n\t\t\t\t\t\tif(typeof options == \"string\")\n\t\t\t\t\t\t\tvalue[2].options = updateSheetNames(view, options, name, newName);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tfor (let i = 0; i < options.length; i++){\n\t\t\t\t\t\t\t\tconst option = options[i];\n\t\t\t\t\t\t\t\tif(typeof option == \"string\"){\n\t\t\t\t\t\t\t\t\tif(isFormula(option))\n\t\t\t\t\t\t\t\t\t\toptions[i] = updateSheetNames(view, option, name, newName);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(isFormula(option.id))\n\t\t\t\t\t\t\t\t\toption.id = updateSheetNames(view, option.id, name, newName);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(sheet.content.conditions){\n\t\t\t\tsheet.content.conditions.forEach(value => {\n\t\t\t\t\tif(isFormula(value[3]))\n\t\t\t\t\t\tvalue[3] = updateSheetNames(view, value[3], name, newName);\n\t\t\t\t});\n\t\t\t\tif(activeSheet){\n\t\t\t\t\tview.conditions.clear();\n\t\t\t\t\tview.conditions.parse( sheet.content.conditions );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}","export function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"gridlines-hide\"){\n\t\t\thideGridlines(view, value);\n\t\t}\n\t});\n}\n\nexport function hideGridlines(view, state = true){\n\tvar grid = view.$$(\"cells\");\n\tvar borderless = grid.$view.className.indexOf(\"webix_borderless\") !=-1;\n\tif (state === \"toggle\")\n\t\tstate = !borderless;\n\n\tif(!borderless && state){\n\t\twebix.html.addCss( grid.$view, \"webix_borderless\", true);\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-gridlines\", value:true}]);\n\t\tview.callEvent(\"onAction\", [\"gridlines-hide\", {newValue:true, value: false}]);\n\t}\n\telse if(borderless && !state){\n\t\twebix.html.removeCss( grid.$view, \"webix_borderless\");\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-gridlines\", value:false}]);\n\t\tview.callEvent(\"onAction\", [\"gridlines-hide\", {newValue:false, value: true}]);\n\t}\n}\n\nexport function serialize(view, data){\n\tdata.table.gridlines = view.$$(\"cells\").$view.className.indexOf(\"webix_borderless\") !=-1?0:1;\n}\n\nexport function load(view, data){\n\tvar mode = false;\n\tif(!webix.isUndefined(data.table) && !webix.isUndefined(data.table.gridlines))\n\t\tmode = !data.table.gridlines;\n\thideGridlines(view, mode);\n}","export function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"header-hide\"){\n\t\t\thideHeaders(view, value);\n\t\t}\n\t});\n}\n\nexport function hideHeaders(view, state = true){\n\tvar grid = view.$$(\"cells\");\n\tif (state === \"toggle\")\n\t\tstate = grid.config.header;\n\n\tif(grid.config.header && state){\n\t\tgrid.config.header = false;\n\t\tif (grid.isColumnVisible(\"rowId\"))\n\t\t\tgrid.hideColumn(\"rowId\", {}, true, true);\n\t\tgrid.refreshColumns();\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-headers\", value:true}]);\n\t\tview.callEvent(\"onAction\", [\"header-hide\", {newValue:true, value:false}]);\n\t}\n\telse if(!grid.config.header && !state){\n\t\tgrid.config.header = true;\n\t\tif (!grid.isColumnVisible(\"rowId\"))\n\t\t\tgrid.showColumn(\"rowId\", {}, true);\n\t\tgrid.refreshColumns();\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-headers\", value:false}]);\n\t\tview.callEvent(\"onAction\", [\"header-hide\", {newValue:false, value:true}]);\n\t}\n}\n\nexport function serialize(view, data){\n\tdata.table.headers = view.$$(\"cells\").config.header?1:0;\n}\n\nexport function load(view, data){\n\tvar mode = false;\n\tif(data.table && !webix.isUndefined(data.table.headers))\n\t\tmode = !data.table.headers;\n\thideHeaders(view, mode);\n}","import group from \"./undo_group\";\nimport {eachRange} from \"../helpers/column_names\";\n\nexport function init(view){\n\tview.comments = {\n\t\tget: function(row, column){\n\t\t\treturn getComment(view, row, column);\n\t\t},\n\t\tadd: function(row, column, comment){\n\t\t\tcommentCell(view, row, column, comment);\n\t\t},\n\t\tremove: function(row, column){\n\t\t\tremoveComment(view, row, column);\n\t\t},\n\t\t_activeComment: {},\n\t\t_pull:{}\n\t};\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type === \"comment\")\n\t\t\t_undoComment(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name,p.inc,p.data, p.start);\n\t});\n}\n\nfunction _undoComment(view, row, column, value){\n\tif(getComment(view, row, column))\n\t\tremoveComment(view, row, column, true);\n\tif(value)\n\t\tcommentCell(view, row, column, value, true);\n}\n\nfunction reset(view){\n\tview.comments._pull = {};\n}\n\nfunction removeComment(view, row, column, silent){\n\tif(getComment(view, row, column)){\n\t\tif (!silent)\n\t\t\tview.callEvent(\"onAction\", [\"comment\", {row, column, newValue: null, value: view.comments._pull[row][column]}]);\n\t\tdelete view.comments._pull[row][column];\n\t}\n\tview.$$(\"cells\").updateItem(row,column);\n}\n\nexport function removeCommentsRange(view, range){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tif(getComment(view, cell.row, cell.column))\n\t\t\t\tremoveComment(view, cell.row, cell.column);\n\t\t});\n\t\tview.$$(\"cells\").refresh();\n\t});\n}\n\nfunction commentCell(view, row, column, comment, silent){\n\tvar oldValue = getComment(view, row, column) ? view.comments._pull[row][column] : null;\n\tvar table = view.$$(\"cells\");\n\n\tif(typeof comment == \"string\")\n\t\tcomment = comment.trim() ? comment : \"\";\n\tview.comments._pull[row] = view.comments._pull[row] ? view.comments._pull[row] : {};\n\tview.comments._pull[row][column] = comment;\n\n\ttable.addCellCss(row, column, \"ssheet_commented_cell\");\n\n\tif (!silent)\n\t\tview.callEvent(\"onAction\", [\"comment\", {row, column, newValue:comment, value:oldValue}]);\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\tcomments = [];\n\tfor(row in view.comments._pull){\n\t\tfor(column in view.comments._pull[row])\n\t\t\tif(view.comments._pull[row][column])\n\t\t\t\tcomments.push([row, column, view.comments._pull[row][column]]);\n\t}\n\tdata.comments = comments;\n}\n\nexport function load(view,data){\n\tvar i,\n\t\tcomments = data.comments;\n\n\tif(comments)\n\t\tfor(i = 0; i < comments.length; i++)\n\t\t\tcommentCell(view, comments[i][0], comments[i][1], comments[i][2], true);\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet comments = data.comments,\n\t\ti = comments.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = comments[i];\n\t\t\tif(row && name == \"row\" && row>= start.row || column && name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete comment if row was deleted\n\t\t\t\t\t\tcomments.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tcomments[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tcomments.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tcomments[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction getComment(view, row, column){\n\treturn view.comments._pull[row] && view.comments._pull[row][column] ? view.comments._pull[row][column] : \"\";\n}","import * as m1  from \"./hide_gridlines\";\nimport * as m2  from \"./hide_headers\";\nimport * as m3  from \"./lock_cell\";\nimport * as m4  from \"./dropdown\";\nimport * as m5  from \"./filter\";\nimport * as m6  from \"./hide_row_col\";\nimport * as m7  from \"./comments\";\n\nexport function init(view){\n\tvar modules = [m1,m2,m3,m4,m5,m6,m7];\n\tview.attachEvent(\"onDataSerialize\", function(data){\n\t\tfor (var i = 0; i < modules.length; i++){\n\t\t\tif(modules[i].serialize)\n\t\t\t\tmodules[i].serialize(view,data);\n\t\t}\n\n\t});\n\tview.attachEvent(\"onDataParse\", function(data){\n\t\tfor (var i = 0; i < modules.length; i++){\n\t\t\tif(modules[i].load)\n\t\t\t\tmodules[i].load(view,data);\n\t\t}\n\t});\n}","const types = [\".xls\",\".xlt\",\".xla\",\".xlsx\",\".xlsm\",\".xltx\",\".xltm\",\".xlam\",\".xlsb\"];\n\nexport function init(view){\n\tlet uploader;\n\tif (window.XMLHttpRequest && (new XMLHttpRequest()).upload){\n\t\tuploader = webix.ui({\n\t\t\tview:\"uploader\",\n\t\t\tapiOnly:true,\n\t\t\taccept: types.join()\n\t\t});\n\n\t\tuploader.attachEvent(\"onBeforeFileAdd\",webix.bind(function(upload){\n\t\t\tif(types.indexOf(\".\"+upload.type.toLowerCase())>-1){\n\t\t\t\tview.reset();\n\t\t\t\tview.parse(upload.file, \"excel\");\n\t\t\t}\n\t\t\treturn false;\n\t\t},this));\n\n\t\tview._destroy_with_me.push(uploader);\n\t}\n\n\tview.attachEvent(\"onCommand\", (obj) => {\n\t\tif (obj.id === \"excel-import\")\n\t\t\tstartImport(view, uploader);\n\t});\n}\n\nfunction startImport(view, uploader){\n\tif (!uploader)\n\t\tview.alert(webix.i18n.spreadsheet.labels[\"import-not-support\"]);\n\telse\n\t\twebix.delay(() => uploader.fileDialog());\n}","export function print(view, options){\n\tlet active = view._activeSheet;\n\n\tlet html = _buildHtml(view, options, active);\n\twebix.html.insertBefore(html, options.docFooter, document.body);\n\twindow.print();\n\t_cleanHtml(view, html);\n\n\tview.showSheet(active);\n}\n\nexport function init(view){\n\tview.$customPrint = function(options){\n\t\tprint(view, options);\n\t};\n}\n\nfunction _cleanHtml(view, html){\n\twebix.html.remove(html);\n\n\tview._sheets.forEach((sheet, i) => {\n\t\twebix.html.removeStyle(\".wss_\"+view.$index+\"_\"+i);\n\t});\n}\nfunction _buildHtml(view, options, active){\n\tlet doc = webix.html.create(\"div\", { \"class\":\"webix_ssheet_print\"});\n\n\toptions.xCorrection = 1;\n\toptions.header = options.header || false;\n\toptions.trim = webix.isUndefined(options.trim) ? true : options.trim;\n\toptions.sheetnames = webix.isUndefined(options.sheetnames) ? true : options.sheetnames;\n\tconst baseIndex = view.$index;\n\n\tview._sheets.forEach((sheet, i) => {\n\t\tview.$index = baseIndex+\"_\"+i;\n\t\tif(options.data ===\"all\" || (options.data !== \"all\" && sheet.name === active)){\n\t\t\tview.showSheet(sheet.name);\n\t\t\tlet prefix = \"wss_\"+view.$index;\n\n\t\t\tif(options.sheetnames){\n\t\t\t\tlet sheetname = webix.html.create(\"div\", { \"class\":\"webix_view webix_ssheet_sheetname\"}, sheet.name+\":\");\n\t\t\t\tdoc.appendChild(sheetname);\n\t\t\t}\n\n\t\t\tview._print = true;\n\t\t\tlet table = view._table.$customPrint(options, true);\n\t\t\tdelete view._print;\n\n\t\t\t//for empty sheet we don't have any HTML\n\t\t\tif (table.firstChild)\n\t\t\t\ttable.firstChild.className += \" \"+prefix;\n\t\t\tdoc.appendChild(table);\n\n\t\t\tif(options.data == \"all\" && i+1 < view._sheets.length){\n\t\t\t\tvar br = webix.html.create(\"DIV\", {\"class\":\"webix_print_pagebreak\"});\n\t\t\t\tdoc.appendChild(br);\n\t\t\t}\n\t\t}\n\t});\n\tview.$index = baseIndex;\n\n\treturn doc;\n}","import { style_names } from \"../operations/styles\";\nimport { getType } from \"../operations/types\";\nimport { defaultStyles} from \"../toolbar/defaults\";\nimport { getFormatSource } from \"../operations/formats\";\nimport { getDimension } from \"../helpers/array\";\nimport { getConditionCss } from \"../operations/conditional_formats\";\nimport { getRenderedValue } from \"../table\";\n\nexport function init(view){\n\tconst table = view._table;\n\tview.$exportView = function(options){\n\t\tconst pdf = options.export_mode == \"pdf\";\n\t\tconst excel = options.export_mode == \"excel\";\n\t\tconst defaultOptions = {\n\t\t\tstubCells: true,\n\t\t\theader: false,\n\t\t\tfooter:false,\n\t\t\theights:true,\n\t\t\trawValues: !pdf,\n\t\t\tfilterHTML:true,\n\t\t\tspans: true,\n\t\t\tstyles:true,\n\t\t\tmath: !pdf,\n\t\t\thidden: excel,\n\t\t\txCorrection: table.config.header || options.hidden ? 1 : 0,\n\t\t\tignore:{rowId:true},\n\t\t\tconditions:true\n\t\t};\n\n\t\twebix.extend(options, defaultOptions);\n\n\t\tif(excel || pdf)\n\t\t\treturn _exportView(view, options);\n\t\telse\n\t\t\treturn table;\n\t};\n\n\ttable.$getExportValue = function(row, column, options){\n\t\tconst value = view.getCellValue(row, column, options.math);\n\t\tconst mode = options.export_mode;\n\t\tconst math = options.math && value[0] == \"=\";\n\t\tif((mode == \"pdf\" || mode == \"csv\") && !math && !options.rawValues)\n\t\t\treturn getRenderedValue(view, row, column);\n\t\treturn typeof value == \"string\" && value.match(/^=(image|sparkline)\\(/i) ? \"\" : value;\n\t};\n}\n\nfunction _exportView(view, options){\n\tconst excel = options.export_mode == \"excel\";\n\n\tif(options.sheets === true) \n\t\toptions.sheets = view._sheets.map(function(s){ return s.name;});\n\telse if(!options.sheets || !options.sheets.length)\n\t\toptions.sheets = [view._activeSheet];\n\telse if(typeof options.sheets == \"string\")\n\t\toptions.sheets = [options.sheets];\n\n\toptions.dataOnly = true;\n\n\tlet data = [];\n\tlet active = view._activeSheet;\n\n\tfor(let i = 0; i<options.sheets.length; i++){\n\t\tconst sheet = options.sheets[i];\n\t\tconst id = sheet.id || sheet;\n\n\t\tview.showSheet(id);\n\n\t\tif(options.hidden)\n\t\t\toptions.xCorrection = 1;\n\n\t\tconst sheetOptions = sheet.options ? webix.extend(sheet.options, options) : webix.copy(options);\n\t\tif(id != active)\n\t\t\tsheetOptions._hidden = true;\n\t\tif(!sheetOptions.name)\n\t\t\tsheetOptions.name = id;\n\n\t\tconst pdfTable = !excel && sheetOptions.display != \"image\";\n\n\t\tconst serialized = view.serialize();\n\t\tconst [rows, cols] = getDimension(serialized.data, serialized.spans, 0, 0);\n\n\t\tif(!excel){\n\t\t\tif(webix.isUndefined(sheetOptions.textBefore))\n\t\t\t\tsheetOptions.textBefore = sheetOptions.name;\n\t\t\tif(pdfTable){\n\t\t\t\tsheetOptions.ignore = sheetOptions.ignore || {};\n\t\t\t\tfor(let i = cols+1; i <= view.config.columnCount; i++){\n\t\t\t\t\tsheetOptions.ignore[i] = true;\n\t\t\t\t}\n\n\t\t\t\tconst filter = sheetOptions.filter || (()=>true);\n\t\t\t\tsheetOptions.filter = obj =>{\n\t\t\t\t\treturn obj.id <= rows && filter.apply(this, arguments);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tconst sheetData = webix[excel ? \"toExcel\" : \"toPDF\"](view._table, sheetOptions);\n\t\tif(pdfTable && sheetData[0].scheme.length == 0)\n\t\t\tcontinue;\n\n\t\tif((excel || pdfTable) && sheetOptions.styles){\n\t\t\tconst styles = sheetData[0].styles = _getStyles(view, sheetOptions, excel, rows, cols);\n\n\t\t\tif(pdfTable)\n\t\t\t\t_updatePdfData(styles, sheetData, sheetOptions, view, serialized);\n\t\t}\n\n\t\tdata = data.concat(sheetData);\n\n\t\tif(excel){\n\t\t\tdata[i].ranges = [];\n\n\t\t\tview.ranges.serialize(id).forEach(range => {\n\t\t\t\tconst ref = range[1].split(\"!\");\n\t\t\t\tdata[i].ranges.push({\n\t\t\t\t\tSheet: range[2] ? null : i,\n\t\t\t\t\tName: range[0],\n\t\t\t\t\tRef: ref[0]+\"!\"+ref[1].replace(/[0-9]+|[A-Z]+/gi, (match)=>`$${match}`)\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\tif(options.autowidth)\n\t\t\t\tgetAutowidth(sheetOptions, options);\n\t\t}\n\t}\n\n\tview.showSheet(active);\n\tdelete options.dataOnly;\n\treturn data;\n}\n\nfunction _updatePdfData(styles, sheetData, sheetOptions, view, serialized){\n\tconst header = sheetOptions.header ? 1 : 0;\n\n\tif (sheetOptions.spans) {\n\t\tfor (let idx in serialized.spans) {\n\t\t\tif (serialized.spans[idx][2] > 1) {\n\t\t\t\tlet row = serialized.spans[idx][0] - 1 + header, // zero-based row position\n\t\t\t\t\tcol = serialized.spans[idx][1] - 1, // zero-based col position\n\t\t\t\t\tcols = serialized.spans[idx][2];\n\t\t\t\tif (styles[row] && styles[row][col]) {\n\t\t\t\t\tstyles[row][col].colspan = cols;\n\t\t\t\t\t// if colspan, then remove merged cells (else PDFJS will shift columns)\n\t\t\t\t\tconst rowData = sheetData[0].exportData[row - header];\n\t\t\t\t\tif (rowData){\n\t\t\t\t\t\t// remove merged cell values\n\t\t\t\t\t\trowData.splice(col + 1, cols - 1);\n\t\t\t\t\t}\n\t\t\t\t\tlet style = Object.values(styles[row]);\n\t\t\t\t\tstyle.splice(col + 1, cols - 1); // remove merged cell styles\n\t\t\t\t\tstyles[row] = style;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst data = sheetData[0].exportData;\n\tfor(let r = 0; r < data.length; r++){\n\t\tfor (let c = 0; c < data[r].length; c++) {\n\t\t\tlet height = view.$$(\"cells\").config.rowHeight;\n\n\t\t\tif(sheetOptions.heights && serialized.sizes.length){\n\t\t\t\tfor(let s = 0; s < serialized.sizes.length; s++){\n\t\t\t\t\tconst rowSize = serialized.sizes[s][0];\n\t\t\t\t\tif(rowSize && rowSize == r+1){\n\t\t\t\t\t\theight = serialized.sizes[s][2];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst cellStyle = styles[r + header][c];\n\t\t\tconst align = cellStyle.vertAlign;\n\t\t\tconst pad = height*0.75 - cellStyle.fontSize; // available px for padding in top & bottom\n\t\t\tcellStyle.paddingTop = (align == \"top\" ? 0 : (align == \"bottom\" ? pad : pad / 2));\n\t\t\tcellStyle.paddingBottom = (align == \"bottom\" ? 0 : (align == \"top\" ? pad : pad / 2));\n\t\t}\n\t}\n}\n\nfunction getAutowidth(view, options){\n\tconst prop = options.orientation && options.orientation == \"landscape\" ? \"height\" : \"width\";\n\tlet width;\n\n\tif(view.$width)\n\t\twidth = view.$width;\n\telse //'view' can be local settings and we need to compare them with common ones\n\t\twidth = view[prop];\n\n\toptions[prop] = Math.max(options[prop] || 0, width || 0);\n}\n\nfunction _safeColor(str){\n\tstr = str.substring(1);\n\tif(str.length === 3) str = str+str;\n\treturn str;\n}\n\nfunction _getDefaults(options){\n\tlet d = defaultStyles;\n\tif(options.export_mode == \"excel\")\n\t\treturn {\n\t\t\tfont:{\n\t\t\t\tsz:d[\"font-size\"].replace(\"px\", \"\")*0.75,\n\t\t\t\tname:d[\"font-family\"].replace(/'|,.*$/g, \"\"),\n\t\t\t\t//we do not export default color, but it is the right place to do it\n\t\t\t},\n\t\t\talignment:{\n\t\t\t\thorizontal:d[\"text-align\"],\n\t\t\t\tvertical:d[\"vertical-align\"]==\"middle\"?\"center\":d[\"vertical-align\"],\n\t\t\t\twrapText:d[\"white-space\"]!=\"nowrap\"\n\t\t\t}\n\t\t};\n\telse\n\t\treturn {\n\t\t\tfontSize: d[\"font-size\"].replace(\"px\", \"\")*0.75,\n\t\t\t//we do not export default color, but it is the right place to do it\n\t\t\ttextAlign: d[\"text-align\"],\n\t\t\twhiteSpace: (d[\"white-space\"]!=\"nowrap\")\n\t\t};\n}\n\nfunction _getStyles(view, options, excel, rows, cols){\n\tview.compactStyles();\n\n\tlet result = [];\n\tconst cached = {};\n\tconst cachedConditions = {};\n\tconst defaults = _getDefaults(options);\n\n\tif(excel && options.docHeader) result  = result.concat([{0:_getDocStyle(options.docHeader.css, defaults)}, {}]);\n\tif(options.header) result.push({});\n\n\tconst delta = result.length;\n\n\tconst grid = view.$$(\"cells\");\n\n\tlet rIndex = delta;\n\tgrid.eachRow(row =>{\n\t\tif(row > rows)\n\t\t\treturn;\n\n\t\tlet cIndex = 0;\n\t\tgrid.eachColumn(col => {\n\t\t\tif(cIndex > cols)\n\t\t\t\treturn;\n\n\t\t\tif(cIndex >= options.xCorrection){\n\t\t\t\tconst css = view.getStyle(row, col);\n\t\t\t\tconst index = cIndex - options.xCorrection;\n\n\t\t\t\tresult[rIndex] = result[rIndex] || {};\n\n\t\t\t\tlet styles;\n\t\t\t\tif(css){\n\t\t\t\t\tif(cached[css.id])\n\t\t\t\t\t\tstyles = webix.copy(cached[css.id]);\n\t\t\t\t\telse{\n\t\t\t\t\t\tstyles = _getCellStyle(css.text, excel);\n\n\t\t\t\t\t\tfor(let name in defaults){\n\t\t\t\t\t\t\tif(excel)\n\t\t\t\t\t\t\t\twebix.extend(styles[name], defaults[name]);\n\t\t\t\t\t\t\telse if (!styles[name])\n\t\t\t\t\t\t\t\tstyles[name] = defaults[name];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcached[css.id] = webix.copy(styles);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tstyles = webix.copy(defaults);\n\n\t\t\t\tif(options.conditions){\n\t\t\t\t\t//not real excel condition, save only bg and color (sheetJS doesn't support)\n\t\t\t\t\tconst condition = _getCellConditions(view, row, col, cachedConditions);\n\t\t\t\t\tif(condition)\n\t\t\t\t\t\t_updateStyleCondition(styles, condition, excel);\n\t\t\t\t}\n\n\t\t\t\tresult[rIndex][index] = styles;\n\t\t\t\tresult[rIndex][index].type = getType(view, row, col);\n\t\t\t}\n\t\t\tcIndex++;\n\t\t}, options.hidden);\n\t\trIndex++;\n\t}, options.hidden);\n\n\tif(excel && options.docFooter) result  = result.concat([{},{0:_getDocStyle(options.docFooter.css, defaults)}]);\n\n\treturn result;\n}\n\nfunction _getCellStyle(styles, excel){\n\tlet str = styles.split(\";\");\n\tlet stl = {};\n\tif(excel)\n\t\tstl = { font:{}, alignment:{}, border:{}};\n\n\tfor(let s = 0; s<str.length; s++){\n\t\tif(str[s]){\n\t\t\tif(excel)\n\t\t\t\t_getExcelCellStyle(stl, str, s);\n\t\t\telse\n\t\t\t\t_getPdfCellStyle(stl, str, s);\n\t\t}\n\t}\n\n\treturn stl;\n}\n\nfunction _getCellConditions(view, r, c, cached){\n\tconst rendered = getRenderedValue(view, r, c);\n\tconst css = getConditionCss(view, r, c, rendered);\n\tif(css){\n\t\tif(cached[css])\n\t\t\treturn cached[css];\n\t\tconst el = webix.html.create(\"div\", {\"class\":css});\n\t\tdocument.body.appendChild(el);\n\n\t\tconst computed = window.getComputedStyle(el);\n\t\tconst bg = computed.backgroundColor;\n\t\tconst color = computed.color;\n\n\t\tdocument.body.removeChild(el);\n\n\t\tcached[css] = [bg, color];\n\t\treturn cached[css];\n\t}\n}\n\nfunction _updateStyleCondition(stl, condition, excel){\n\tlet [bg, color] = condition.map(val => webix.color.rgbToHex(val));\n\tif(excel){\n\t\tstl.fill = {fgColor:{rgb:bg}};\n\t\tstl.font.color = {rgb:color};\n\t}\n\telse{\n\t\tstl.backgroundColor = bg;\n\t\tstl.color = color;\n\t}\n}\n\nfunction _getExcelCellStyle(stl, str, s){\n\tswitch (style_names[s]){\n\t\tcase \"color\":\n\t\t\tstl.font.color = {rgb:_safeColor(str[s])};\n\t\t\tbreak;\n\t\tcase \"background\":{\n\t\t\tconst fill = _safeColor(str[s]);\n\t\t\tif(fill && fill.toLowerCase() !== \"ffffff\")\n\t\t\t\tstl.fill = { fgColor:{ rgb:fill}};\n\t\t\tbreak;\n\t\t}\t\n\t\tcase \"text-align\":\n\t\t\tstl.alignment.horizontal = str[s];\n\t\t\tbreak;\n\t\tcase \"font-family\":\n\t\t\tstl.font.name = str[s].replace(/'|,.*$/g, \"\"); // cut off fallback font\n\t\t\tbreak;\n\t\tcase \"font-size\":\n\t\t\tstl.font.sz = str[s].replace(\"px\", \"\")*0.75; //px to pt conversion\n\t\t\tbreak;\n\t\tcase \"font-style\":\n\t\t\tstl.font.italic = str[s] == \"italic\";\n\t\t\tbreak;\n\t\tcase \"text-decoration\":\n\t\t\tstl.font.underline = str[s] == \"underline\";\n\t\t\tbreak;\n\t\tcase \"font-weight\":\n\t\t\tstl.font.bold = str[s] == \"bold\";\n\t\t\tbreak;\n\t\tcase \"vertical-align\":\n\t\t\tstl.alignment.vertical = str[s] == \"middle\"?\"center\":str[s];\n\t\t\tbreak;\n\t\tcase \"wrap\":\n\t\t\tstl.alignment.wrapText = str[s] == \"wrap\";\n\t\t\tbreak;\n\t\tcase \"borders\":\n\t\t\tbreak;\n\t\tcase \"format\":\n\t\t\tstl.format = getFormatSource(str[s], true) || \"\";\n\t\t\tbreak;\n\t\tcase \"border-right\":\n\t\tcase \"border-bottom\":\n\t\tcase \"border-left\":\n\t\tcase \"border-top\":\n\t\t\tstl.border[ style_names[s].split(\"-\")[1] ] = getBorderStyles(str[s], true);\n\t\t\tbreak;\n\t}\n}\n\nfunction _getPdfCellStyle(stl, str, s){\n\tswitch (style_names[s]) {\n\t\tcase \"color\":\n\t\t\tstl.color = _safeColor(str[s]);\n\t\t\tbreak;\n\t\tcase \"background\":\n\t\t\tstl.backgroundColor = _safeColor(str[s]);\n\t\t\tbreak;\n\t\tcase \"text-align\":\n\t\t\tstl.textAlign = str[s];\n\t\t\tbreak;\n\t\tcase \"font-family\":\n\t\t\tbreak;\n\t\tcase \"font-size\":\n\t\t\tstl.fontSize = str[s].replace(\"px\", \"\")*0.75;\n\t\t\tbreak;\n\t\tcase \"font-style\":\n\t\t\tstl.italic = str[s] == \"italic\";\n\t\t\tbreak;\n\t\tcase \"text-decoration\":\n\t\t\tstl.underline = str[s] == \"underline\";\n\t\t\tbreak;\n\t\tcase \"font-weight\":\n\t\t\tstl.bold = str[s] == \"bold\";\n\t\t\tbreak;\n\t\tcase \"vertical-align\":\n\t\t\tstl.vertAlign = str[s]; // not supported in PDFJS, so simulate with lineHeight and paddingTop\n\t\t\tbreak;\n\t\tcase \"wrap\":\n\t\t\tstl.whiteSpace = (str[s] != \"nowrap\");\n\t\t\tbreak;\n\t\tcase \"borders\":\n\t\t\tbreak;\n\t\tcase \"format\":\n\t\t\tbreak;\n\t\tcase \"border-right\":\n\t\tcase \"border-bottom\":\n\t\tcase \"border-left\":\n\t\tcase \"border-top\":{\n\t\t\tconst pos = style_names[s].split(\"-\")[1];\n\t\t\tstl[`border${pos[0].toUpperCase() + pos.substring(1)}Color`] = getBorderStyles(str[s]);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nfunction getBorderStyles(val, excel){\n\tconst [color, type] = val.split(\",\");\n\n\tif(excel)\n\t\treturn { color:{ rgb:_safeColor(color)}, style:type};\n\telse\n\t\treturn _safeColor(color);\n}\n\nfunction _getDocStyle(css){\n\tif(!css) return {};\n\tvar str = [];\n\tfor(let i =0; i<style_names.length; i++)\n\t\tstr.push(css[style_names[i]]||\"\");\n\treturn _getCellStyle(str.join(\";\"), true);\n}","import { style_names } from \"../operations/styles\";\nimport { fontFamily} from \"../toolbar/buttons\";\nimport { defaultStyles} from \"../toolbar/defaults\";\n\nexport function init(view){\n\tview._parseExcel = function(obj, driver){\n\t\tvar options = obj.options || {};\n\t\toptions.math = view.config.math;\n\n\t\tvar full = { sheets:[]};\n\t\tfor(let i  = 0; i< obj.names.length; i++){\n\t\t\toptions.name = obj.names[i];\n\t\t\tfull.sheets.push({\n\t\t\t\tname:options.name,\n\t\t\t\tcontent:_excel_to_data(driver.getSheet(obj, options), obj.ranges, i)\n\t\t\t});\n\t\t}\n\t\treturn full;\n\t};\n\tview._parseCsv = function(obj, driver){\n\t\tobj = driver.getRecords(obj);\n\n\t\tvar dataObj = webix.copy(obj);\n\t\tvar data = [];\n\n\t\tfor(let i = 0; i<dataObj.length; i++){\n\t\t\tlet item = dataObj[i].split(driver.cell);\n\t\t\tfor(let c  = 0; c<item.length; c++){\n\t\t\t\tvar row = i+1, column = c+1;\n\t\t\t\tdata.push([row, column, item[c]]);\n\t\t\t}\n\t\t}\n\t\treturn { data:data };\n\t};\n}\n\n\nfunction _excel_to_data(obj, ranges, index){\n\tvar dataObj = webix.copy(obj.data);\n\tvar data =  [];\n\n\tfor (let i = 0; i < dataObj.length; i++){\n\t\tfor(let c = 0; c<dataObj[0].length; c++){\n\t\t\tvar row = i+1, column = c+1;\n\t\t\tdata.push([row, column, dataObj[i][c]]);\n\t\t}\n\t}\n\tobj.data = data;\n\n\t//merged cells\n\tif(obj.spans){\n\t\tfor(let i = 0; i<obj.spans.length; i++){\n\t\t\tobj.spans[i][0]++;\n\t\t\tobj.spans[i][1]++;\n\t\t}\n\t}\n\n\t//named ranges\n\tif(ranges){\n\t\tfor(let r = 0; r<ranges.length; r++){\n\t\t\t//we don't support global named ranges, so import only sheet-based :(\n\t\t\tif(ranges[r].Sheet === index){\n\t\t\t\tobj.ranges = obj.ranges || [];\n\t\t\t\tobj.ranges.push([ranges[r].Name.toUpperCase(), ranges[r].Ref.substring(ranges[r].Ref.indexOf(\"!\")+1).replace(/\\$/g, \"\")]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//cell styles\n\tif(obj.styles)\n\t\t_getStyles(obj);\n\n\tif(obj.types)\n\t\t_getTypes(obj);\n\n\tif(obj.hidden){\n\t\t_getHidden(obj);\n\t}\n\n\t//column width and row height\n\tif(obj.sizes){\n\t\tfor(let i = 0; i<obj.sizes.length; i++){\n\t\t\tif(obj.sizes[i][0] == \"column\")\n\t\t\t\tobj.sizes[i] = [0, obj.sizes[i][1]+1, obj.sizes[i][2]];\n\t\t\telse\n\t\t\t\tobj.sizes[i] = [obj.sizes[i][1]+1, 0, obj.sizes[i][2]];\n\t\t}\n\t}\n\n\treturn obj; \n}\n\n//ARGB conversion\nfunction _safeColor(str){\n\tstr = str || \"000000\";\n\tif(str.length === 8) str = str.substring(2);\n\treturn \"#\"+str;\n}\n\n//only fonts that we support can be imported\nfunction _safeFont(str){\n\tlet safe = defaultStyles[\"font-family\"];\n\tfor(let i = 0; i<fontFamily.length; i++){\n\t\tif(fontFamily[i].value == str) { safe = fontFamily[i].id; break; }\n\t}\n\treturn safe;\n}\n\nfunction _getTypes(obj){\n\tobj.types.forEach(type => {\n\t\tfor(let i = 0; i < obj.data.length; i++){\n\t\t\tif(obj.data[i][0] === type[0]+1 && obj.data[i][1] === type[1]+1){\n\t\t\t\tobj.data[i][4] = type[2];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction _getHidden(obj){\n\tconst hidden = {\n\t\trow:[],\n\t\tcolumn:[]\n\t};\n\n\tfor(let i = 0; i < obj.hidden.length; i++){\n\t\tconst item = obj.hidden[i];\n\t\tif(item[0] == \"column\")\n\t\t\thidden.column.push(item[1]+1);\n\t\telse\n\t\t\thidden.row.push(item[1]+1);\n\t}\n\n\tobj.table = {hidden};\n}\n\nfunction _getBorderStyles(pos, stl){\n\tpos = pos.replace(\"border-\", \"\");\n\tif(stl.border && stl.border[pos]){\n\t\tconst border = stl.border[pos];\n\t\tconst color = _safeColor(border.color.rgb) || \"\";\n\t\tconst type = border.style || \"\";\n\t\treturn `${color},${type}`;\n\t}\n\treturn \"\";\n}\n\nfunction _getStyles(obj){\n\tlet styleshash = {}, styles = [], stylescount = 1;\n\tfor(let i = 0; i<obj.styles.length; i++){\n\t\tlet str = [], stl = obj.styles[i][2], css;\n\n\t\tfor(let s  = 0; s<style_names.length; s++){\n\t\t\tswitch (style_names[s]){\n\t\t\t\tcase \"color\": \n\t\t\t\t\tstr[s] = stl.font && stl.font.color?(_safeColor(stl.font.color.rgb)||\"\"):\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"background\":\n\t\t\t\t\tstr[s] = stl.fill && stl.fill.fgColor?(_safeColor(stl.fill.fgColor.rgb) ||\"\"):\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text-align\":\n\t\t\t\t\tstr[s] = (stl.alignment ?stl.alignment.horizontal:\"\") || defaultStyles[\"text-align\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-family\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.name?_safeFont(stl.font.name):\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-size\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.sz?((stl.font.sz/0.75)+\"px\" ||\"\"):\"\"; //pt to px conversion\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-style\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.italic?\"italic\":\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text-decoration\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.underline?\"underline\":\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-weight\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.bold?\"bold\":\"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"vertical-align\":\n\t\t\t\t\tvar va = stl.alignment ? (stl.alignment.vertical || \"\"):\"\";\n\t\t\t\t\tstr[s] = (va ==\"center\"?\"middle\":va) || defaultStyles[\"vertical-align\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"wrap\":\n\t\t\t\t\tstr[s] = stl.alignment && stl.alignment.wrapText?\"wrap\":\"nowrap\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"borders\":\n\t\t\t\t\tstr[s] = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"format\":\n\t\t\t\t\tstr[s] = \"\"; //stl.numFmt\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"border-right\":\n\t\t\t\tcase \"border-bottom\":\n\t\t\t\tcase \"border-left\":\n\t\t\t\tcase \"border-top\":\n\t\t\t\t\tstr[s] = _getBorderStyles(style_names[s], stl);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tstr = str.join(\";\");\n\t\tcss = styleshash[str] || \"wss\"+stylescount;\n\n\t\tfor(let d = 0; d<obj.data.length; d++){\n\t\t\tif(obj.data[d][0] === obj.styles[i][0]+1 && obj.data[d][1] === obj.styles[i][1]+1){\n\t\t\t\tobj.data[d][3] = css;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(!styleshash[str]){\n\t\t\tstyles.push([css, str]);\n\t\t\tstyleshash[str] = css;\n\t\t\tstylescount++;\n\t\t}\n\t}\n\tobj.styles = styles;\n}","import group from \"../operations/undo_group\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tswitch (action.id) {\n\t\t\tcase \"clear-value\":\n\t\t\t\tview.clearRange(null,{values: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-style\":\n\t\t\t\tview.clearRange(null,{styles: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-conditional-formats\":\n\t\t\t\tview.clearRange(null,{conditions: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-dropdown-editors\":\n\t\t\t\tview.clearRange(null,{editors: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-all\":\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tview.clearRange(null,null);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-comments\":\n\t\t\t\tview.clearRange(null,{comments: true});\n\t\t\t\tbreak;\n\t\t}\n\t});\n}","import group from \"../operations/undo_group\";\nimport {adjustRow, adjustColumn} from \"../operations/column_operations\";\n\n/* row operations */\n\nexport function insertRow(row){\n\tcallCommand(this, \"add\", \"row\", row);\n}\n\nexport function deleteRow(row){\n\tcallCommand(this, \"del\", \"row\", row);\n}\n\nexport function setRowHeight(row, height){\n\tsetSize(this, \"row\", row, height);\n}\n\n/* col operations */\n\nexport function insertColumn(column){\n\tcallCommand(this, \"add\", \"column\", column);\n}\n\nexport function deleteColumn(column){\n\tcallCommand(this, \"del\", \"column\", column);\n}\n\nexport function setColumnWidth(column, width){\n\tsetSize(this, \"column\", column, width);\n}\n\n/* helpers */\n\nfunction getCells(view, id, group){\n\tif(!id){\n\t\tlet area = view.$$(\"cells\").getSelectArea();\n\t\tif(area)\n\t\t\tid = [area.start[group],area.end[group]];\n\t}\n\telse if(!webix.isArray(id)){\n\t\tid =  [id,id];\n\t}\n\treturn id;\n}\n\nfunction callCommand(view, name, group, id){\n\tlet start = {}, end = {};\n\tid = getCells(view, id, group);\n\tif(!id)\n\t\treturn;\n\tstart[group] = id[0];\n\tend[group] = id[1];\n\tview.callEvent(\"onCommand\", [{id:name,  group:group}, start, end]);\n}\n\nfunction setSize(view, type, id, size){\n\tid = getCells(view, id, type);\n\tif(!id)\n\t\treturn;\n\tgroup.set(()=>{\n\t\tfor (let i = id[0]; i <= id[1]; i++){\n\t\t\tif(size != \"auto\")\n\t\t\t\tview.$$(\"cells\")[type == \"row\" ? \"setRowHeight\" : \"setColumnWidth\"](i, size);\n\t\t\telse\n\t\t\t\t(type == \"row\" ? adjustRow : adjustColumn)(i, view);\n\t\t}\n\t});\n}","import * as lock from \"../operations/lock_cell\";\n\nexport function lockCell(row, column, state){\n\tlock.lockCell(this, row, column, state);\n}\n\nexport function isCellLocked(row, column){\n\treturn lock.isCellLocked(this, row, column);\n}","import group from \"../operations/undo_group\";\n\nexport function freezeColumns(column){\n\tconst grid = this.$$(\"cells\");\n\n\tif( webix.isUndefined(column) ){\n\t\tlet sel = this.getSelectedId(true);\n\t\tcolumn = sel.length?sel[0].column:0;\n\t}\n\n\tconst base = grid.config.columns[0].id == \"rowId\" ? 1 : 0;\n\tlet index = base;\n\tif (column && column != this._frozenColumns){\n\t\tfor (let i = column; i > 0; i--) {\n\t\t\tindex = grid.getColumnIndex(i)+1;\n\t\t\tif(index)\n\t\t\t\tbreak;\n\t\t}\n\t\tif (!index) index = base;\n\t}\n\n\tgroup.set(function(){\n\t\tcheckSpans(this, \"column\", column);\n\t\tgrid.unselect();\n\t\tgrid.define(\"leftSplit\", index);\n\t\tgrid.refreshColumns();\n\n\t\tthis.callEvent(\"onAction\", [ \"freeze-column\", { value: (this._frozenColumns || 0), newValue: column}]);\n\t\tthis._frozenColumns = column || 0;\n\t},this);\n}\n\nexport function freezeRows(row){\n\tconst grid = this.$$(\"cells\");\n\n\tif( webix.isUndefined(row) ){\n\t\tlet sel = this.getSelectedId(true);\n\t\trow = sel.length?sel[0].row:0;\n\t}\n\n\tlet index = 0;\n\tif (row && row != this._frozenRows){\n\t\tfor (let i = row; i > 0; i--) {\n\t\t\tindex = grid.getIndexById(i)+1;\n\t\t\tif(index)\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tgroup.set(function(){\n\t\tcheckSpans(this, \"row\", row);\n\t\tgrid.unselect();\n\t\tgrid.define(\"topSplit\", index);\n\t\tgrid.refreshColumns();\n\n\t\tthis.callEvent(\"onAction\", [ \"freeze-row\", { value: this._frozenRows, newValue: row}]);\n\t\tthis._frozenRows = row || 0;\n\t},this);\n}\n\nfunction checkSpans(view, type, num){\n\tconst grid = view.$$(\"cells\");\n\n\tif(type == \"row\"){\n\t\tlet start = 1;\n\t\tlet end = view.config.columnCount;\n\t\tfor(let i = start; i <= end; i++){\n\t\t\tconst span = grid.getSpan(num, i);\n\t\t\tif(span){\n\t\t\t\tconst spanSize = (span[0]*1) + span[3] - 1;\n\t\t\t\tif(spanSize>num)\n\t\t\t\t\tchangeSpan(view, span, span[2], span[3] - (spanSize - num));\n\t\t\t}\n\t\t}\n\t}\n\telse{//column\n\t\tlet start = grid.data.order[0];\n\t\tlet end = grid.data.order.length;\n\t\tfor(let i = start; i <= end; i++){\n\t\t\tconst span = grid.getSpan(i, num);\n\t\t\tif(span){\n\t\t\t\tconst spanSize = (span[1]*1) + span[2] - 1;\n\t\t\t\tif(spanSize>num)\n\t\t\t\t\tchangeSpan(view, span, span[2] - (spanSize - num), span[3]);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction changeSpan(view, span, x, y){\n\tview.splitCell(span[0], span[1]);\n\tview.combineCells({\n\t\tcell:{\n\t\t\trow:span[0],\n\t\t\tcolumn:span[1]\n\t\t},\n\t\tx:x,\n\t\ty:y\n\t});\n}","import * as gridlines from \"../operations/hide_gridlines\";\n\nexport function hideGridlines(state){\n\tgridlines.hideGridlines(this,state);\n}","import * as headers from \"../operations/hide_headers\";\n\nexport function hideHeaders(state){\n\theaders.hideHeaders(this,state);\n}","import * as hrows from \"../operations/hide_row_col\";\n\nexport function hideColumn(column,state){\n\throws.setState(this, column, state, \"column\");\n}\nexport function isColumnVisible(column){\n\treturn hrows.isColumnVisible(this, column);\n}\nexport function hideRow(row,state){\n\throws.setState(this, row, state, \"row\");\n}\nexport function isRowVisible(row){\n\treturn hrows.isRowVisible(this, row);\n}","import {addMethod} from \"@xbs/muon\";\nimport {image, chart} from \"../mathematics/writer\";\nimport {range as getRange} from \"../helpers/column_names\";\n\nexport function addImage(row, column, url){\n\tthis.setCellValue(row, column, image(url));\n\tthis.refresh();\n}\n\nexport function addSparkline(row, column, config){\n\tlet value = chart(config);\n\tthis.setCellValue(row, column, value);\n\tthis.refresh();\n}\n\nexport function getSheetData(name){\n\tconst sheet = this._mData.getPage(name);\n\n\tif(sheet)\n\t\treturn {\n\t\t\tgetValue: (r, c, math)=>{\n\t\t\t\treturn _normalizeVal(sheet.getValue(r-1, c-1, math));\n\t\t\t},\n\t\t\tgetRangeValue: (range)=>{\n\t\t\t\tconst pos = getRange(range, this, name);\n\t\t\t\tif (!pos) return [];\n\n\t\t\t\tconst page = pos[4] == name ? sheet : this._mData.getPage(pos[4]);\n\t\t\t\treturn page.getRange(pos[0]-1, pos[1]-1, pos[2]-1, pos[3]-1).map(_normalizeVal);\n\t\t\t}\n\t\t};\n}\n\nfunction _normalizeVal(val){\n\treturn !val && val !== 0 ? \"\" : val;\n}\n\nexport function registerMathMethod(name, handler){\n\tname = name.toUpperCase();\n\taddMethod(name, handler);\n\tif(this.$$(\"liveEditor\")){\n\t\tconst sid = this.$$(\"liveEditor\").config.suggest;\n\t\tconst list = webix.$$(sid).getList();\n\t\tif(!list.exists(name))\n\t\t\tlist.add({id:name, value:name});\n\t}\n}\n\nexport function recalculate(){\n\tthis._mData.getStore().recalculate();\n\tthis.callEvent(\"onMathRefresh\",[]);\n\tthis.refresh();\n}\n\nexport function setPlaceholder(name, value){\n\tif(typeof name == \"object\"){\n\t\tvalue = name;\n\t\tname = \"*\";\n\t}\n\n\tthis._mData.getStore().setPlaceholder(name, value);\n\n\tthis.refresh();\n\tthis.callEvent(\"onMathRefresh\",[]);\n}","import * as sheets from \"../sheets\";\nimport * as spn from \"../operations/spans\";\nimport * as und from \"../operations/undo\";\nimport group from \"../operations/undo_group\";\nimport * as stl from \"../operations/styles\";\nimport * as srt from \"../operations/sorting\";\nimport {removeCommentsRange} from \"../operations/comments\";\nimport {clearConditionalFormats} from \"../operations/conditional_formats\";\nimport {clearEditors} from \"../operations/dropdown\";\nimport {clearFilters} from \"../operations/filter\";\n\n//spans\nexport function combineCells(range){\n\tif(!range){\n\t\tvar sel = this.getSelectedId(true);\n\t\tif (sel.length>1){\n\t\t\trange = spn.getRange(sel);\n\t\t}\n\t}\n\tgroup.set(()=> {\n\t\tif (range)\n\t\t\tspn.addSpan(this, range.cell, range.x, range.y);\n\t});\n\tthis.refresh();\n}\n\nexport function splitCell(row, column){\n\tif (row && column) {\n\t\tspn.removeSpan(this, {row: row, column: column});\n\t}\n\telse{\n\t\tgroup.set(function(){\n\t\t\tthis.eachSelectedCell(function(cell){\n\t\t\t\tspn.removeSpan(this, cell);\n\t\t\t});\n\t\t},this);\n\n\t}\n\n\tthis.refresh();\n}\n\n//styles\nexport function addStyle(prop, origin){\n\treturn stl.addStyle(this, prop, origin);\n}\n\nexport function getStyle(row, column){\n\treturn stl.getStyle(this, {row:row, column:column});\n}\n\nexport function setStyle(row, column, style){\n\treturn stl.setStyle(this, {row: row, column: column}, style);\n}\n\nexport function setRangeStyle(rangeStr, style){\n\tgroup.set(function() {\n\t\tstl.setRangeStyle(this, rangeStr, style);\n\t},this);\n}\n\nexport function clearRange(rangeStr, type) {\n\tif (!rangeStr){\n\t\trangeStr = this._table.getSelectArea();\n\t\tif (!rangeStr) return;\n\t}\n\n\tif (!type) type = {styles: true, values: true, editors:true, conditions:true, comments:true };\n\t\n\tif (type.styles)\n\t\tstl.clearRangeStyle(this,rangeStr);\n\n\tif (type.conditions)\n\t\tclearConditionalFormats(this,rangeStr);\n\t\n\tif (type.values)\n\t\tthis.setRangeValue(rangeStr, null);\n\n\tif (type.editors){\n\t\tclearEditors(this, rangeStr);\n\t\tclearFilters(this, rangeStr);\n\t}\n\n\tif (type.comments)\n\t\tremoveCommentsRange(this, rangeStr);\n\n\tthis.refresh();\n}\n\nexport function compactStyles(){\n\treturn stl.compactStyles(this);\n}\n\n// serialize\nexport function serialize(config){\n\tconst obj = {};\n\tthis.callEvent(\"onDataSerialize\",[obj, config]);\n\n\tif(config){\n\t\tif(config.compactStyles)\n\t\t\tobj.styles = stl.removeUnusedStyles(obj);\n\t\tif(config.sheets)\n\t\t\treturn sheets.serialize(this, obj, config);\n\t}\n\n\treturn obj;\n}\n\n//sheets\nexport function showSheet(name){\n\tsheets.show(this,name);\n}\nexport function getActiveSheet(){\n\treturn this._activeSheet;\n}\nexport function addSheet(content){\n\tsheets.add(this, content);\n}\nexport function clearSheet(){\n\tthis.reset();\n}\nexport function renameSheet(name,newName){\n\tsheets.rename(this,name,newName);\n}\nexport function editSheet(name){\n\tsheets.edit(this,name);\n}\nexport function removeSheet(name){\n\tsheets.remove(this,name);\n}\n\n\n//undo\nexport function undo(){\n\tund.undo(this);\n}\nexport function redo(){\n\tund.redo(this);\n}\n\n// sort\nexport function sortRange(range, dir){\n\tsrt.sortRange(this, range, dir);\n}","import {toRange,rangeObj} from \"../helpers/column_names\";\nimport * as tbl from \"../table\";\nimport group from \"../operations/undo_group\";\nimport {newSheet} from \"../sheets\";\nimport {getType} from \"../operations/types\";\nimport {getExcelDateFromJs} from \"../mathematics/methods\";\n\nexport function refresh(all){\n\tif (all)\n\t\tthis._table.refreshColumns();\n\telse\n\t\tthis._table.refresh();\n}\nexport function eachSelectedCell(cb){\n\tvar cells = this.getSelectedId(true);\n\tfor (var i=0; i<cells.length; i++)\n\t\tcb.call(this, cells[i]);\n}\nexport function getSelectedRange(sheet){\n\tvar area = this._table.getSelectArea();\n\tif (area){\n\t\tif (sheet)\n\t\t\tsheet = this.getActiveSheet();\n\t\treturn toRange(area.start.row,area.start.column,area.end.row,area.end.column,sheet);\n\t}\n\treturn \"\";\n}\nexport function getSelectedId(all){\n\tvar area = this._table.getSelectArea();\n\tif(!all)\n\t\treturn area && area.start.row ? area.start : null;\n\n\tvar selection = [];\n\tif(area){\n\t\tvar c0 = area.start;\n\t\tvar c1 = area.end;\n\n\t\tfor(var i = c0.row; i<= c1.row; i++){\n\t\t\tfor(var j = c0.column; j <= c1.column; j++){\n\t\t\t\tselection.push({row: i,column:j});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn selection;\n\t//return this._table.getSelectedId(all)\n}\nexport function getCellValue(row, column, math){\n\tconst value = this._mPage.getValue(row-1, column-1, math !== false);\n\n\treturn correctVal(value);\n}\nexport function setCellValue(row, column, value){\n\tvalue = correctVal(value);\n\tconst old = this.getCellValue(row, column);\n\tconst oldType = getType(this, row, column);\n\n\tlet sameValue;\n\tif(oldType == \"date\"){\n\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\tconst dateValue = isNaN(value) ? getExcelDateFromJs(parser(value)) : value;\n\t\tsameValue = old == dateValue;\n\t}\n\telse if(oldType != \"string\" && value !== \"\" && !isNaN(value) && old == value){\n\t\tsameValue = true;\n\t\tvalue = value*1;\n\t}\n\n\tif (!sameValue && old !== value){\n\t\tgroup.set(()=>{\n\t\t\tif (this.callEvent(\"onBeforeValueChange\",[row, column, value, old])){\n\t\t\t\tthis._mPage.setValue(row-1, column-1, value);\n\n\t\t\t\t//onCellChange can change item (via types module)\n\t\t\t\tthis.callEvent(\"onCellChange\", [row, column, value]);\n\t\t\t\tconst updatedType = getType(this, row, column);\n\n\t\t\t\t//recalculate if we refer to a cell, where type is string and value is something like 005 or 5e5\n\t\t\t\tif(oldType != updatedType && updatedType == \"string\" && value[0] == \"=\" && value.length > 1)\n\t\t\t\t\tthis._mPage.setValue(row-1, column-1, value);\n\n\t\t\t\tthis.saveCell(row, column);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction correctVal(val){\n\treturn val || val === 0 ? val : \"\";\n}\n\nexport function setRangeValue(range, value){\n\tgroup.set(function(){\n\t\tvar pos = rangeObj(range, this);\n\t\tfor (let row = pos.start.row; row <= pos.end.row; row++) {\n\t\t\tfor (let column = pos.start.column; column <=  pos.end.column; column++) {\n\t\t\t\tthis.setCellValue(row, column, value);\n\t\t\t}\n\t\t}\n\t},this);\n\n}\n\nexport function getRow(id){\n\tconst row = webix.copy(this._table.getItem(id));\n\n\tfor(let i = 1; i <= this.config.columnCount; i++){\n\t\tconst cell = this._mPage.getCell(id-1, i-1);\n\n\t\tif(cell){\n\t\t\trow[i] = cell.value;\n\n\t\t\t[[\"style\", \"$cellCss\"], [\"type\", \"$cellType\"], [\"format\", \"$cellFormat\"]].forEach(param => {\n\t\t\t\tconst val = cell[param[0]];\n\t\t\t\tif(val){\n\t\t\t\t\tif(!row[param[1]])\n\t\t\t\t\t\trow[param[1]] = {};\n\t\t\t\t\trow[param[1]][i] = val;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst math =  this.getCellValue(id, i, true);\n\t\t\tif(math && math[0] == \"=\")\n\t\t\t\trow[\"$\"+i] = math;\n\t\t}\n\t}\n\n\treturn row;\n}\nexport function getColumn(id){\n\treturn this._table.getColumnConfig(id);\n}\nexport function reset(mode){\n\tvar obj = { data:[] };\n\tif (mode && mode.sheets){\n\t\tobj = newSheet(obj);\n\t}\n\t\n\tthis.parse(obj);\n}\n\nexport function _resetTable(){\n\ttbl.reset(this);\n}\n","import {save} from \"../operations/save\";\n\nexport function saveCell(row, column){\n\tvar style = this.getStyle(row, column);\n\n\tsave(this, \"data\", {\n\t\trow: row,\n\t\tcolumn: column,\n\t\tvalue: this.getCellValue(row, column),\n\t\tstyle: (style ? style.id : \"\")\n\t});\n}","export function setCellEditor(row, column, editor) {\n\tconst line = this._table._ssEditors[row] = this._table._ssEditors[row] || {};\n\tconst value = line[column] || null;\n\tline[column] = editor;\n\n\tif (editor && editor.editor){\n\t\tthis._table.addCellCss(row,column, \"ss_editor\");\n\t} else {\n\t\tdelete this._table._ssEditors[row][column];\n\t\tthis._table.removeCellCss(row,column, \"ss_editor\");\n\t}\n\tthis.callEvent(\"onAction\", [\"dropdown\", { row, column, value, newValue:editor }]);\n}\n\nexport function getCellEditor(row, column){\n\tlet line = this._table._ssEditors[row] || {};\n\treturn line[column] || null;\n}","import * as flt from \"../operations/filter\";\n\nexport function setCellFilter(row, column, filter){\n\tconst line = this._table._ssFilters[row] = this._table._ssFilters[row] || {};\n\tconst value = line[column] || null;\n\n\tif (filter && (webix.isArray(filter) || typeof filter == \"string\"))\n\t\tfilter = { options:filter };\n\tline[column] = filter;\n\n\tif (filter && typeof filter == \"object\"){\n\t\tthis._table.addCellCss(row,column, \"ss_filter\");\n\t\tif (filter.value && flt.isValueActive(filter.value))\n\t\t\tthis._table.addCellCss(row,column, \"ss_filter_active\");\n\n\t\twebix.extend(filter, {row, column}, true);\n\t\tfilter.options = flt.calibrateRange(this, row, column, filter.options);\n\n\t\tif (!filter.handler && filter.value && filter.value.condition){\n\t\t\tconst mode = filter.mode || flt.getFilterMode(this, row, column);\n\t\t\tfilter.handler = flt.getFilterFunction(mode, filter.value);\n\t\t}\n\t} else {\n\t\tdelete this._table._ssFilters[row][column];\n\t\tthis._table.removeCellCss(row,column, \"ss_filter\");\n\t\tthis._table.removeCellCss(row,column, \"ss_filter_active\");\n\t}\n\tthis.callEvent(\"onAction\", [\"filter\", { row, column, value, newValue:filter }]);\n}\n\nexport function getCellFilter(row, column){\n\tlet line = this._table._ssFilters[row] || {};\n\treturn line[column] || null;\n}\n\nexport function removeFilters(){\n\tconst filters = flt.getFilters(this._table);\n\n\tfor\t(let i=0; i<filters.length; i++){\n\t\tconst {row, column} = filters[i];\n\t\tthis.setCellFilter(row, column, null);\n\t}\n\n\tthis._table._ssFilters = {};\n\tthis._table.data.filter((obj) => {\n\t\treturn this.isRowVisible(obj.id);\n\t});\n}\n\n\nexport function filterSpreadSheet(){\n\tthis._table.data.silent(function(){\n\t\tconst filters = flt.getFilters(this._table);\n\n\t\t// hidden rows\n\t\tthis._table.data.filter((obj) => {\n\t\t\treturn this.isRowVisible(obj.id);\n\t\t});\n\n\t\tfor (let i=0; i<filters.length; i++){\n\t\t\tconst {row, column, handler} = filters[i];\n\n\t\t\tlet all = false;\n\t\t\tthis._table.data.filter(obj => {\n\t\t\t\tif (all || obj.id*1 <= row*1) return true;\n\n\t\t\t\tlet value = this._mPage.getValue(obj.id - 1, column - 1);\n\n\t\t\t\tif (!value && value !== \"\") return all = true;\n\t\t\t\treturn (typeof handler == \"function\") ? handler( String(value) ) : true;\n\t\t\t}, 1, true);\n\t\t}\n\t}, this);\n\n\tthis._table.callEvent(\"onAfterFilter\", []);\n\tthis._table.refresh();\n}\n","export function confirm(config){\n\treturn webix.confirm({\n\t\tcss:\"webix_ssheet_confirm\",\n\t\ttext:config.text,\n\t\tok: webix.i18n.spreadsheet.labels.ok,\n\t\tcancel: webix.i18n.spreadsheet.labels.cancel\n\t});\n}\n\nexport function alert(config){\n\treturn webix.alert({\n\t\tcss: \"webix_ssheet_alert\",\n\t\ttext:config.text,\n\t\tok: webix.i18n.spreadsheet.labels.ok\n\t});\n}","import * as undo from \"../operations/undo\";\nimport group from \"../operations/undo_group\";\n\nexport function resetUndo(){\n\tundo.reset(this);\n}\n\nexport function groupUndo(func){\n\tgroup.set(func, this);\n}\n\nexport function ignoreUndo(func){\n\tundo.ignoreUndo(func, this);\n}","import * as fmt from \"../operations/formats\";\n\nexport function setFormat(row, column, format){\n\tfmt.addFormat(this, row, column, format);\n}\n\nexport function changeDecimals(row, column, inc){\n\t//row and column may be obj\n\tfmt.changeAreaDecimals(this, inc, row, column);\n}","const defaultMenu = [\n\t{ id:\"file\", submenu:[\n\t\t{id: \"sheet\", submenu: [\n\t\t\t{id: \"new-sheet\"},\n\t\t\t{id: \"copy-sheet\"},\n\t\t\t{id: \"remove-sheet\"}\n\t\t]},\n\t\t{id: \"excel-import\"},\n\t\t{id: \"excel-export\"}\n\t]},\n\t{ id:\"edit\", submenu:[\n\t\t{id: \"add-range\"},\n\t\t{id: \"add-dropdown\"},\n\t\t{id: \"add-link\"},\n\t\t{id: \"lock-cell\"},\n\t\t{id: \"conditional-format\"},\n\t\t{id: \"clear\", submenu:[\n\t\t\t{id: \"clear-value\"},\n\t\t\t{id: \"clear-style\"},\n\t\t\t{id: \"clear-conditional-formats\"},\n\t\t\t{id: \"clear-dropdown-editors\"},\n\t\t\t{id: \"clear-comments\"},\n\t\t\t{ $template:\"Separator\" },\n\t\t\t{id: \"clear-all\"}\n\t\t]}\n\t]},\n\t{ id:\"insert\", submenu:[\n\t\t{id: \"image\", submenu:[\n\t\t\t{ id: \"add-image-cell\"},\n\t\t\t{ id: \"add-image-top\"}\n\t\t]},\n\t\t{id: \"graph\", submenu:[\n\t\t\t{ id: \"add-sparkline\"},\n\t\t\t{ id: \"add-chart\"}\n\t\t]},\n\t\t{id: \"add-comment\"}\n\t]},\n\t{ id:\"data\", submenu:[\n\t\t{id: \"sort\", submenu: [\n\t\t\t{id: \"sort-asc\"},\n\t\t\t{id: \"sort-desc\"}\n\t\t]},\n\t\t{id: \"create-filter\"}\n\t]},\n\t{ id: \"view\", submenu:[\n\t\t{id: \"columns\", submenu: [\n\t\t\t{id: \"insert-column\"},\n\t\t\t{id: \"delete-column\"},\n\t\t\t{id: \"show-column\"},\n\t\t\t{id: \"hide-column\"},\n\t\t\t{id: \"resize-column\"}\n\t\t]},\n\t\t{id: \"rows\", submenu: [\n\t\t\t{id: \"insert-row\"},\n\t\t\t{id: \"delete-row\"},\n\t\t\t{id: \"show-row\"},\n\t\t\t{id: \"hide-row\"},\n\t\t\t{id: \"resize-row\"}\n\t\t]},\n\t\t{ $template:\"Separator\" },\n\t\t{id: \"freeze-columns\"},\n\t\t{id: \"freeze-rows\"},\n\t\t{id: \"hide-gridlines\"},\n\t\t{id: \"hide-headers\"}\n\t]}\n];\n\nconst ui = {\n\tgetMenuData: function(menu, config){\n\t\tvar i;\n\t\tfor(i=0; i < menu.length; i++){\n\t\t\tif(typeof menu[i] == \"string\")\n\t\t\t\tmenu[i] = {id: menu[i]};\n\t\t\tif((menu[i].id == \"resize-column\" || menu[i].id == \"resize-row\") && !config.resizeCell){\n\t\t\t\tmenu.splice(i,1);\n\t\t\t\ti--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(!menu[i].value)\n\t\t\t\tmenu[i].value = webix.i18n.spreadsheet.menus[menu[i].id];\n\t\t\tif(menu[i].submenu)\n\t\t\t\tmenu[i].submenu = this.getMenuData(menu[i].submenu, config);\n\t\t}\n\n\t\treturn menu;\n\t}\n};\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar config = view.config,\n\t\tmenu = {\n\t\t\tview: \"menu\",\n\t\t\tborderless: true,\n\t\t\tcss: \"webix_ssheet_menu\",\n\t\t\tid: \"menu\",\n\t\t\tautowidth: true,\n\t\t\ttype:{\n\t\t\t\theight: 40\n\t\t\t},\n\t\t\tdata: ui.getMenuData(webix.isArray(config.menu)?config.menu : webix.copy(defaultMenu), view.config)\n\t\t};\n\n\tview.callEvent(\"onViewInit\", [\"menu\", menu]);\n\treturn menu;\n}\n\n\nfunction ready(view){\n\tif(view.$$(\"menu\"))\n\t\tview.$$(\"menu\").attachEvent(\"onMenuItemClick\",(id) => callAction(view,id));\n}\n\nconst actionMap = {\n\t\"undo\": function (view) {\n\t\tview.undo();\n\t},\n\t\"redo\": function (view) {\n\t\tview.redo();\n\t},\n\t\"insert-column\": function (view) {\n\t\tview.insertColumn();\n\t},\n\t\"delete-column\": function (view) {\n\t\tview.deleteColumn();\n\t},\n\t\"show-column\": function (view) {\n\t\tview.hideColumn(null,false);\n\t},\n\t\"hide-column\": function (view) {\n\t\tview.hideColumn(null,true);\n\t},\n\t\"resize-column\": function (view) {\n\t\t//like we are calling from the toolbar\n\t\tview.callEvent(\"onCommand\",[{id: \"resize\", group: \"column\", value: webix.i18n.spreadsheet.menus[\"resize-column\"]}]);\n\t},\n\t\"insert-row\": function (view) {\n\t\tview.insertRow();\n\t},\n\t\"delete-row\": function (view) {\n\t\tview.deleteRow();\n\t},\n\t\"show-row\": function (view) {\n\t\tview.hideRow(null,false);\n\t},\n\t\"hide-row\": function (view) {\n\t\tview.hideRow(null,true);\n\t},\n\t\"resize-row\": function (view) {\n\t\t//like we are calling from the toolbar\n\t\tview.callEvent(\"onCommand\",[{id: \"resize\", group: \"row\", value: webix.i18n.spreadsheet.menus[\"resize-row\"]}]);\n\t},\n\t\"freeze-columns\": function(view){\n\t\tview.freezeColumns();\n\t},\n\t\"hide-gridlines\": function(view){\n\t\tview.hideGridlines(\"toggle\");\n\t},\n\t\"hide-headers\": function(view){\n\t\tview.hideHeaders(\"toggle\");\n\t}\n};\n\nfunction callAction(view,id){\n\tif(view.callEvent(\"onMenuItemClick\",[id])){\n\t\tif(actionMap[id])\n\t\t\tactionMap[id](view);\n\t\telse\n\t\t\tview.callEvent(\"onCommand\",[{id: id}]);\n\t}\n}","//global definitions\nimport \"./locale\";\nimport \"./views/index\";\n\n//special content for non-production builds\nimport \"./init\";\n\nimport \"./editors/index\";\n\n//modules\nimport * as bar from \"./toolbar\";\nimport * as tbl from \"./table\";\nimport * as key from \"./hotkeys\";\nimport * as editor from \"./editor\";\nimport * as sheets from \"./sheets\";\nimport * as dialogs from \"./dialogs/index\";\nimport * as context from \"./context\";\nimport * as chart from \"./chart\";\n\nimport {setDefaultFormats} from \"./operations/formats\";\nimport {operations} from \"./operations/index\";\nimport {api} from \"./api/index\";\n\n//styling\nimport * as menu from \"./menu\";\nimport {getDefaultStyles} from \"./helpers/conditional\";\nimport {setSkinDefaults} from \"./toolbar/defaults\";\n\nvar component = {\n\tname:\"spreadsheet\",\n\t_base_index:{ count:1 },\n\tdefaults:{\n\t\tspans: true,\n\t\tliveEditor: true,\n\t\trowCount:50,\n\t\tmath:true,\n\t\tcolumnCount:20,\n\t\tresizeCell: true,\n\t\tsheetTabWidth: 90,\n\t\tconditionStyle: getDefaultStyles()\n\t},\n\t$init:function(){\n\t\tthis.$index = (this._base_index.count++);\n\t\tthis.$view.className += \" webix_ssheet\";\n\n\t\tthis.$ready.unshift(this._sub_init);\n\t\tthis.$ready.unshift(setDefaultFormats);\n\t\tthis.$ready.push(this._set_handlers);\n\n\t\tthis._destroy_with_me = [];\n\t\tthis.attachEvent(\"onDestruct\", () => {\n\t\t\tthis._destroy_with_me.forEach(view => view.destructor());\n\t\t});\n\t},\n\t$skin:function(){\n\t\tsetSkinDefaults();\n\t},\n\t_sub_init:function(){\n\t\tconst obj = this.config;\n\t\tconst rows = [];\n\n\t\t//toolbars\n\t\tif(!obj.readonly && obj.menu)\n\t\t\trows.push(menu.init(this));\n\t\tif(!obj.readonly && obj.toolbar !== false)\n\t\t\trows.push(bar.init(this));\n\t\tif (obj.subbar)\n\t\t\trows.push(obj.subbar);\n\t\tif(!obj.readonly && obj.liveEditor)\n\t\t\trows.push(editor.init(this));\n\n\t\t//data part\n\t\tconst tblObj = {\n\t\t\teditable : !obj.readonly,\n\t\t\tliveEditor: obj.liveEditor\n\t\t};\n\t\tif(obj.rowHeight)\n\t\t\ttblObj.rowHeight = obj.rowHeight;\n\t\tif(obj.columnWidth)\n\t\t\ttblObj.columnWidth = obj.columnWidth;\n\n\t\tif(obj.readonly)\n\t\t\trows.push(tbl.init(this, tblObj));\n\t\telse\n\t\t\trows.push({cols:[tbl.init(this, tblObj), chart.init(this)]});\n\n\t\tconst bottom = obj.bottombar === true ? sheets.defaultBottom(this) : obj.bottombar;\n\t\tif (bottom)\n\t\t\trows.push(bottom);\n\n\t\tsheets.init(this);\n\n\t\tif(!obj.readonly)\n\t\t\tcontext.init(this);\n\n\t\tdialogs.init(this);\n\n\t\tthis.rows_setter(rows);\n\t},\n\t_set_handlers:function(){\n\t\t//prevent double init\n\t\tif (this._table) return;\n\t\tthis._table = this.$$(\"cells\");\n\n\t\t//init all sub modules\n\t\toperations(this);\n\n\t\t//set sizes for the table\n\t\ttbl.reset(this, this.config.columnCount, this.config.rowCount);\n\t\tkey.init(this); //keyboard shortcuts\n\t\t\n\t\tthis._table.attachEvent(\"onAfterAreaAdd\", () =>\n\t\t\tthis.callEvent(\"onAfterSelect\", [ this.getSelectedId(true) ]));\n\n\t\tthis.callEvent(\"onComponentInit\", []);\n\t},\n\t$onLoad:function(obj, driver){\n\t\t//when loading data by data:, we can get $onLoad before _set_handlers call\n\t\tthis._set_handlers();\n\n\t\tif (obj.excel)\n\t\t\tobj = this._parseExcel(obj, driver);\n\t\telse if(!obj.data && typeof obj == \"string\" && (driver.cell || driver.row))\n\t\t\tobj = this._parseCsv(obj, driver);\n\n\t\tsheets.load(this, obj);\n\t}\n};\napi(component);\nwebix.protoUI(component, webix.AtomDataLoader, webix.IdSpace, webix.ui.layout);\n","import {isCellSelected, isColSelected,isRowSelected,selectRow,selectColumn} from \"./operations/column_operations\";\nimport {getColumnOperation, getRowOperation, getClearOperation} from \"./toolbar/buttons\";\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => view.$$(\"context\").attachTo(view._table.$view));\n\n\tvar locale = webix.i18n.spreadsheet.menus;\n\tconst lists = {\n\t\tdata:[\n\t\t\t{ id:\"clear\",\t\tvalue: locale[\"clear\"], submenu: getClearOperation()},\n\t\t\t{ id:\"lock-cell\",\t\tvalue: locale[\"lock-cell\"]},\n\t\t\t{ $template: \"Separator\"},\n\t\t\t{ id:\"sort\",\tvalue: locale.sort, submenu:[\n\t\t\t\t{id: \"sort-asc\", value: locale[\"sort-asc\"]},\n\t\t\t\t{id: \"sort-desc\", value: locale[\"sort-desc\"]}\n\t\t\t]},\n\t\t\t{id:\"create-filter\",\t\tvalue: locale[\"create-filter\"]},\n\t\t\t{ $template: \"Separator\"},\n\t\t\t{ id:\"add-range\",\t\tvalue: locale[\"add-range\"]},\n\t\t\t{ id:\"add-link\",\t\tvalue: locale[\"add-link\"]},\n\t\t\t{ id:\"add-comment\",\t\tvalue: locale[\"add-comment\"]}\n\t\t],\n\t\tcolumn: getColumnOperation(view),\n\t\trow: getRowOperation(view)\n\t};\n\n\n\tvar context = {\n\t\tview: \"contextmenu\",\n\t\tid: \"context\",\n\t\tpadding:0,\n\t\tsubmenuConfig:{\n\t\t\tpadding:0,\n\t\t\ton:{\n\t\t\t\tonBeforeShow:function(){\n\t\t\t\t\tthis.sizeToContent();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdata:[],\n\t\ton:{\n\t\t\tonMenuItemClick(id) {\n\t\t\t\tview.callEvent(\"onCommand\", [this.getMenuItem(id)]);\n\t\t\t},\n\t\t\tonBeforeShow(pos) {\n\t\t\t\twebix.callEvent(\"onClick\", []);\n\t\t\t\tvar mode, trg;\n\n\t\t\t\ttrg = view._table.locate(pos);\n\t\t\t\tif (!trg) return false;\n\n\t\t\t\tmode = \"\";\n\t\t\t\tif (trg.header && trg.column !== \"rowId\"){\n\t\t\t\t\tif (!isColSelected(trg.column, view))\n\t\t\t\t\t\tselectColumn(trg.column, view);\n\t\t\t\t\tmode = \"column\";\n\t\t\t\t} else if (trg.row){\n\t\t\t\t\tif (trg.column === \"rowId\"){\n\t\t\t\t\t\tif (!isRowSelected(trg.row, view))\n\t\t\t\t\t\t\tselectRow(trg.row, view);\n\t\t\t\t\t\tmode = \"row\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!isCellSelected(trg.row, trg.column, view))\n\t\t\t\t\t\t\tview._table.addSelectArea(trg, trg);\n\t\t\t\t\t\tmode = \"data\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (mode){\n\t\t\t\t\tvar data = getMenuData(view, mode, lists[mode]);\n\t\t\t\t\tif (data){\n\t\t\t\t\t\tthis.clearAll();\n\t\t\t\t\t\tthis.parse(data);\n\t\t\t\t\t\tthis.sizeToContent();\n\t\t\t\t\t\twebix.html.preventEvent(pos);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"context\", context]);\n\tconst contextMenu = view.ui(context);\n\n\tview._destroy_with_me.push(contextMenu);\n}\n\nexport function getMenuData(view, name, data){\n\tvar ev = { area:name, data:data };\n\tif (view.callEvent(\"onContextMenuConfig\", [ev]))\n\t\treturn ev && ev.data;\n\treturn null;\n}","import * as m1  from \"./add_row_col\";\nimport * as m6  from \"./clipboard\";\nimport * as m12 from \"./column_operations\";\nimport * as m2  from \"./conditional_formats\";\nimport * as m4 from \"./types\";\nimport * as m8 from \"./formats\";\nimport * as m17 from \"./data\";\nimport * as m18 from \"./dropdown\";\nimport * as m7  from \"./formats\";\nimport * as m13 from \"./hide_row_col\";\nimport * as m14 from \"./lock_cell\";\nimport * as m3  from \"./resize\";\nimport * as m9  from \"./selection\";\nimport * as m10 from \"./sorting\";\nimport * as m16 from \"./spans\";\nimport * as m16a from \"../mathematics/methods\";\nimport * as m16b from \"../mathematics/ranges\";\nimport * as m16c from \"../mathematics/sheets\";\nimport * as m19 from \"./states\";\nimport * as m5  from \"./styles\";\nimport * as m11 from \"./undo\";\nimport * as m20 from \"./import\";\nimport * as m21 from \"./filter\";\nimport * as m22 from \"./print\";\nimport * as m23 from \"./export\";\nimport * as m24 from \"./load\";\nimport * as m25 from \"./clear_styles\";\nimport * as m26 from \"./comments\";\nimport * as m27 from \"./save\";\nimport * as m28 from \"./hide_headers\";\nimport * as m29 from \"./hide_gridlines\";\nimport * as m30 from \"./views\";\n\nexport function operations(view){\n\t//order in some cases does matter\n\t//resize must be applied after math, to size data by the result of math calculation\n\t//types must be applied after state and data \n\tvar all = [m1,m2,m5,m6,m7,m9,m10,m11,m12,m13,m14,m16,m3,m8,m17,m16a,m16b,m16c,m18,m19,m4,m20,m21,m22,m23,m24,m25,m26,m27,m28,m29,m30];\n\tfor (var i = 0; i < all.length; i++){\n\t\tif (all[i].init)\n\t\t\tall[i].init(view);\n\t}\n}","import * as rco from \"./row_col_operations\";\nimport * as lcl from \"./lock_cell\";\nimport * as fcl from \"./freeze\";\nimport * as hbr from \"./hide_gridlines\";\nimport * as hhd from \"./hide_headers\";\nimport * as hrc from \"./hide_rows\";\nimport * as mat from \"./math\";\nimport * as ops from \"./operations\";\nimport * as cor from \"./core\";\nimport * as sav from \"./save\";\nimport * as dpd from \"./dropdown\";\nimport * as flt from \"./filter\";\nimport * as cfm from \"./confirm\";\nimport * as und from \"./undo\";\nimport * as fmt from \"./number_formats\";\n\nexport function api(view){\n\tvar all = [rco, lcl, fcl, hbr, hhd, hrc, mat, ops, cor, sav, dpd, flt, cfm, und, fmt];\n\tfor (var i = 0; i < all.length; i++)\n\t\twebix.extend(view, all[i]);\n}"],"names":["webix","i18n","spreadsheet","labels","tooltips","menus","table","liveEditor","formats","protoUI","name","$cssName","$init","config","options","view","body","tooltip","template","xCount","yCount","data","ui","richselect","defaults","width","margin","cols","scroll","select","obj","id","on","onAfterSelect","this","getParentView","updateMasterValue","value","rows","css","skin","$name","title","onChange","suggest","fitMaster","hide","getValue","$$","master","setValue","getList","getColorView","getTypeView","getSelectedId","getBody","getChildViews","getItemText","$ready","push","bind","getPopup","isArray","callEvent","join","height","type","palette","attachEvent","setMasterValue","colorboard","icon","borderless","$view","className","$renderInput","divStart","color","renderColor","call","replace","match","p1","p2","p3","colorpicker","prototype","$setValue","popup","toString","getColorNode","style","backgroundColor","firstChild","childNodes","$renderIcon","text","apply","arguments","Object","defineProperty","exports","t","e","1","2","3","r","assign","n","length","o","hasOwnProperty","a","i","u","f","s","h","c","p","g","code","v","source","l","d","_","b","pageName","substr","indexOf","toUpperCase","String","fromCharCode","charCodeAt","y","m","M","P","F","D","T","z","C","E","A","page","x","w","O","I","N","S","R","L","k","exec","broken","triggers","Function","Date","getFullYear","valueOf","getTimezoneOffset","Math","floor","round","getTime","isNaN","concat","ceil","pow","U","CM","CD","XC","XL","X","IX","V","IV","Y","freeze","__proto__","SUM","AVERAGE","AVERAGEA","COUNT","COUNTA","COUNTBLANK","MAX","MIN","PRODUCT","SUMPRODUCT","SUMSQ","VAR","VARA","VARP","VARPA","STDEV","sqrt","STDEVP","STDEVA","STDEVPA","POWER","QUOTIENT","SQRT","ABS","abs","RAND","random","PI","INT","ROUND","parseFloat","toFixed","ROUNDDOWN","ROUNDUP","TRUNC","EVEN","sign","ODD","ACOS","acos","ACOSH","acosh","ACOT","atan","ACOTH","log","ARABIC","test","ASIN","asin","ASINH","asinh","ATAN","ATAN2","atan2","ATANH","BASE","Array","max","CEILING","COS","cos","COSH","cosh","COT","tan","COTH","exp","CSC","sin","CSCH","DEGREES","DECIMAL","parseInt","FACT","FACTDOUBLE","COMBIN","COMBINA","FLOOR","GCD","LN","LOG","LOG10","MOD","MROUND","MULTINOMIAL","RADIANS","RANDBETWEEN","ROMAN","split","pop","SEC","SECH","SIN","SINH","sinh","SQRTPI","SUBTOTAL","ADD","MINUS","DIVIDE","MULTIPLY","GT","GTE","LT","LTE","EQ","NE","POW","SUMX2MY2","find","SUMX2PY2","SUMXMY2","TAN","TANH","tanh","H","CONCATENATE","LEFT","substring","MID","RIGHT","LOWER","toLowerCase","UPPER","PROPER","TRIM","trim","LEN","CHAR","CLEAN","CODE","DOLLAR","EXCAT","FIND","FIXED","NUMBERVALUE","Number","REGEXEXTRACT","RegExp","REGEXMATCH","REGEXREPLACE","REPT","SEARCH","SUBSTITUTE","JOIN","B","G","j","W","getMonth","q","getDate","DAYS","toDateString","K","DATE","TIME","DAY","MONTH","YEAR","HOUR","getHours","MINUTE","getMinutes","SECOND","getSeconds","NOW","DATEDIF","DATEVALUE","getJsDateFromExcel","excelDate","date","getExcelDateFromJs","jsDate","init","addMethod","url","escape","arr","color1","color2","negativeColor","Sparklines","getTemplate","getJsDate","getExcelDate","datepicker","$prepareValue","copy","start","end","daterangepicker","buttons","close","getBodyConfig","content","elements","getFormElements","padding","$active","layoutPadding","form","label","cancel","autowidth","click","getTopParentView","save","hotkey","body_setter","_typeof","isUndefined","window","move","head","autofocus","IdSpace","headerRowHeight","datatable","setHTML","dataview","contextmenu","group","set","method","uid","all","serialize","sheets","proxy","$parse","$proxy","ajax","headers","post","thread","events","handler","newName","params","_loading_data","getActiveSheet","clearTimeout","delay","decode","encode","alpha","indexToHeader","index","chars","quotient","updateMaxColumn","maxColumn","keys","str","adress","size","col","range","nind","sheet","parts","ranges","getCode","rangeParts","d1","d2","escapeSheet","toRange","x2","y2","rangeObj","row","column","eachRange","callback","cellTest","isRange","cells","changeRange","inc","updated","r1","c1","r2","c2","toolbarSizes","paddingY","sectorPadding","sectorMargin","defaultStyles","style_names","_style_map","left","center","right","top","middle","bottom","wrap","getBorderCss","pos","border","sizeEl","border_checks","cell","area","mode","_style_handlers","getSelectArea","lineStyle","modes","_updateStyle","reset","_styles","_styles_cache","_styles_max","prefix","$index","html","removeStyle","getStyle","_mPage","getCell","span","getSpan","spanStyles","spanStyle","getFormat","format","addStyle","props","origin","styleFromText","key","_styleToText","cache","_addStyle","_parse","styles","styleObj","update_style_data","nstyle","setStyle","_setStyle","setRangeStyle","getTextSize","baseWidth","innerHTML","_table","appendChild","offsetWidth","offsetHeight","removeChild","old","oldFormat","formatChanged","saveCell","silent","_buildCssString","clearRangeStyle","compactStyles","serialized","removeUnusedStyles","used","newStyles","_applyStyles","eachSelectedCell","_applyCellStyles","ostyle","refresh","_serialize","_undoStyle","create","formatsCount","formatSources","formatCache","formatHelpers","currencies","setDefaultFormats","formatsLocale","price","map","getCurrencySymbol","extra","priceFormat","values","extend","zeros","priceSettings","decimalSize","symbol","separator","negative","getDelimiters","numberFormat","percent","format2code","dateFormat","string","serializeFormat","formToValues","groupSign","groupDelimiter","decimalSign","decimalDelimiter","getFormatSource","toexcel","parseFormat","createFormatName","formatToForm","dates","timeFormat","fullDateFormat","longDateFormat","red","first","second","priceBrackets","currency","isPrice","delimiters","integer","decimal","addFormat","nev","removeFormat","splitFormat","conditional","errorMessage","separated","separateFmt","genCode","condition","fmt","check","line","ind","isAbs","genFormatCode","isQuote","comma","numberPlaceholder","textPlaceholder","symbolPos","multiply","lastDateType","val","findIndex","betweenPlaceholders","placeholder","datePart","excelDateToWebix","undefined","getParts","reverse","lzeros","lfills","rzeros","rfills","rmax","dateTypes","timeTypes","dateOrder","sort","timeOrder","typesOrder","order","types","changeAreaDecimals","getCells","rules","isNumber","changeCellDecimals","getFormatName","isCustom","updateDecimals","parsed","decimals","placeholders","slice","withoutText","withoutPlaceholders","formValues","symbolId","toExcel","leftPlaceholders","fmtParts","sepFmtParts","getFmtPartValues","leftText","rightText","fmtPart","firstPlaceholder","Infinity","checkFormat","checkTime","quot","item","isDateInvalid","getDateEditFormat","formatName","locale","isTime","dateToStr","getFormatFromData","styleName","fmtName","load","defaultFormats","isChar","char","getLastCharIndex","getWord","formula","passive","quotes","operand","position","word","sum","flags","crosssheet","activeSheet","lines","ph","escaped","next","pushLine","loadCell","setType","dateToExcel","setCellValue","getFormatType","formatType","getType","parseToStore","_setType","mathFormat","isFormula","parseDate","getMathFormat","blockLevel","level","methods","forEach","part","expectType","getExpectType","strToDate","parseDateTime","parser","ignoreUndo","checkType","$format","updateCell","isString","cellEditor","getCellEditor","setFormat","setCellEditor","editor","filter","cursor","getInputNode","selectionStart","charAt","search","nextSymbol","node","tagName","_this","sizes","offset","textWidth","show","setValueHere","$enterKey","isVisible","getCellValue","action","newValue","getPopupConfig","onItemClick","button","getItem","suggestData","highlight","_highlightedCells","_update_range","_last_value_set","activeCell","showActiveSheet","updateCellValue","blur","preventEvent","oldVal","$handleSelection","UIManager","setFocus","eventRemove","keydownEv","event","_this2","endEdit","escapeText","changeCellCss","colorIndex","crossheet","cellSheet","prepareSheet","activeMath","_activeMath","cellText","rangeName","repeatedColor","nextCell","nextCellText","setColor","document","activeElement","paintValue","enter","grid","define","showSheet","moveSelection","remove","which","keyCode","dir","getItemNode","newv","$setValueHere","str1","str2","setSelectionRange","expectOperator","setRange","len","lastPos","prepareArea","min","row1","col1","row2","col2","coloredArea","texthighlight","layout","drag","dragscroll","EditAbility","list","toggle","onValue","offValue","common","inp","awidth","aheight","$allowsClear","blockEvent","unblockEvent","arrow","elementsConfig","labelWidth","_initOnChange","$eventSource","_getCheckboxes","count","$all","_count","base","labelRight","active","baseHeight","inputHeight","checkboxes","output","scrollview","queryView","onSelectChange","focus","resize","toFront","minWidth","minHeight","escHide","autofit","setAttribute","addHotKey","_removeView","getMenu","_clickEv","_menu","destructor","move_setter","DragControl","addDrag","$dragPos","$dragCreate","object","trg","target","getAttribute","elOffset","elPos","pOffset","parentNode","state","getScrollState","toNode","$dragDestroy","submenu","readonly","submenuConfig","externalUI","onMenuItemClick","_menuActions","onBeforeShow","_toggleExcel","dots","toPDF","display","toPNG","header","pull","showItem","hideItem","layoutMargin","multi","getSectionConfig","onAfterScroll","addSection","trashIcon","dataPadding","upper","hidden","labelsVisible","markersVisible","onClick","removeView","childs","getLayout","lastIndex","layoutId","addView","setValues","setSubValue","sub","hideSubviews","child","getValues","editors","excel_date","createPopup","icons","timepicker","_last_input_target","onEnter","render","showPopup","input","updateCalendar","calendar","afterRender","ss_richselect","exists","popupInit","$value","actions","isMerged","c0","splitCell","confirm","then","combineCells","undo","redo","hideGridlines","hideHeaders","freezeColumns","freezeRows","fontFamily","getColumnOperation","colOperations","resizeCell","getRowOperation","rowOperations","getClearOperation","getLocaleClear","$template","borders","styleFormats","colorButton","toggleButton","iconButton","btn","segmented","popupWidth","popupTemplate","popupEvents","titleHeight","align","condFormat","buttonsMap","getFontSize","numbers","fontSize","px","getCellFormats","example","number","getText","getAllElements","calcButtons","groups","result","$button","insert","ready","selected","barStyles","getBarStyles","dropdowns","getCellStyles","cellStyle","property","splice","updateValue","element","toolbar","allElements","elm","bottombar","toolbarButtons","structure","checkButtons","getButtons","columns","block","blockColumns","bar","viewId","innerId","selectRow","endRow","last","_selectRange","selectAll","firstColumn","selectColumn","endColumn","isColSelected","selectedArea","isCellSelected","isRowSelected","selectColumns","addSelectArea","adjustColumn","columnWidth","getColumnConfig","eachRow","getCellFilter","setColumnWidth","adjustRow","eachColumn","getSpanNode","setRowHeight","highlightColRow","sr","er","sc","ec","removeCellCss","addCellCss","getHeaderNode","removeCss","addCss","lockCss","lockCell","_mapCellsCalls","_locks","isCellLocked","cm","lock","updatePosition","locked","addSpan","extraCss","getExtraCss","setSpanValue","isEmpty","removeSpan","getRange","sel","lx","ly","rx","ry","cx","cy","setSpanCss","add","borderChecks","adjustSpan","spanData","checkSpan","selection","isFirstCell","pasteSpan","cutted","translate","mapCells","rid","cid","parse","spans","isUndo","undoSpan","checkSpanBorders","isDate","conditions","batch","lastIndexOf","_mData","getStore","getConditionCss","rendered","_empty","collection","get","currentValue","rule","handlers","checkOrder","compare","addEmptyCollection","oldConditions","_pull","clear","rowId","columnId","clearConditionalFormats","_changeCondition","pasteCondition","oldCondition","newCondition","_normalizeValue","createRules","rId","cId","cond","update","newData","_setCondition","type_action","_undoCondition","dragStartColumn","dragEndColumn","showCommentHandler","comments","_activeComment","editStatus","locate","visible","commentsView","viewonly","contains","math","editMath","highlightHeaders","ids","cop","st","ed","ev","getEditor","$anyKey","finalStep","resizeColumn","cind","dx","posRelative","selectColumnHandler","lastHeaderClick","headerClick","dblClick","shiftKey","lastClickedRow","editStop","getFocus","need_focus","setDefaultCss","leftSplit","areaselect","minColumnWidth","editable","editaction","minRowHeight","navigation","cell_template","_v","valueOnly","invalidDate","helper","_print","clearAll","columnCount","rowCount","el","nms","cssFormat","getRenderedValue","refreshColumns","env","isMac","f2","edit","del","styleHotKey","ctrlU","ctrlP","attr","elementOn","methodsName","updateEditor","fillEditor","startEdit","symbols","disableEditor","disabled","disable","enable","_rangeDialog","en","pasteRange","updateRange","colon","isEnabled","clearEditor","isActiveCell","func","getDimension","spanEndRow","spanEndCol","getSheetData","getPage","tconfig","frozenColumns","frozenRows","_frozenColumns","_frozenRows","getState","_undoValue","actionMap","_activeSheet","prepare","selectSheet","command","changePagerVisability","sheetTabWidth","showBatch","changePagerStatus","scrollPos","tabWidth","context","dataOrder","num","_sheets","rename","defaultBottom","editValue","webix_ssheet_sheet_arrow","initSheetMenu","$sheetMenu","menuInit","menu","_destroy_with_me","callAction","getMark","disableItem","enableItem","scrollSheets","direction","scrollTo","newIndex","getNewTitle","getSheet","addPage","newSheet","removePage","changeId","renamePage","linkRegex","DataStore","sheetName","tabs","_resetTable","Dialog","$dialog","$hide","$show","unescape","DialogBox","box","preview","parseImage","server","images","image","showPreview","upload","onBeforeFileAdd","file","reader","FileReader","onload","getFormView","readAsDataURL","onFileUpload","response","imageURL","onSaveClick","okClick","onCancelClick","fillUrl","addImage","viewid","open","views","els","parseChart","color_def","color_pos","color_neg","renderPreview","visibleBatch","labelPosition","getTypes","alert","checkRange","sparkConfig","addSparkline","clearValidation","selectedCell","getSelectedRange","scope","_updateData","toSheetRange","unshift","validate","oldData","_getScope","updateItem","unselect","_this3","theform","onBeforeSelect","removeRange","editRange","isNotEmpty","onFocus","autoheight","saveClick","getRanges","selectedId","allRanges","nameParts","selectList","rangeVal","Ranges","_master","_normalizeName","_normalizeRange","globalRange","out","global","rangeOptions","getRangePos","unique","empty","objA","objB","sorters","sorting","as","int","nullFilter","$empty","_ssFilters","markBarFilter","getFilters","filters","clearFilters","refilter","filterSpreadSheet","calibrateRange","getFilterRange","isValueActive","includes","isFilterExists","getFilterMode","pasteFilter","setCellFilter","getSingleOption","getConditions","getFilterFunction","opt","on_click","ssheet_filter_sign","on_dblclick","toggleFilters","removeFilters","isFilter","$mode","$filter","syncScroll","_getTargetNode","getFilter","flt","importData","relative","field","inputs","applyFilter","oldValue","setCellStyle","isHidden","nodeOffset","tableOffset","getElementsByClassName","ydiff","xdiff","scrollSize","fillForm","labelsLocale","commonConfig","customConfig","dateConfig","getFormats","updateForm","paddingX","closeWin","isText","$css","_getDatalayout","value2","_formatValue","_isNotDateRule","editFormat","_safeInt","_getCondition","activeValue","dialog","_rulesToArr","current_view","_this4","onBlur","vid","dlayout","getIdByIndex","_this5","maxHeight","getRows","getConditionStyle","conditionStyle","getSheets","filename","restoreValue","paper","fit","sheetnames","modal","vertical","print","_setComment","textarea","onViewResize","animate","showInput","addComment","comment","showTemplate","changeTextarea","getHead","$height","rowHeight","getOption","optionHeight","bases","imt","imc","asw","rgs","dpd","cnd","lnk","pnt","cmt","ignoreUndoReset","restoreHistory","_ssUndoHistory","_ssUndoCursor","addToHistory","$skipHistory","ignoreReset","step","prevData","undoHandlers","nvalue","ovalue","_trackAll","conf","viewMethods","_types","track","_trackOne","_fromRange","_isPie","_removeLegend","legend","fromData","shift","names","_getNames","switchDirection","dataSeries","legendRange","_getParts","_showAll","win","_correctPos","_showOne","_getWidth","$width","_getHeight","each","_isRange","_getDataParts","subdata","getRangeRows","getRangeCols","_getSeries","oldXaxis","vals","xAxis","activeVals","series","firstRange","inActiveSeries","seria","activeVal","marker","_getColor","colors","dataRange","subRange","_normalizeConfig","valign","scale","rangeToData","rind","editUIType","querySelector","register","container","_commands","getConfig","inner","renderConfig","_processTables","query","tables","dt","oldWin","_activeWin","$destructed","_reset","_undoUI","one","viewIds","_genChartConfig","htmlFilter","scaleColor","legendConfig","_pieConfig","pieInnerText","borderColor","lineColor","yAxis","lineShape","circle","chartEditor","handlePieLegend","getLeftColumn","getTopRow","setSilentValue","updateLegendRange","updateXaxisRange","xAxisRange","leftColumn","topRow","exist","updateAlign","updateValign","updateType","getTabbar","switchRowsCols","stacked","hideField","hideBatch","hideOption","showOption","updateSeries","pie","inValues","expand","closeEditor","outValues","activeSkin","barHeight","complexData","addRichselect","getLegendAlign","getLegendValign","attributes","loadChangedData","process","getUpdateValues","_addColumn","addColumn","_delColumn","removeColumn","_addRow","addRow","_delRow","removeRow","updatedData","fixSelectArea","_ssEditors","clearEditors","pasteDropdown","dropdown","styledata","clipdata","updateFilters","getRow","ignore","$popup","tblEditors","isEditor","_clipboardToTable","cdata","fromSheet","cut","transposeMath","clipboard","clipbuffer","_sel_to_clip","mapSelection","row_ind","delimiter","clipboardDecimalDelimiter","_updateDelimiter","csv","stringify","ctrlKey","metaKey","_get_sel_style","allFiltersInZone","startRow","startCol","endCol","_clip_to_sel","leftTop","_changeDelimiter","record","_add_row_col","maxRow","maxCol","col_ind","subtrans","_hidden_cols_hash","_hidden_rows_hash","isColumnVisible","setState","indexes","getIds","_showRow","_showColumn","_hideRow","_hideColumn","isRowVisible","showColumn","getColumnIndex","hideColumn","_updatePosition","hrows","hcols","_adjustRowHeight","headerOnly","refreshSelectArea","getColumn","_undoResize","defWidth","defHeight","nsizes","bs","blockStart","blockEnd","res","removeSelectArea","sortRange","fullrange","expandSelection","maxY","maxX","nr1","nr2","nc1","nc2","newrange","by","newMath","updateSheetNames","oldName","stack","option","gridlines","removeComment","getComment","removeCommentsRange","commentCell","_undoComment","modules","m1","m2","m3","m4","m5","m6","m7","uploader","XMLHttpRequest","apiOnly","accept","startImport","fileDialog","_buildHtml","doc","xCorrection","baseIndex","sheetname","$customPrint","br","insertBefore","docFooter","_cleanHtml","_safeColor","_getCellStyle","excel","stl","font","alignment","_getExcelCellStyle","_getPdfCellStyle","rgb","fill","fgColor","horizontal","sz","italic","underline","bold","wrapText","getBorderStyles","textAlign","vertAlign","whiteSpace","_getDocStyle","$exportView","pdf","export_mode","defaultOptions","stubCells","footer","heights","rawValues","filterHTML","_exportView","dataOnly","sheetOptions","_hidden","pdfTable","textBefore","sheetData","scheme","_getStyles","cached","cachedConditions","_getDefaults","docHeader","delta","rIndex","cIndex","_getCellConditions","computed","getComputedStyle","bg","_updateStyleCondition","rgbToHex","_updatePdfData","idx","colspan","rowData","exportData","rowSize","pad","paddingTop","paddingBottom","ref","Sheet","Name","Ref","getAutowidth","prop","orientation","$getExportValue","_excel_to_data","dataObj","styleshash","stylescount","_safeFont","va","_getBorderStyles","_getTypes","_getHidden","safe","_parseExcel","driver","full","_parseCsv","getRecords","clearRange","callCommand","setSize","insertRow","deleteRow","insertColumn","deleteColumn","checkSpans","spanSize","changeSpan","getIndexById","hideRow","_normalizeVal","chart","getRangeValue","registerMathMethod","sid","recalculate","setPlaceholder","spn","rangeStr","setRangeValue","addSheet","clearSheet","renameSheet","editSheet","removeSheet","und","srt","correctVal","cb","sameValue","oldType","dateValue","updatedType","param","tbl","ok","resetUndo","groupUndo","changeDecimals","defaultMenu","getMenuData","component","_base_index","getDefaultStyles","_sub_init","_set_handlers","$skin","setSkinDefaults","material","background","subbar","tblObj","attachTo","lists","sizeToContent","getMenuItem","contextMenu","dialogs","viewBases","rows_setter","operations","m9","m10","m11","m12","m13","m14","m16","m8","m17","m16a","m16b","m16c","m18","m19","m20","m21","m22","m23","m24","m25","m26","m27","m28","m29","m30","$onLoad","api","rco","lcl","fcl","hbr","hhd","hrc","mat","ops","cor","sav","cfm","AtomDataLoader"],"mappings":";;;;;;;;uJACAA,MAAMC,KAAKC,YCDI,CACdC,OAAO,QAEI,kBACE,kBACF,iBACC,eACH,cACE,uBACO,0BACA,2BACL,2BACD,oCACO,yBACJ,4BACA,qCAED,iBACL,YACA,YACA,aACC,eACC,gBACA,iBACC,aACL,WACG,eAEC,cACF,aAEC,6BAEa,+BACT,gCACQ,+BACG,iCACF,kCACE,kBAEf,sBACM,4BACD,qBACC,sBACA,uBACC,kBAEJ,mBACG,2BACC,qCACH,wCAEM,iCACD,yBACC,0BACA,6BACG,gCACA,0BAEN,8BACE,kCAEA,+BACA,gCACA,WAEZ,oBAEU,8BACM,6DACN,uBACD,wCACK,iCAEN,uBACD,kBACD,YAEH,yBACQ,8BACD,wBAEP,wBACO,0BACJ,0BAEA,gBACF,+BAEc,gFACA,8EACH,6EACN,gCAEP,sBACM,sCACG,iCACH,4BACC,yBACC,6BACH,uBACD,4BACC,+BACC,+BACF,yBACH,6BACK,mBACJ,2BACA,8BACG,2BACC,8BACE,4BACC,oBAEP,gBAEF,eACC,uBACM,gCACA,+BAEH,qBACE,sBACD,4BAEE,wBACA,wBACA,uBAED,6BACI,iCACA,gCACE,0BAEP,oBACA,mBACD,oBACE,oBACF,oBACE,uBACC,4BACI,4BAEL,uBACC,wBACA,uBACD,4BACM,kCACA,4BACA,0BACF,6CACA,2CACE,6BACC,6BACD,0BACF,yBACC,0BACA,sEAEJ,4BACI,2CACA,iDACE,oCACA,4BACD,4BACC,8BACC,+BACA,oCACH,4BACG;sBACA,sBAET,uBACG,wBACF,6BACO,mBACV,wBACE,uBACG,yBACF,2BAEI,mCACF,uBACH,uBAEG,iCACO,kCACE,mCACD,gCACF,yBAEL,oCACF,0BAEM,iBAEtBC,SAAU,OACA,wBACK,iCACC,0BACF,yBACC,oCACI,yBACP,uBACG,+BACE,4BACD,6BACE,gCACC,8BACH,8BACE,qCACK,yCACL,4BACH,4BACE,6BACD,0BACF,2BACG,8BACA,oBACR,aACA,iBACA,YACA,cACE,oCACU,8CACA,wCACL,oBACD,2BACK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"}